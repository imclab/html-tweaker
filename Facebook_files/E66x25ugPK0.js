/*1347659743,178142543*/

if (window.CavalryLogger) { CavalryLogger.start_js(["bFFm0"]); }

__d("ReactErrors",["keyMirror","throwIf"],function(a,b,c,d,e,f){var g=b('keyMirror'),h=b('throwIf'),i=g({CLASS_SPEC:null,CONTROL_WITHOUT_BACKING_DOM:null,NO_RENDER_NODE:null,USING_CHILD_TWICE:null,DUAL_TRANSACTION:null,MISSING_TRANSACTION:null,INVALID_STATE:null,ON_DOM_READY_MISMATCH:null,INVALID_COMPONENT:null,RUNAWAY_TREE:null,ESCAPE_TYPE:null});i.throwIf=h;e.exports=i;});
__d("ReactBrowserUtils",["ReactErrors","objMap"],function(a,b,c,d,e,f){var g=b('ReactErrors'),h=b('objMap');function i(l){return {"&":"&amp;",">":"&gt;","<":"&lt;","\"":"&quot;","'":"&#x27;","/":"&#x2f;"}[l];}var j=document.createElement('div'),k={getSupportedStyleMap:function(){var l={},m;for(m in j.style)l[m]=k.escapeTextForBrowser(m);return l;},getContentAccessorKey:function(){return j.innerText!==undefined?'innerText':'textContent';},escapeTextForBrowser:function(l){g.throwIf((!l||!l.indexOf)&&isNaN(l),g.ESCAPE_TYPE);return (''+l).replace(/[&><"'\/]/g,i);},supportsEvent:function(l,m){var n=document.createElement('div'),o='on'+l,p=o in n,q=!!j.addEventListener;if(!p){if(!n.setAttribute)n=document.createElement('div');if(n.setAttribute&&n.removeAttribute){n.setAttribute(o,'');p=typeof n[o]==='function';if(typeof n[o]!=='undefined')n[o]=undefined;n.removeAttribute(o);}}n=null;return (m&&q||!m)&&p;}};e.exports=k;});
__d("ReactEnv",["ReactBrowserUtils"],function(a,b,c,d,e,f){var g=b('ReactBrowserUtils'),h={currentScrollLeft:0,currentScrollTop:0,browserInfo:null,refreshAuthoritativeScrollValues:function(){h.currentScrollLeft=document.body.scrollLeft+document.documentElement.scrollLeft;h.currentScrollTop=document.body.scrollTop+document.documentElement.scrollTop;},ensureBrowserDetected:function(){h.browserInfo=g.browserDetection();}};e.exports=h;});
__d("ReactEventConstants",[],function(a,b,c,d,e,f){var g={onScroll:1,onTouchTap:2,onTouchEnd:3,onTouchMove:4,onTouchStart:5,onTouchDrag:6,onTouchDragDone:7,onClick:8,onDragDone:9,onDrag:10,onMouseWheel:11,onKeyUp:12,onKeyDown:13,onKeyPress:14,onFocus:15,onBlur:16,onMouseIn:17,onMouseOut:18,onMouseDown:19,onMouseUp:20,onChange:21,onScrollDirect:101,onTouchTapDirect:102,onTouchEndDirect:103,onTouchMoveDirect:104,onTouchStartDirect:105,onTouchDragDirect:106,onTouchDragDoneDirect:107,onClickDirect:108,onDragDoneDirect:109,onDragDirect:110,onMouseWheelDirect:111,onKeyUpDirect:112,onKeyDownDirect:113,onKeyPressDirect:114,onFocusDirect:115,onBlurDirect:116,onMouseInDirect:117,onMouseOutDirect:118,onMouseDownDirect:119,onMouseUpDirect:120,onChangeDirect:121,onScrollFirstHandler:201,onTouchTapFirstHandler:202,onTouchEndFirstHandler:203,onTouchMoveFirstHandler:204,onTouchStartFirstHandler:205,onTouchDragFirstHandler:206,onTouchDragDoneFirstHandler:207,onClickFirstHandler:208,onDragDoneFirstHandler:209,onDragFirstHandler:210,onMouseWheelFirstHandler:211,onKeyUpFirstHandler:212,onKeyDownFirstHandler:213,onKeyPressFirstHandler:214,onFocusFirstHandler:215,onBlurFirstHandler:216,onMouseInFirstHandler:217,onMouseOutFirstHandler:218,onMouseDownFirstHandler:219,onMouseUpFirstHandler:220,onChangeFirstHandler:221},h={mouseMove:{},mouseIn:{},mouseDown:{abstractEquivalent:g.onMouseDown},mouseUp:{abstractEquivalent:g.onMouseUp},mouseOut:{},click:{abstractEquivalent:g.onClick},mouseWheel:{abstractEquivalent:g.onMouseWheel},touchStart:{abstractEquivalent:g.onTouchStart},touchEnd:{abstractEquivalent:g.onTouchEnd},touchMove:{abstractEquivalent:g.onTouchMove},touchCancel:{},keyUp:{abstractEquivalent:g.onKeyUp},keyPress:{abstractEquivalent:g.onKeyPress},keyDown:{abstractEquivalent:g.onKeyDown},focus:{abstractEquivalent:g.onFocus},blur:{abstractEquivalent:g.onBlur},scroll:{abstractEquivalent:g.onScroll},change:{abstractEquivalent:g.onChange}},i={standard:0,direct:100,firstHandler:200},j={abstractHandlers:g,topLevelEvents:h,handlerModes:i};e.exports=j;});
__d("ReactAbstractEvent",["ReactEnv","ReactEventConstants"],function(a,b,c,d,e,f){var g=b('ReactEnv'),h=b('ReactEventConstants'),i=h.topLevelEvents;function j(k,l,m,n,o){this.abstractEventType=k;this.originatingTopLevelEventType=l;this.target=m;this.nativeEvent=n;this.data=o||{};}j.prototype.preventDefault=function(){j.preventDefaultOnNativeEvent(this.nativeEvent);};j.preventDefaultOnNativeEvent=function(k){if(k.preventDefault){k.preventDefault();}else k.returnValue=false;};j.normalizeScrollData=function(k,l){return {scrollTop:l.scrollTop,scrollLeft:l.scrollLeft,clientWidth:l.clientWidth,clientHeight:l.clientHeight,scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};};j.normalizeMouseWheelData=function(k,l){var m=0,n=0,o=0;if(k.wheelDelta)m=k.wheelDelta/120;if(k.detail)m=-k.detail/3;o=m;if(k.axis!==undefined&&k.axis===k.HORIZONTAL_AXIS){o=0;n=-m;}if(k.wheelDeltaY!==undefined)o=k.wheelDeltaY/120;if(k.wheelDeltaX!==undefined)n=-k.wheelDeltaX/120;return {delta:m,deltaX:n,deltaY:o};};j.isNativeClickEventRightClick=function(k){return k.which?k.which===3:k.button?k.button===2:false;};j.normalizeMouseData=function(k,l){return {globalX:j.eventGlobalX(k),globalY:j.eventGlobalY(k),rightMouseButton:j.isNativeClickEventRightClick(k)};};j.normalizeDragEventData=function(k,l,m,n,o){return {globalX:l,globalY:m,startX:n,startY:o};};j.fromTopLevel=function(k,l,m){var n;switch(k){case i.mouseWheel:n=j.normalizeMouseWheelData(l,m);break;case i.scroll:n=j.normalizeScrollData(l,m);break;case i.click:case i.change:case i.mouseDown:case i.mouseUp:case i.touchMove:case i.touchStart:case i.touchEnd:n=j.normalizeMouseData(l,m);break;default:n={};}return new j(k.abstractEquivalent,k,m,l,n);};j.eventGlobalY=function(k){if((!k.touches||k.touches.length===0)&&k.changedTouches&&k.changedTouches.length===1)return k.changedTouches[0].pageY;if(k.touches&&k.touches.length===1)return k.touches[0].pageY;return k.pageY!==undefined?k.pageY:k.clientY+g.currentScrollTop;};j.eventGlobalX=function(k){if((!k.touches||k.touches.length===0)&&k.changedTouches&&k.changedTouches.length===1)return k.changedTouches[0].pageX;if(k.touches&&k.touches[0])return k.touches[0].pageX;return k.pageX!==undefined?k.pageX:k.clientX+g.currentScrollLeft;};e.exports=j;});
__d("ReactEvent",["ReactAbstractEvent","ReactBrowserUtils","ReactEnv","ReactErrors","ReactEventConstants"],function(a,b,c,d,e,f){var g=b('ReactAbstractEvent'),h=b('ReactBrowserUtils'),i=b('ReactEnv'),j=b('ReactErrors'),k=b('ReactEventConstants'),l=k.abstractHandlers,m=k.topLevelEvents,n=1,o=5,p=10,q=200,r={},s=false,t=0,u={},v=0,w=null,x=null,y=null,z=null,aa=0,ba=null,ca=false,da={},ea=true,fa={};function ga(ab,bb){fa[ab+'@'+bb.listenForAbstractHandlerType]=bb;}function ha(ab,bb){var cb=ab+'@'+bb;if(fa[cb])delete fa[cb];}function ia(ab){return function(bb){ab(bb||window.event);};}function ja(ab,bb,cb){if(ab.addEventListener){ab.addEventListener(bb,ia(cb),false);}else if(ab.attachEvent)ab.attachEvent('on'+bb,ia(cb));}function ka(ab,bb,cb){ab.addEventListener(bb,ia(cb),true);}function la(ab){var bb=ab.target||ab.srcElement||window;return (bb.nodeType===3)?bb.parentNode:bb;}function ma(ab){return function(bb){var cb=la(bb);if(ea)ya(ab,bb,cb);};}function na(ab,bb,cb){ja(cb,bb,ma(ab));}function oa(ab,bb,cb){ka(cb,bb,ma(ab));}function pa(ab){return !!ab.abstractEquivalent;}function qa(ab,bb,cb){var db=null,eb=false,fb,gb;for(gb=0;gb<cb.length;gb++){fb=cb[gb];db=fa[ab+'@'+(fb.abstractEventType+bb)];if(db){db.callThis(fb,fb.nativeEvent);eb=true;}}return eb;}function ra(ab,bb,cb,db,eb){var fb=ab+'@',gb=fb+(l.onDrag+cb),hb=fb+(l.onTouchDrag+cb),ib=fb+(l.onDragDone+cb),jb=fb+(l.onTouchDragDone+cb),kb=bb===m.mouseDown?gb:bb===m.touchStart?hb:false,lb=bb===m.mouseDown?ib:bb===m.touchStart?jb:false,mb,nb=false,ob=[],pb,qb,rb;if(bb===m.mouseDown||bb===m.touchStart){qb=g.eventGlobalX(db,true);rb=g.eventGlobalY(db,true);s=true;w=qb;x=rb;if(fa[kb]){pb=g.fromTopLevel(bb,db,eb);ob.push(pb);if(!pb.data.rightMouseButton){mb=true;r[kb]=fa[kb];t++;var sb=fa[lb];if(sb){u[lb]=sb;v++;}y=qb;z=rb;aa=0;}}}else if(bb===m.touchEnd){qb=g.eventGlobalX(db);rb=g.eventGlobalY(db);var tb=Math.abs(qb-w)+Math.abs(rb-x);if(tb<p)ob.push(new g(l.onTouchTap,bb,eb,db,{}));}if(pa(bb))ob.push(g.fromTopLevel(bb,db,eb));nb=qa(ab,cb,ob);return nb||mb;}function sa(ab,bb,cb){var db,eb=cb,fb=cb,gb='',hb='';if(ab===m.mouseIn){fb=bb.relatedTarget||bb.fromElement;if(fb)return;}else eb=bb.relatedTarget||bb.toElement;while(eb&&(!eb.id||eb.id.charAt(0)!=='.'))eb=eb.parentNode;while(fb&&(!fb.id||fb.id.charAt(0)!=='.'))fb=fb.parentNode;if(!fb&&!eb)return;if(fb&&fb.id)gb=fb.id;if(eb&&eb.id)hb=eb.id;var ib='',jb=0;while(hb.charAt(jb)!==''&&gb.charAt(jb)!==''&&hb.charAt(jb)===gb.charAt(jb))jb++;if(hb.charAt(jb-1)==='.'){ib=hb.substr(0,jb-1);}else ib=hb.substr(0,(hb.substr(0,jb)).lastIndexOf('.'));var kb,lb=gb,mb;if(fb){mb=0;while(lb!==ib){kb=fa[lb+'@'+l.onMouseOut];if(kb){db=new g(l.onMouseOut,ab,cb,bb,{});kb.callThis(db,cb,bb);}lb=lb.substr(0,lb.lastIndexOf('.'));mb++;j.throwIf(mb>q,j.RUNAWAY_TREE);}}lb=hb.substr(0,ib.length);if(eb){mb=0;while(lb!==hb){lb=hb.indexOf('.',lb.length+1)===-1?hb:hb.substr(0,(hb.indexOf('.',lb.length+1)));kb=fa[lb+'@'+l.onMouseIn];if(kb){db=new g(l.onMouseIn,ab,bb,{});kb.callThis(db,cb,bb);}j.throwIf(mb++>q,j.RUNAWAY_TREE);}}return;}function ta(ab,bb,cb){if(!s)return;var db=g.eventGlobalX(bb),eb=g.eventGlobalY(bb);if(t){var fb=Math.abs(db-y)+Math.abs(eb-z),gb=(new Date()).getTime(),hb=gb-aa;if(fb<n||hb<o)return;var ib;for(ib in r){if(!r.hasOwnProperty(ib))continue;var jb=g.normalizeDragEventData(bb,db,eb,w,x),kb=r[ib],lb=ab===m.touchMove?l.onTouchDrag:l.onDrag,mb=new g(lb,ab,cb,bb,jb);kb.callThis.call(kb.context,mb,bb);}y=db;z=eb;aa=gb;}}function ua(ab,bb,cb){var db=g.eventGlobalX(bb),eb=g.eventGlobalY(bb),fb,gb,hb=Math.abs(db-w)+Math.abs(eb-x);if(v)if(hb>n)for(gb in u){if(!u.hasOwnProperty(gb))continue;fb=u[gb];var ib=ab===m.mouseUp?l.onDragDone:l.onTouchDragDone,jb=new g(ib,ab,cb,bb,{});fb.callThis.call(fb.context,jb);}r={};s=false;t=0;v=0;u={};w=0;x=0;}function va(){ja(window,'scroll',function(ab){if(la(ab)==window)i.refreshAuthoritativeScrollValues();});}function wa(){ja(window,'resize',function(ab){if(la(ab)==window)i.refreshAuthoritativeScrollValues();});}function xa(ab,bb){va();wa();if(!bb){na(m.mouseMove,'mousemove',ab);na(m.mouseIn,'mouseover',ab);na(m.mouseDown,'mousedown',ab);na(m.mouseUp,'mouseup',ab);na(m.mouseOut,'mouseout',ab);na(m.click,'click',ab);na(m.mouseWheel,'mousewheel',ab);}else{na(m.touchStart,'touchstart',ab);na(m.touchEnd,'touchend',ab);na(m.touchMove,'touchmove',ab);na(m.touchCancel,'touchcancel',ab);}na(m.keyUp,'keyup',ab);na(m.keyPress,'keypress',ab);na(m.keyDown,'keydown',ab);na(m.change,'change',ab);na(m.mouseWheel,'DOMMouseScroll',ab);na(m.scroll,'scroll',ab);if(h.supportsEvent('focusin')){na(m.focus,'focusin',ab);na(m.blur,'focusout',ab);}else if(h.supportsEvent('focus',true)){oa(m.focus,'focus',ab);oa(m.blur,'blur',ab);}}function ya(ab,bb,cb){var db=cb.id;if(ab===m.mouseMove){ta(ab,bb,cb);return;}if(ab===m.touchMove)ta(ab,bb,cb);while(cb.parentNode&&cb.parentNode!==cb&&(db===null||db.length===0)){cb=cb.parentNode;db=cb.id;}if(ab===m.mouseIn||ab===m.mouseOut){sa(ab,bb,cb);return;}var eb=false;if(db&&db.length!==0)eb=ra(db,ab,k.handlerModes.direct,bb,cb);while(db&&db.length!==0){if(!eb)eb=ra(db,ab,k.handlerModes.firstHandler,bb,cb);eb=ra(db,ab,k.handlerModes.standard,bb,cb)||eb;var fb=db.lastIndexOf(".");db=db.substr(0,fb);}if(ab===m.mouseUp||ab===m.touchEnd||ab===m.touchCancel)ua(ab,bb,cb);}var za={setEnabled:function(ab){ea=ab;},ensureListening:function(ab,bb){if(!da[ab.id]){xa(ab,bb);da[ab.id]=true;}},registerHandlerByName:function(ab,bb,cb){if(l[bb])ga(ab,{listenForAbstractHandlerType:l[bb],callThis:cb});},clearAllHandlers:function(ab){var bb=Object.keys(l);for(var cb=0;cb<bb.length;cb++){var db=bb[cb],eb=l[db];ha(ab,eb);}},disableSelectionGlobally:function(){if(ca)return;ba=document.onselectstart;ca=true;document.onselectstart=function(ab){g.preventDefaultOnNativeEvent(ab||window.event);};},enableSelectionGlobally:function(){if(ca){document.onselectstart=ba;ba=null;ca=false;}}};e.exports=za;});
__d("ReactInputSelection",[],function(a,b,c,d,e,f){var g={hasSelectionCapabilities:function(h){return h&&((h.nodeName==='INPUT'&&h.type==='text'||h.nodeName==='TEXTAREA'));},getSelectionInformation:function(){var h=document.activeElement;return {focusedElem:h,selectionRange:g.hasSelectionCapabilities(h)?g.getSelection(h):null};},restoreSelection:function(h){var i=document.activeElement,j=h.focusedElem,k=h.selectionRange;if(i!==j&&document.getElementById(j.id)){if(g.hasSelectionCapabilities(j))g.setSelection(j,k);j.focus();}},getSelection:function(h){if(!document.selection)return {start:h.selectionStart,end:h.selectionEnd};var i=document.selection.createRange();if(i.parentElement()!==h)return {start:0,end:0};var j=h.value.length;if(h.nodeName==='INPUT'){return {start:-i.moveStart('character',-j),end:-i.moveEnd('character',-j)};}else{var k=i.duplicate();k.moveToElementText(h);k.setEndPoint('StartToEnd',i);var l=j-k.text.length;k.setEndPoint('StartToStart',i);return {start:j-k.text.length,end:l};}},setSelection:function(h,i){var j=i.start,k=i.end;if(typeof k==='undefined')k=j;if(document.selection){if(h.tagName==='TEXTAREA'){var l=(h.value.slice(0,j).match(/\r/g)||[]).length,m=(h.value.slice(j,k).match(/\r/g)||[]).length;j-=l;k-=l+m;}var n=h.createTextRange();n.collapse(true);n.moveStart('character',j);n.moveEnd('character',k-j);n.select();}else{h.selectionStart=j;h.selectionEnd=Math.min(k,h.value.length);h.focus();}}};e.exports=g;});
__d("ReactOnDOMReady",["ReactErrors"],function(a,b,c,d,e,f){var g=b('ReactErrors'),h=null,i={enqueue:function(j){g.throwIf(!h,g.ON_DOM_READY_MISMATCH);h.push(j);},beginEnqueueing:function(){g.throwIf(h,g.ON_DOM_READY_MISMATCH);h=[];},notifyAll:function(){var j=h,k=j.length;g.throwIf(!j,g.ON_DOM_READY_MISMATCH);h=null;for(var l=0;l<k;l=l+1){var m=j[l];m.onDomReady.call(m,m.getDOMNode());}j.length=0;}};e.exports=i;});
__d("ReactDOMTransaction",["ReactErrors","ReactEvent","ReactInputSelection","ReactOnDOMReady"],function(a,b,c,d,e,f){var g=b('ReactErrors'),h=b('ReactEvent'),i=b('ReactInputSelection'),j=b('ReactOnDOMReady'),k=null,l={totalOnDomReadyTime:0,perform:function(m,n){l.initialize();try{m.call(n);}catch(o){throw o;}finally{l.close();}},initialize:function(){g.throwIf(k,g.DUAL_TRANSACTION);h.setEnabled(false);j.beginEnqueueing();k={selectionInformation:i.getSelectionInformation()};},close:function(){g.throwIf(!k,g.MISSING_TRANSACTION);i.restoreSelection(k.selectionInformation);h.setEnabled(true);k=null;var m=Date.now();j.notifyAll();l.totalOnDomReadyTime+=(Date.now()-m);}};e.exports=l;});
__d("ReactInstanceHandles",[],function(a,b,c,d,e,f){var g='.',h={findComponentRoot:function(i,j){var k=i.firstChild;while(k){if(j==k.id){return k;}else if(j.indexOf(k.id)===0)return h.findComponentRoot(k,j);k=k.nextSibling;}},getReactRootID:function(i){return '.reactRoot['+i+']';},getReactRootIDFromNodeID:function(i){var j=/\.reactRoot\[[0-9]+\]/.exec(i);return j&&j[0];}};e.exports=h;});
__d("ReactMount",["ReactErrors","ReactEvent","ReactInstanceHandles"],function(a,b,c,d,e,f){var g=b('ReactErrors'),h=b('ReactEvent'),i=b('ReactInstanceHandles'),j=0,k={instanceByReactRootId:{},containersByReactRootId:{},totalInstantiationTime:0,totalInjectionTime:0,useTouchEvents:false,scrollMonitor:function(l,m){return m();},prepareForRendering:function(l){h.ensureListening(l,k.useTouchEvents);},renderComponent:function(l,m){g.throwIf(!m,g.NO_RENDER_NODE);k.prepareForRendering(document.documentElement);k.renderMarkupIntoNode(l,m);return l;},renderMarkupIntoNode:function(l,m){var n=i.getReactRootID(j);k.instanceByReactRootId[n]=l;k.containersByReactRootId[n]=m;j++;l.genMarkupIntoContainer(n,m);},destroyAndReleaseReactRootNode:function(l){var m=k.getInstanceHeldByContainer(l),n=l.firstChild&&l.firstChild.id;m.destroy();delete k.instanceByReactRootId[n];delete k.containersByReactRootId[n];l.innerHTML='';},getInstanceHeldByContainer:function(l){var m=k.instanceByReactRootId[l.firstChild&&l.firstChild.id];return m;},findReactContainerForId:function(l){return k.containersByReactRootId[i.getReactRootIDFromNodeID(l)];},renderOrUpdateComponent:function(l,m){var n=k.getInstanceHeldByContainer(m);if(n){var o=n.updateAllProps.bind(n,l.props);k.scrollMonitor(m,o);return l;}else return k.renderComponent(l,m);}};e.exports=k;});
__d("ReactComponent",["ReactDOMTransaction","ReactErrors","ReactInstanceHandles","ReactMount","merge"],function(a,b,c,d,e,f){var g=b('ReactDOMTransaction'),h=b('ReactErrors'),i=b('ReactInstanceHandles'),j=b('ReactMount'),k=b('merge'),l={currentlyConstructingOwner:null,isValidComponent:function(m){return (m&&typeof m.genMarkupIntoContainer==='function'&&typeof m.updateAllProps==='function');},validateReactComponentInstance:function(m){h.throwIf(!l.isValidComponent(m),h.INVALID_COMPONENT);},ReactComponentMixin:{getDOMNode:function(){var m=this.rootDomNode;if(!m){m=document.getElementById(this._rootDomId);if(!m){var n=j.findReactContainerForId(this._rootDomId);m=i.findComponentRoot(n,this._rootDomId);}}return (this.rootDomNode=m);},captureOwnerAtConstruction:function(){var m=this.props;if(m.ref)m.owner=l.currentlyConstructingOwner;},attachOwnersRefsOnRender:function(){var m=this.props;if(m.ref)m.owner.attachRef(m.ref,this);},detachOwnersRefs:function(){var m=this.props;if(m.ref&&m.owner.refs[m.ref]===this)m.owner.detachRef(m.ref);},destroyComponent:function(){this.detachOwnersRefs();},detachFromDom:function(){var m=this.getDOMNode();m.parentNode.removeChild(m);},destroyAndDetachFromDom:function(){this.destroy();this.detachFromDom();},initializeComponent:function(m){this._rootDomId=m;this.attachOwnersRefsOnRender();},handleGenMarkup:function(){},handleUpdateAllProps:function(){},updateProps:function(m){this.updateAllProps(k(this.props,m));},updateAllProps:function(m){if(m.isStatic)return;g.perform(this.handleUpdateAllProps.bind(this,m));},genMarkupIntoContainer:function(m,n){g.perform(function(){var o=Date.now(),p=this.handleGenMarkup(m);j.totalInstantiationTime+=(Date.now()-o);var q=Date.now(),r=n.nextSibling,s=n.parentNode;if(s){s.removeChild(n);n.innerHTML=p;if(r){s.insertBefore(n,r);}else s.appendChild(n);}else n.innerHTML=p;j.totalInjectionTime+=(Date.now()-q);},this);},handleUpdateAllPropsComponent:function(m){var n=this.props,o=this.rootDomId;h.throwIf(o,h.CONTROL_WITHOUT_BACKING_DOM);if(m.owner===n.owner&&m.ref===n.ref)return;this.detachOwnersRefs();if(m.ref)m.owner.attachRef(m.ref,this);}}};e.exports=l;});
__d("ReactDOMAttributes",["ReactBrowserUtils","ReactEnv","ReactEvent","objMap"],function(a,b,c,d,e,f){var g=b('ReactBrowserUtils'),h=b('ReactEnv'),i=b('ReactEvent'),j=b('objMap'),k=function(s){return s;},l=g.getContentAccessorKey(),m=g.getSupportedStyleMap(),n=function(s){return s.replace(/[A-Z]/g,function(t){return '-'+t.toLowerCase();});},o=function(s,t,u){return j(u,function(v,w){return s+w(v)+t;});},p=j(m,function(){return n;}),q={className:function(){return 'class';},margin:n,marginRight:n,marginLeft:n,tabIndex:k,marginTop:n,marginBottom:n,padding:n,paddingRight:n,paddingLeft:n,paddingTop:n,paddingBottom:n,dir:k,width:k,height:k,alt:k,src:k,value:k,checked:k,href:k,placeholder:k,title:k,selected:k,target:k,scrollTop:k,scrollLeft:k,name:k,type:k,htmlFor:k,rel:k,ajaxify:k,allowfullscreen:k,allowscriptaccess:k,wmode:k},r={CONTENT_ACCESSOR_KEY:l,customAttrRegexp:/^(data|aria)-[a-z_][a-z\d_.\-]*$/,styleFeatureNames:o(';',':',p),allTagAttrPieces:o('','=\'',q),cssNumber:{textDecoration:true,zoom:true,fillOpacity:true,fontWeight:true,opacity:true,orphans:true,zIndex:true,outline:true},controlSimply:{className:true,scrollTop:true,scrollLeft:true,title:true,rows:true,cols:true,size:true},controlDirectlyNonIdempotent:{value:true,src:true,checked:true,selected:true,rel:true},controlUsingSetAttr:{ajaxify:true,margin:true,marginRight:true,marginLeft:true,marginTop:true,marginBottom:true,padding:true,paddingRight:true,paddingLeft:true,paddingTop:true,paddingBottom:true,width:true,height:true,href:true,placeholder:true,target:true}};e.exports=r;});
__d("ReactDOMUtils",["ReactBrowserUtils","ReactDOMAttributes"],function(a,b,c,d,e,f){var g=b('ReactBrowserUtils'),h=b('ReactDOMAttributes'),i=h.cssNumber,j=g.escapeTextForBrowser,k=h.styleFeatureNames;function l(s,t,u){if(u){if(u.nextSibling){return s.insertBefore(t,u.nextSibling);}else return s.appendChild(t);}else return s.insertBefore(t,s.firstChild);}function m(s,t,u){var v,w,x=t.length;for(w=0;w<x;w++)v=l(s,t[0],v||u);return v;}function n(s,t,u){if(!t)return 0;var v=document.createElement(s?s.tagName:'div');v.innerHTML=t;var w=v.childNodes,x=w.length,y=u?s.childNodes[u-1]:null;m(s,w,y);return x;}function o(s,t,u){var v=s.childNodes;if(t.parentNode)t.parentNode.removeChild(t);if(u>=v.length){s.appendChild(t);}else s.insertBefore(t,v[u]);return t;}function p(s,t){if(!isNaN(t))return i[s]?t:(j(t)+'px');return (t!==0&&!t)?'':t;}function q(s){var t='',u;for(u in s){if(!s.hasOwnProperty(u))continue;var v=s[u];if(v!==undefined)t+=k[u]+p(u,v);}return t;}var r={insertNodeAfterNode:l,insertNodeAt:o,insertMarkupAt:n,serializeInlineStyle:q};e.exports=r;});
__d("fallbackSerializePosInfo",[],function(a,b,c,d,e,f){var g=function(h){if(!h)return '';var i=';',j=h.w,k=h.h,l=h.l,m=h.t,n=h.b,o=h.r,p=h.z;if(j===0||j)i+='width:'+(j.charAt?(j+';'):(j+'px;'));if(k===0||k)i+='height:'+(k.charAt?(k+';'):(k+'px;'));if(l===0||l)i+='left:'+(l.charAt?(l+';'):(l+'px;'));if(m===0||m)i+='top:'+(m.charAt?(m+';'):(m+'px;'));if(n===0||n)i+='bottom:'+(n.charAt?(n+';'):(n+'px;'));if(o===0||o)i+='right:'+(o.charAt?(o+';'):(o+'px;'));if(p===0||p)i+='z-index:'+p+';';i+='position:absolute';return i;};e.exports=g;});
__d("keyOf",[],function(a,b,c,d,e,f){var g=function(h){var i;for(i in h){if(!h.hasOwnProperty(i))continue;return i;}return null;};e.exports=g;});
__d("ReactDOMGeneration",["ReactBrowserUtils","ReactDOMAttributes","ReactDOMUtils","ReactEvent","ReactEventConstants","fallbackSerializePosInfo","keyOf","renderer-renderClassSet"],function(a,b,c,d,e,f){var g=b('ReactBrowserUtils'),h=b('ReactDOMAttributes'),i=b('ReactDOMUtils'),j=b('ReactEvent'),k=b('ReactEventConstants'),l=b('fallbackSerializePosInfo'),m=b('keyOf'),n=k.abstractHandlers,o=h.allTagAttrPieces,p=h.customAttrRegexp,q=g.escapeTextForBrowser,r=l,s=j.registerHandlerByName,t=b('renderer-renderClassSet'),u=i.serializeInlineStyle,v=m({classSet:null}),w=m({style:null}),x=m({posInfo:null}),y={handleGenMarkupDOMGeneration:function(){var aa,ba=this.props,ca='',da='';for(aa in ba){if(!ba.hasOwnProperty(aa))continue;var ea=ba[aa];if(ea===null||typeof ea==='undefined')continue;if(aa===v){ca+='class="'+t(ea)+'"';}else if(o[aa]){ca+=o[aa]+q(ea)+"'";}else if(aa===w){da+=q(u(ea));}else if(aa===x){da+=q(r(ea));}else if(n[aa]){s(this._rootDomId,aa,ea);}else if(p.test(aa))ca+=aa+"='"+q(ea)+"'";}if(da)ca+=' style="'+da+'"';ca+=' id="'+this._rootDomId+'">';if(ba.content){ca+=q(ba.content);}else if(ba.dangerouslySetInnerHtml)ca+=ba.dangerouslySetInnerHtml.__html;return ca;}},z={ReactNativeComponentGenerationMixin:y,setAcceleratedPositioner:function(aa){r=aa;}};e.exports=z;});
__d("ReactDOMMutation",["ReactDOMAttributes","ReactDOMUtils","ReactEvent","ReactEventConstants","fallbackSerializePosInfo","keyOf","renderer-renderClassSet"],function(a,b,c,d,e,f){var g=b('ReactDOMAttributes'),h=b('ReactDOMUtils'),i=b('ReactEvent'),j=b('ReactEventConstants'),k=b('fallbackSerializePosInfo'),l=b('keyOf'),m=j.abstractHandlers,n=g.controlDirectlyNonIdempotent,o=g.controlSimply,p=g.controlUsingSetAttr,q=g.customAttrRegexp,r=i.registerHandlerByName,s=b('renderer-renderClassSet'),t=h.serializeInlineStyle,u=k,v=l({classSet:null}),w=g.CONTENT_ACCESSOR_KEY,x=l({content:null}),y=l({dangerouslySetInnerHtml:null}),z=l({posInfo:null}),aa=l({style:null}),ba=function(ea){u=ea;},ca={handleUpdateAllPropsDOMMutation:function(ea){var fa=this.props,ga='',ha='',ia='',ja;for(ja in ea){if(!ea.hasOwnProperty(ja))continue;var ka=ea[ja];if(ja===v){if(JSON.stringify(fa.classSet)!==JSON.stringify(ea.classSet))this.getDOMNode().className=s(ka);}else if(ja===aa){if(JSON.stringify(ka)!==JSON.stringify(fa.style))ha=t(ka);}else if(ja===z){var la=ka,ma=fa.posInfo||{};if(la&&(la.l!==ma.l||la.t!==ma.t||la.w!==ma.w||la.h!==ma.h||la.r!==ma.r||la.b!==ma.b))ia=u(ka);}else if(ka!==fa[ja])if(p[ja]){this.getDOMNode().setAttribute(ja,ka);}else if(ja===x){this.getDOMNode()[w]=ka;}else if(o[ja]){this.getDOMNode()[ja]=ka;}else if(n[ja]){var na=this.getDOMNode();if(na[ja]!==ka)na[ja]=ka;}else if(m[ja]){r(this._rootDomId,ja,ka);}else if(ja===y){var oa=fa[ja],pa=ka,qa=oa&&oa.__html,ra=pa&&pa.__html;if(qa!==ra)this.getDOMNode().innerHTML=(ra||'').replace(/^ /g,'&nbsp;');}else if(q.test(ja))this.getDOMNode().setAttribute(ja,ka);}if(ha&&!ia)ia=u(ea.posInfo);if(ia&&!ha)ha=t(ea.style);if(ha||ia){ga+=ha;ga+=ia;this.getDOMNode().style.cssText=ga;}}},da={setAcceleratedPositioner:ba,ReactNativeComponentMutationMixin:ca};e.exports=da;});
__d("ReactMultiChild",["ReactComponent","ReactDOMUtils"],function(a,b,c,d,e,f){var g=b('ReactComponent'),h=b('ReactDOMUtils'),i=h.insertNodeAt;function j(n,o){return n&&o&&n.constructor===o.constructor;}function k(n,o){return n&&!o||(n&&o&&n.constructor!==o.constructor);}var l={destroyMultiChild:function(){var n=this.renderedChildren,o;for(o in n){if(!n.hasOwnProperty(o))continue;if(n[o])n[o].destroy();}this.renderedChildren=null;},handleGenMarkupMultiChild:function(n){var o,p='',q=0;for(o in n){var r=n[o];if(r){r.domIndex=q;p+=n[o].handleGenMarkup(this._rootDomId+'.'+o);q++;}}this.renderedChildren=n;return p;},insertMarkupAt:function(n,o){return !n?0:h.insertMarkupAt(this.getDOMNode(),n,o);},enqueueMove:function(n,o,p){if(o===p)return n;if(!n)n={};var q=this.getDOMNode();n[p]=q.childNodes[o];return n;},handleUpdateAllPropsMultiChild:function(n){if(!n&&!this.renderedChildren){return;}else if(n&&!this.renderedChildren){this.renderedChildren={};}else if(!n&&this.renderedChildren)n={};var o,p=this._rootDomId+'.',q='',r=0,s=0,t=0,u;for(o in n){if(!n.hasOwnProperty(o))continue;var v=this.renderedChildren[o],w=n[o];if(j(v,w)){t+=this.insertMarkupAt(q,s);q='';var x=w.props.isStatic;if(!x)v.handleUpdateAllProps(w.props);var y=v.domIndex+t;u=this.enqueueMove(u,y,r);v.domIndex=r;r++;s=r;}else{if(v){this.removeChildByName(o,v);t--;}if(w){this.renderedChildren[o]=w;q+=w.handleGenMarkup(p+o);w.domIndex=r;r++;}}}t+=this.insertMarkupAt(q,s);for(o in this.renderedChildren){if(!this.renderedChildren.hasOwnProperty(o))continue;var z=this.renderedChildren[o];if(k(z,n[o]))this.removeChildByName(o,z);}if(u){var aa,ba=this.getDOMNode();for(aa in u){if(!u.hasOwnProperty(aa))continue;i(ba,u[aa],aa);}}},removeChildByName:function(n,o){if(g.isValidComponent(o))o.destroyAndDetachFromDom();delete this.renderedChildren[n];}},m={ReactMultiChildMixin:l};e.exports=m;});
__d("mixInto",[],function(a,b,c,d,e,f){var g=function(h,i){var j;for(j in i){if(!i.hasOwnProperty(j))continue;h.prototype[j]=i[j];}};e.exports=g;});
__d("ReactTextComponent",["ReactBrowserUtils","ReactDOMAttributes","ReactComponent","mixInto"],function(a,b,c,d,e,f){var g=b('ReactBrowserUtils'),h=b('ReactDOMAttributes'),i=b('ReactComponent'),j=g.escapeTextForBrowser,k=b('mixInto'),l=h.CONTENT_ACCESSOR_KEY,m=function(n){this.props=n;};k(m,i.ReactComponentMixin);m.prototype.handleUpdateAllProps=function(n){if(n!==this.props){this.getDOMNode()[l]=n;this.props=n;}};m.prototype.destroy=function(){};m.prototype.handleGenMarkup=function(n){this._rootDomId=n;return ('<span id="'+n+'">'+j(this.props)+'</span>');};e.exports=m;});
__d("flattenChildren",["ReactTextComponent"],function(a,b,c,d,e,f){var g=b('ReactTextComponent'),h=function(j,k,l){var m,n;if(Array.isArray(k)){for(m=0;m<k.length;m++)h(j,k[m],l+'['+m+']');}else if(!k&&k!==0){j[l]=null;}else if(k.genMarkupIntoContainer){j[l]=k;}else{var o=typeof k;if(o==='string'||o==='number'){j[l]=new g(k);}else if(o==='object')for(n in k)if(k.hasOwnProperty(n))h(j,k[n],l+'{'+n+'}');}};function i(j){if(j===null||j===undefined)return j;var k={};h(k,j,'');return k;}e.exports=i;});
__d("ReactDOM",["ReactComponent","ReactDOMGeneration","ReactDOMMutation","ReactErrors","ReactEvent","ReactMultiChild","flattenChildren","mixInto","objMap"],function(a,b,c,d,e,f){var g=b('ReactComponent'),h=b('ReactDOMGeneration'),i=b('ReactDOMMutation'),j=b('ReactErrors'),k=b('ReactEvent'),l=b('ReactMultiChild'),m=h.ReactNativeComponentGenerationMixin,n=i.ReactNativeComponentMutationMixin,o=b('flattenChildren'),p=b('mixInto'),q=b('objMap');function r(t,u){var v='<'+t+' ',w=u?'':'</'+t+'>',x=function(aa){this.props=aa;this.captureOwnerAtConstruction();},y={handleUpdateAllProps:function(aa){j.throwIf(!this._rootDomId,j.CONTROL_WITHOUT_BACKING_DOM);this.handleUpdateAllPropsComponent(aa);this.handleUpdateAllPropsDOMMutation(aa);this.handleUpdateAllPropsMultiChild(o(aa.children));this.props=aa;},handleGenMarkup:function(aa){this.initializeComponent(aa);var ba=v+this.handleGenMarkupDOMGeneration()+this.handleGenMarkupMultiChild(o(this.props.children))+w;return ba;},destroy:function(){this.destroyComponent();this.destroyMultiChild();k.clearAllHandlers(this._rootDomId);}};p(x,g.ReactComponentMixin);p(x,y);p(x,m);p(x,n);p(x,l.ReactMultiChildMixin);x.prototype.tagName=t.toUpperCase();var z=function(aa){return new x(aa);};return z;}var s=q({a:false,abbr:false,address:false,audio:false,b:false,br:true,button:false,code:false,col:true,colgroup:false,dd:false,div:false,dl:false,dt:false,em:false,embed:true,fieldset:false,form:false,h1:false,h2:false,h3:false,h4:false,h5:false,h6:false,hr:true,i:false,iframe:false,img:true,input:false,label:false,legend:false,li:false,object:false,ol:false,optgroup:false,option:false,p:false,param:true,pre:false,select:false,small:false,span:false,strong:false,table:false,tbody:false,td:false,textarea:false,tfoot:false,th:false,thead:false,time:false,title:false,tr:false,ul:false,video:false,wbr:false},r);e.exports=s;});
__d("ReactOwner",[],function(a,b,c,d,e,f){var g={attachRef:function(h,i){var j=this.refs||(this.refs={});j[h]=i;},detachRef:function(h){delete this.refs[h];}};e.exports=g;});
__d("mergeDeep",["mergeHelpers"],function(a,b,c,d,e,f){var g=b('mergeHelpers'),h=g.checkMergeArgs,i=g.checkMergeLevel,j=g.isTerminal,k=g.normalizeMergeArg,l=function(n,o,p){h(n,o);i(p);var q,r,s,t,u={},v=p+1;for(q in n){if(!n.hasOwnProperty(q))continue;if(!o.hasOwnProperty(q)){s=n[q];u[q]=j(s)?s:l(s,s,v);}}for(r in o){if(!o.hasOwnProperty(r))continue;t=o[r];s=n[r];u[r]=j(t)?t:j(s)?l(t,t,v):l(s,t,v);}return u;},m=function(n,o){var p=k(n),q=k(o);h(p,q);return l(p,q,0);};e.exports=m;});
__d("mergeInto",["mergeHelpers"],function(a,b,c,d,e,f){var g=b('mergeHelpers'),h=g.checkMergeArgs,i=g.normalizeMergeArg,j=function(k,l){var m=i(l),n;h(k,m);for(n in m){if(!m.hasOwnProperty(n))continue;k[n]=m[n];}};e.exports=j;});
__d("ReactCompositeComponent",["ReactComponent","ReactDOMTransaction","ReactDOMUtils","ReactErrors","ReactOnDOMReady","ReactOwner","keyOf","mergeDeep","mergeInto","mergeHelpers","mixInto"],function(a,b,c,d,e,f){var g=b('ReactComponent'),h=b('ReactDOMTransaction'),i=b('ReactDOMUtils'),j=b('ReactErrors'),k=b('ReactOnDOMReady'),l=b('ReactOwner'),m=b('keyOf'),n=b('mergeDeep'),o=b('mergeInto'),p=b('mergeHelpers'),q=b('mixInto'),r=i.insertMarkupAt,s=p.isTerminal,t=Array.prototype.slice,u={render:function(){},handleUpdateAllProps:function(w){this.handleUpdateAllPropsComponent(w);if(this.propTrigger){var x=this.propTrigger(w);if(x)this.justUpdateState(x);}if(this.needsRedraw&&!this.needsRedraw(w))return;this.props=w;this.reconcileStructure();},initializeCompositeComponent:function(w){if(this.getInitialState)this.state=this.getInitialState();this.onDomReady&&k.enqueue(this);},handleGenMarkup:function(w){this.initializeComponent(w);this.initializeCompositeComponent(w);g.currentlyConstructingOwner=this;var x=this.render();g.currentlyConstructingOwner=null;g.validateReactComponentInstance(x);this.renderedChild=x;return x.handleGenMarkup(w);},destroy:function(){if(this.destructor)this.destructor();this.detachOwnersRefs();this.renderedChild.destroy();this.renderedChild=null;if(this.refs)this.refs=null;},justUpdateState:function(w){o(this.state,w);},justUpdateStateDeep:function(w){this.state=n(this.state,w);},updateState:function(w){h.perform(function(){this.justUpdateState(w);this.reconcileStructure();},this);return true;},updateStateDeep:function(w){h.perform(function(){this.justUpdateStateDeep(w);this.reconcileStructure();},this);return true;},createStateUpdater:function(w){var x=this;if(!w)return w;return function(){x.updateState(w);};},stateUpdater:function(w){var x=this;if(!w)return w;return (typeof w==='function')?function(){x.updateState(w.apply(x,arguments));}:function(){x.updateState(w);};},stateValueForwarder:function(w){var x=this;return function(y){var z=m(w),aa={};if(z){aa[z]=y;x.updateState(aa);}};},stateUpdaterCurry:function(w){var x=this,y=t.call(arguments,1);return function(){x.updateState(w.apply(x,y.concat(t.call(arguments))));};},reconcileStructure:function(){g.currentlyConstructingOwner=this;var w=this.render();g.currentlyConstructingOwner=null;g.validateReactComponentInstance(w);if(!w.props.isStatic){var x=this.renderedChild;if(x.constructor===w.constructor){x.handleUpdateAllProps(w.props);}else{var y=w.handleGenMarkup(this._rootDomId),z=x.getDOMNode(),aa=z.parentNode;x.destroyAndDetachFromDom();r(aa,y,0);this.renderedChild=w;}}}},v={createComponentConstructor:function(w){var x=function(y){this.props=y||{};this.captureOwnerAtConstruction();};q(x,g.ReactComponentMixin);q(x,u);q(x,l);q(x,w);j.throwIf(!x.prototype.render,j.CLASS_SPEC);return x;},createComponent:function(w){var x=v.createComponentConstructor(w),y=function(z){var aa=z||this;return new x(aa);};y.componentConstructor=x;y.originalSpec=w;return y;}};e.exports=v;});
__d("React",["ReactCompositeComponent","ReactMount"],function(a,b,c,d,e,f){var g=b('ReactCompositeComponent'),h=b('ReactMount'),i={initializeTouchEvents:function(j){h.useTouchEvents=j;},createComponent:g.createComponent,renderComponent:h.renderComponent,renderOrUpdateComponent:h.renderOrUpdateComponent,destroyAndReleaseReactRootNode:h.destroyAndReleaseReactRootNode};e.exports=i;});
__d("NumberFormat",["Env"],function(a,b,c,d,e,f){var g=b('Env'),h=/(\d{3})(?=\d)/g,i=10000,j=function(l){return (''+l).split('').reverse().join('');},k={formatIntegerWithDelimiter:function(l,m){if((g.locale=='nb_NO'||g.locale=='nn_NO')&&(Math.abs(l)<i))return l.toString();var n=j(l);return j(n.replace(h,'$1'+m));}};e.exports=k;});
__d("UFIConstants",[],function(a,b,c,d,e,f){var g={COMMENT_LIKE:'fa-type:comment-like',COMMENT_SET_SPAM:'fa-type:mark-spam',DELETE_COMMENT:'fa-type:delete-comment',LIKE_ACTION:'fa-type:like',REMOVE_PREVIEW:'fa-type:remove-preview',CONFIRM_COMMENT_REMOVAL:'fa-type:confirm-remove',TRANSLATE_COMMENT:'fa-type:translate-comment',UNDO_DELETE_COMMENT:'fa-type:undo-delete-comment'},h={DELETED:'status:deleted',SPAM:'status:spam',SPAM_DISPLAY:'status:spam-display',FAILED_ADD:'status:failed-add',FAILED_EDIT:'status:failed-edit',PENDING_EDIT:'status:pending-edit',PENDING_UNDO_DELETE:'status:pending-undo-delete'},i={MOBILE:1,SMS:3,EMAIL:4},j={PROFILE:0,NEWS_FEED:1,OBJECT:2,MOBILE:3,EMAIL:4,PROFILE_APROVAL:10,TICKER:12,NONE:13,INTERN:14,ADS:15},k={UNKNOWN:0,INITIAL_SERVER:1,LIVE_SEND:2,USER_ACTION:3,ENDPOINT_LIKE:10,ENDPOINT_COMMENT_LIKE:11,ENDPOINT_ADD_COMMENT:12,ENDPOINT_EDIT_COMMENT:13,ENDPOINT_DELETE_COMMENT:14,ENDPOINT_UNDO_DELETE_COMMENT:15,ENDPOINT_COMMENT_SPAM:16,ENDPOINT_REMOVE_PREVIEW:17,ENDPOINT_ID_COMMENT_FETCH:18,ENDPOINT_COMMENT_FETCH:19,ENDPOINT_TRANSLATE_COMMENT:20,ENDPOINT_BAN:21},l=50,m=.6,n=300,o=5,p=80;e.exports={UFIActionType:g,UFIStatus:h,UFISourceType:i,UFIFeedbackSourceType:j,UFIPayloadSourceType:k,defaultPageSize:l,commentTruncationLength:n,commentTruncationPercent:m,commentTruncationMaxLines:o,attachmentTruncationLength:p};});
__d("UFIBlingBox",["ReactDOM","NumberFormat","React","UFIConstants","copyProperties"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('NumberFormat'),i=b('React'),j=b('UFIConstants'),k=b('copyProperties'),l=i.createComponent({render:function(){var n=[];if(this.props.likes)n.push(m({count:this.props.likes,classSet:{mls:n.length>0},iconClassName:"UFIBlingBoxLikeIcon",contextArgs:this.props.contextArgs}));if(this.props.comments)n.push(m({count:this.props.comments,classSet:{mls:n.length>0},iconClassName:"UFIBlingBoxCommentIcon",contextArgs:this.props.contextArgs}));if(this.props.reshares)n.push(m({count:this.props.reshares,classSet:{mls:n.length>0},iconClassName:"UFIBlingBoxReshareIcon",contextArgs:this.props.contextArgs}));var o=g.a({classSet:{UFIBlingBox:true,uiBlingBox:true,feedbackBling:true},href:this.props.permalink,'data-ft':this.props['data-ft'],children:n});if(this.props.comments<j.defaultPageSize){o.props.onClick=this.props.onClick;o.props.rel='ignore';}return o;}}),m=i.createComponent({render:function(){var n={UFIBlingBoxSprite:true};n[this.props.iconClassName]=true;k(n,this.props.classSet);var o=h.formatIntegerWithDelimiter(this.props.count,this.props.contextArgs.numberdelimiter||',');return (g.span({children:[g.i({classSet:n}),g.span({classSet:{UFIBlingBoxText:true},children:o})]}));}});e.exports=l;});
__d("UFICentralUpdates",["Arbiter","ChannelConstants","LiveTimer","ShortProfiles","UFIConstants","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ChannelConstants'),i=b('LiveTimer'),j=b('ShortProfiles'),k=b('UFIConstants'),l=b('copyProperties'),m=b('tx'),n=0,o={},p={},q={},r={},s=[];g.subscribe(h.getArbiterType('live-data'),function(x,y){if(y&&y.obj){var z=y.obj,aa=z.comments||[];aa.forEach(function(ba){ba.timestamp.text="a few seconds ago";});w.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,z);}});function t(){if(!n){var x=q,y=o,z=p,aa=r;q={};o={};p={};r={};if(Object.keys(x).length)v('feedback-id-changed',x);if(Object.keys(y).length)v('feedback-updated',y);if(Object.keys(z).length)v('comments-updated',z);if(Object.keys(aa).length)v('instance-updated',aa);s.pop();}}function u(){if(s.length){return s[s.length-1];}else return k.UFIPayloadSourceType.UNKNOWN;}function v(event,x){w.inform(event,{updates:x,payloadSource:u()});}var w=l(new g(),{handleUpdate:function(x,y){if(Object.keys(y).length)this.synchronizeInforms(function(){s.push(x);var z=l({payloadsource:u()},y);this.inform('update-feedback',z);this.inform('update-comment-lists',z);this.inform('update-comments',z);this.inform('update-actions',z);(y.profiles||[]).forEach(function(aa){j.set(aa.id,aa);});if(y.servertime)i.restart(y.servertime);}.bind(this));},didUpdateFeedback:function(x){o[x]=true;t();},didUpdateComment:function(x){p[x]=true;t();},didUpdateFeedbackID:function(x,y){q[x]=y;t();},didUpdateInstanceState:function(x,y){if(!r[x])r[x]={};r[x][y]=true;t();},synchronizeInforms:function(x){n++;try{x();}catch(y){throw y;}finally{n--;t();}}});e.exports=w;});
__d("UFIClientIDs",["randomInt"],function(a,b,c,d,e,f){var g=b('randomInt'),h={},i={getNewClientID:function(){var j=Date.now(),k=j+':'+(g(0,4294967295)+1);h[k]=true;return k;},isExistingClientID:function(j){return !!h[j];}};e.exports=i;});
__d("UFIFeedbackTargets",["copyProperties","KeyedCallbackManager","UFICentralUpdates","UFIClientIDs","UFIConstants"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('KeyedCallbackManager'),i=b('UFICentralUpdates'),j=b('UFIClientIDs'),k=b('UFIConstants'),l=new h();function m(s){var t={};s.forEach(function(u){var v=g({},u);delete v.commentlist;delete v.commentcount;t[u.entidentifier]=v;i.didUpdateFeedback(u.entidentifier);});l.addResourcesAndExecute(t);}function n(s){for(var t=0;t<s.length;t++){var u=s[t];switch(u.actiontype){case k.UFIActionType.LIKE_ACTION:p(u);break;}}}function o(s){for(var t=0;t<s.length;t++){var u=s[t];if(u.orig_ftentidentifier)q(u.orig_ftentidentifier,u.ftentidentifier);}}function p(s){if(s.orig_entidentifier)q(s.orig_entidentifier,s.entidentifier);var t=l.getResource(s.entidentifier);if(t){s.hasviewerliked=!!s.hasviewerliked;if(s.clientid&&j.isExistingClientID(s.clientid)&&s.hasviewerliked!=t.hasviewerliked)return;t.likecount=s.likecount;t.likesentences=s.likesentences;if(s.actorid==t.actorforpost){t.hasviewerliked=s.hasviewerliked;}else if(s.hasviewerliked!=t.hasviewerliked){t.likesentences={current:s.likesentences.alternate,alternate:s.likesentences.current};if(t.hasviewerliked){t.likecount++;}else t.likecount--;}if(s.actorid!=t.actorforpost)t.likesentences.isunseen=true;m([t]);}}function q(s,t){var u=l.getResource(s);if(u){l.setResource(s,null);u.entidentifier=t;l.setResource(t,u);i.didUpdateFeedbackID(s,t);}}var r={getFeedbackTarget:function(s,t){var u=l.executeOrEnqueue(s,t),v=l.getUnavailableResources(u);if(!v.length)return;}};i.subscribe('update-feedback',function(s,t){var u=t.feedbacktargets;if(u&&u.length)m(u);});i.subscribe('update-actions',function(s,t){if(t.actions&&t.actions.length)n(t.actions);});i.subscribe('update-comments',function(s,t){if(t.comments&&t.comments.length)o(t.comments);});e.exports=r;});
__d("UFIInstanceState",["UFICentralUpdates"],function(a,b,c,d,e,f){var g=b('UFICentralUpdates'),h={};function i(k){if(!h[k])h[k]={};}var j={getKeyForInstance:function(k,l){i(k);return h[k][l];},updateState:function(k,l,m){i(k);h[k][l]=m;g.didUpdateInstanceState(k,l);},updateStateField:function(k,l,m,n){var o=this.getKeyForInstance(k,l)||{};o[m]=n;this.updateState(k,l,o);}};e.exports=j;});
__d("UFIComments",["KeyedCallbackManager","MercuryServerDispatcher","UFICentralUpdates","UFIClientIDs","UFIConstants","UFIFeedbackTargets","UFIInstanceState","URI","randomInt"],function(a,b,c,d,e,f){var g=b('KeyedCallbackManager'),h=b('MercuryServerDispatcher'),i=b('UFICentralUpdates'),j=b('UFIClientIDs'),k=b('UFIConstants'),l=b('UFIFeedbackTargets'),m=b('UFIInstanceState'),n=b('URI'),o=b('randomInt'),p={},q={},r={},s={},t={},u='unavailable_comment_key';function v(ma){var na=ma;if(ma in t)na=t[ma];return p[na];}function w(ma){if(!q[ma])q[ma]=new g();return q[ma];}function x(ma,na){ma.forEach(function(oa){var pa=oa.ftentidentifier,qa=k.UFIPayloadSourceType;if((na==qa.LIVE_SEND)||(na==qa.USER_ACTION)||(na==qa.ENDPOINT_ADD_COMMENT)||(na==qa.ENDPOINT_EDIT_COMMENT))oa.isunseen=true;if(na==qa.ENDPOINT_COMMENT_FETCH)oa.fromfetch=true;l.getFeedbackTarget(pa,function(ra){var sa=oa.clientid,ta=false;if(sa){delete oa.clientid;ta=j.isExistingClientID(sa);if(ta&&t[sa])return;}var ua=w(pa),va=ua.getAllResources(),wa={};for(var xa in va){var ya=va[xa];wa[ya]=xa;}if(ta){if(p[sa].ufiinstanceid)m.updateStateField(p[sa].ufiinstanceid,'locallycomposed',oa.id,true);t[sa]=oa.id;p[oa.id]=p[sa];delete p[sa];i.didUpdateComment(sa);if(sa in wa){wa[oa.id]=wa[sa];var za=wa[sa];ua.setResource(za,oa.id);}}if(!wa[oa.id]){var ab=r[pa];wa[oa.id]=ab;r[pa]++;ua.setResource(ab,oa.id);}var bb=wa[oa.id],cb=r[pa],db=Math.floor((cb-bb-1)/k.defaultPageSize)*k.defaultPageSize;oa.permalink=n(ra.permalink).addQueryData({comment_id:oa.legacyid,offset:db,total_comments:cb}).toString();p[oa.id]=oa;i.didUpdateComment(oa.id);i.didUpdateFeedback(pa);});});}function y(ma){for(var na=0;na<ma.length;na++){var oa=ma[na];switch(oa.actiontype){case k.UFIActionType.COMMENT_LIKE:ba(oa);break;case k.UFIActionType.DELETE_COMMENT:ea(oa);break;case k.UFIActionType.UNDO_DELETE_COMMENT:fa(oa);break;case k.UFIActionType.REMOVE_PREVIEW:ga(oa);break;case k.UFIActionType.COMMENT_SET_SPAM:ha(oa);break;case k.UFIActionType.CONFIRM_COMMENT_REMOVAL:ia(oa);break;case k.UFIActionType.TRANSLATE_COMMENT:ca(oa);break;}}}function z(ma){for(var na in ma){var oa=ma[na],pa=oa.range,qa=oa.values,ra={};for(var sa=0;sa<pa.length;sa++)ra[pa.offset+sa]=qa[sa]||u;w(na).addResourcesAndExecute(ra);i.didUpdateFeedback(na);}}function aa(ma){ma.forEach(function(na){r[na.entidentifier]=na.commentcount;s[na.entidentifier]=0;i.didUpdateFeedback(na.entidentifier);});}function ba(ma){var na=la.getComment(ma.commentid);if(na){var oa=ma.clientid&&j.isExistingClientID(ma.clientid);if(!oa){na.hasviewerliked=ma.viewerliked;na.likecount=ma.likecount;}na.likeconfirmhash=o(0,1024);ka(na);}}function ca(ma){var na=la.getComment(ma.commentid);if(na){na.translatedtext=ma.translatedtext;ka(na);}}function da(ma,na){ma.reportLink=na.reportLink;ma.commenterIsFOF=na.commenterIsFOF;ma.userIsMinor=na.userIsMinor;if(na.undoData)ma.undoData=na.undoData;}function ea(ma){var na=la.getComment(ma.commentid);if(na.status!==k.UFIStatus.DELETED)s[na.ftentidentifier]++;ja(na,k.UFIStatus.DELETED);}function fa(ma){var na=la.getComment(ma.commentid);if(na.status===k.UFIStatus.DELETED)s[na.ftentidentifier]--;ja(na,k.UFIStatus.PENDING_UNDO_DELETE);}function ga(ma){var na=la.getComment(ma.commentid);na.attachment=null;ka(na);}function ha(ma){var na=la.getComment(ma.commentid),oa=ma.shouldHideAsSpam?k.UFIStatus.SPAM_DISPLAY:null;ja(na,oa);}function ia(ma){var na=la.getComment(ma.commentid);da(na,ma);ka(na);}function ja(ma,na){ma.priorstatus=ma.status;ma.status=na;ka(ma);}function ka(ma){p[ma.id]=ma;i.didUpdateComment(ma.id);i.didUpdateFeedback(ma.ftentidentifier);}var la={getComments:function(ma){var na={};for(var oa=0;oa<ma.length;oa++)na[ma[oa]]=v(ma[oa]);return na;},getComment:function(ma){return v(ma);},getCommentsInRange:function(ma,na,oa){var pa=w(ma),qa=null;l.getFeedbackTarget(ma,function(ra){var sa=[];for(var ta=0;ta<na.length;ta++)sa.push(na.offset+ta);qa=pa.executeOrEnqueue(sa,function(za){var ab=[],bb=na.offset,cb=na.offset+na.length-1;for(var db=0;db<na.length;db++){var eb=ra.isranked?cb-db:bb+db;if(za[eb]!=u){var fb=this.getComment(za[eb]);if(fb)ab.push(fb);}}oa(ab);}.bind(this));var ua=pa.getUnavailableResources(qa);if(ua.length){pa.unsubscribe(qa);var va=Math.min.apply(Math,ua),wa=Math.max.apply(Math,ua),xa=va,ya=wa-va+1;h.trySend('/ajax/ufi/comment_fetch.php',{ft_ent_identifier:ra.entidentifier,source:null,offset:xa,length:ya});}}.bind(this));return qa;},getCommentCount:function(ma){return r[ma]||0;},getDeletedCount:function(ma){return s[ma];},getDisplayedCommentCount:function(ma){return (r[ma]||0)-(s[ma]||0);}};h.registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:h.IMMEDIATE,handler:i.handleUpdate.bind(i,k.UFIPayloadSourceType.ENDPOINT_COMMENT_FETCH)}});i.subscribe('update-comments',function(ma,na){if(na.comments&&na.comments.length)x(na.comments,na.payloadsource);});i.subscribe('update-actions',function(ma,na){if(na.actions&&na.actions.length)y(na.actions);});i.subscribe('update-comment-lists',function(ma,na){var oa=na.commentlists;if(oa&&Object.keys(oa).length)z(oa);});i.subscribe('update-feedback',function(ma,na){var oa=na.feedbacktargets;if(oa&&oa.length)aa(oa);});e.exports=la;});
__d("UFITrackingNodes",[],function(a,b,c,d,e,f){var g={types:{USER_NAME:2,LIKE_LINK:5,UNLIKE_LINK:6,USER_MESSAGE:18,SOURCE:21,BLINGBOX:22,VIEW_ALL_COMMENTS:24,COMMENT:25,SMALL_ACTOR_PHOTO:27,ADD_COMMENT_BOX:34,UFI:36},encodeTrackingInfo:function(h,i){var j=String.fromCharCode(h+57);if(i)j+=String.fromCharCode(48+Math.min(i,10)-1);return j;},getTrackingInfo:function(h,i){return '{"tn":"'+g.encodeTrackingInfo(h,i)+'"}';}};e.exports=g;});
__d("UFILikeLink",["ReactDOM","React","UFITrackingNodes","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('React'),i=b('UFITrackingNodes'),j=b('tx'),k=h.createComponent({render:function(){var l=this.props.likeAction?"Like":"Unlike",m=i.getTrackingInfo(this.props.likeAction?i.types.LIKE_LINK:i.types.UNLIKE_LINK),n=this.props.likeAction?"Like this item":"Stop liking this item";return (g.a({className:"UFILikeLink",href:"#",title:n,onClick:this.props.onClick,'data-ft':m,children:l}));}});e.exports=k;});
__d("UFIUserActions",["AsyncResponse","JSLogger","UFICentralUpdates","UFIClientIDs","UFIComments","UFIConstants","UFIFeedbackTargets","MercuryServerDispatcher","collectDataAttributes","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('AsyncResponse'),h=b('JSLogger'),i=b('UFICentralUpdates'),j=b('UFIClientIDs'),k=b('UFIComments'),l=b('UFIConstants'),m=b('UFIFeedbackTargets'),n=b('MercuryServerDispatcher'),o=b('collectDataAttributes'),p=b('copyProperties'),q=b('tx'),r=h.create('UFIUserActions'),s={BAN:'ban',UNDO_BAN:'undo_ban'},t={changeCommentLike:function(ea,fa,ga){var ha=u(ga.target),ia=k.getComment(ea);if(ia.hasviewerliked!=fa){var ja=fa?1:-1,ka={commentid:ea,actiontype:l.UFIActionType.COMMENT_LIKE,viewerliked:fa,likecount:ia.likecount+ja};i.handleUpdate(l.UFIPayloadSourceType.USER_ACTION,{actions:[ka]});n.trySend('/ajax/ufi/comment_like.php',{comment_id:ea,legacy_id:ia.legacyid,like_action:fa,ft_ent_identifier:ia.ftentidentifier,source:ga.source,client_id:j.getNewClientID(),ft:ha});}},addComment:function(ea,fa,ga,ha){m.getFeedbackTarget(ea,function(ia){var ja=u(ha.target),ka=j.getNewClientID();if(!ia.actorforpost)return;var la={ftentidentifier:ea,body:{text:fa},author:ia.actorforpost,id:ka,islocal:true,ufiinstanceid:ha.ufiinstanceid,likecount:0,hasviewerliked:false,timestamp:{time:Date.now(),text:"a few seconds ago"}};i.handleUpdate(l.UFIPayloadSourceType.USER_ACTION,{comments:[la]});var ma=null;if(ha.replyid)ma=(k.getComment(ha.replyid)).fbid;n.trySend('/ajax/ufi/add_comment.php',{ft_ent_identifier:ia.entidentifier,comment_text:ga,source:ha.source,client_id:ka,ft:ja,reply_fbid:ma});});},editComment:function(ea,fa,ga,ha){var ia=u(ha.target),ja=k.getComment(ea);ja.status=l.UFIStatus.PENDING_EDIT;ja.body={text:fa};ja.timestamp={time:Date.now(),text:"a few seconds ago",original:ja.timestamp.time};ja.editnux=null;ja.attachment=null;i.handleUpdate(l.UFIPayloadSourceType.USER_ACTION,{comments:[ja]});n.trySend('/ajax/ufi/edit_comment.php',{ft_ent_identifier:ja.ftentidentifier,comment_text:ga,source:ha.source,comment_id:ja.id,ft:ia});},translateComment:function(ea,fa){n.trySend('/ajax/ufi/translate_comment.php',{ft_ent_identifier:ea.ftentidentifier,comment_ids:[ea.id],source:fa.source});},setHideAsSpam:function(ea,fa,ga){var ha=u(ga.target),ia=k.getComment(ea),ja={commentid:ea,actiontype:l.UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:fa};i.handleUpdate(l.UFIPayloadSourceType.USER_ACTION,{actions:[ja]});n.trySend('/ajax/ufi/comment_spam.php',{comment_id:ea,spam_action:fa,ft_ent_identifier:ia.ftentidentifier,source:ga.source,ft:ha});},removeComment:function(ea,fa){var ga=u(fa.target),ha=k.getComment(ea),ia={actiontype:l.UFIActionType.DELETE_COMMENT,commentid:ea,oneclick:fa.oneclick};i.handleUpdate(l.UFIPayloadSourceType.USER_ACTION,{actions:[ia]});n.trySend('/ajax/ufi/delete_comment.php',{comment_id:ha.id,comment_legacyid:ha.legacyid,ft_ent_identifier:ha.ftentidentifier,one_click:fa.oneclick,source:fa.source,ft:ga});},undoRemoveComment:function(ea,fa,ga){var ha=k.getComment(ea);if(!ha.undoData){r.error('noundodata',{comment:ea});return;}var ia=u(ga.target),ja={actiontype:l.UFIActionType.UNDO_DELETE_COMMENT,commentid:ea};i.handleUpdate(l.UFIPayloadSourceType.USER_ACTION,{actions:[ja]});var ka=ha.undoData;ka.page_admin=fa;var la=p({ft:ia},ka);n.trySend('/ajax/ufi/undo_delete_comment.php',la);},banUser:function(ea,fa,ga,ha){var ia=ga?s.BAN:s.UNDO_BAN;n.trySend('/ajax/ufi/ban_user.php',{page_id:fa,commenter_id:ea.author.id,action:ia,comment_id:ea.id,client_side:true});},changeLike:function(ea,fa,ga){m.getFeedbackTarget(ea,function(ha){var ia=u(ga.target);if(ha.hasviewerliked!==fa){var ja=fa?1:-1,ka={actiontype:l.UFIActionType.LIKE_ACTION,actorid:ha.actorforpost,hasviewerliked:fa,likecount:ha.likecount+ja,entidentifier:ea,likesentences:{current:ha.likesentences.alternate,alternate:ha.likesentences.current}};i.handleUpdate(l.UFIPayloadSourceType.USER_ACTION,{actions:[ka]});n.trySend('/ajax/ufi/like.php',{like_action:fa,ft_ent_identifier:ea,source:ga.source,client_id:j.getNewClientID(),ft:ia});}});},fetchSpamComments:function(ea,fa){k.getCommentsInRange(ea,fa,function(ga){var ha=ga.map(function(ia){return ia.id;});n.trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ea,comment_ids:ha,source:null});});},removePreview:function(ea,fa){var ga=u(fa.target),ha={commentid:ea.id,actiontype:l.UFIActionType.REMOVE_PREVIEW};i.handleUpdate(l.UFIPayloadSourceType.USER_ACTION,{actions:[ha]});n.trySend('/ajax/ufi/remove_preview.php',{comment_id:ea.id,ft_ent_identifier:ea.ftentidentifier,source:fa.source,ft:ga});}};function u(ea){return ea?o(ea,['ft']).ft:{};}function v(ea){var fa=ea.request.data;g.defaultErrorHandler(ea);var ga=fa.client_id||fa.comment_id,ha=k.getComment(ga);ha.status=(ha.status===l.UFIStatus.PENDING_EDIT)?l.UFIStatus.FAILED_EDIT:l.UFIStatus.FAILED_ADD;ha.body.mentionstext=fa.comment_text;i.handleUpdate(l.UFIPayloadSourceType.USER_ACTION,{comments:[ha]});}function w(ea){var fa=ea.request.data,ga=fa.comment_id,ha=k.getComment(ga);ha.status=ha.priorstatus||null;delete ha.priorstatus;i.handleUpdate(l.UFIPayloadSourceType.USER_ACTION,{comments:[ha]});}function x(ea){var fa=ea.request.data,ga=fa.comment_id,ha=k.getComment(ga);if(fa.like_action===ha.hasviewerliked){var ia=ha.hasviewerliked?-1:1,ja={commentid:ga,actiontype:l.UFIActionType.COMMENT_LIKE,viewerliked:!ha.hasviewerliked,likecount:ha.likecount+ia};i.handleUpdate(l.UFIPayloadSourceType.USER_ACTION,{actions:[ja]});}g.defaultErrorHandler(ea);}function y(ea){var fa=ea.request.data,ga=fa.ft_ent_identifier;m.getFeedbackTarget(ga,function(ha){if(ha.hasviewerliked===fa.like_action){var ia=ha.hasviewerliked?-1:1,ja={actiontype:l.UFIActionType.LIKE_ACTION,actorid:ha.actorforpost,hasviewerliked:!ha.hasviewerliked,likecount:ha.likecount+ia,entidentifier:ga,likesentences:{current:ha.likesentences.alternate,alternate:ha.likesentences.current}};i.handleUpdate(l.UFIPayloadSourceType.USER_ACTION,{actions:[ja]});}});g.defaultErrorHandler(ea);}var z=function(ea){return i.handleUpdate.bind(i,ea);},aa=l.UFIPayloadSourceType;n.registerEndpoints({'/ajax/ufi/comment_like.php':{mode:n.BATCH_CONDITIONAL,handler:z(aa.ENDPOINT_COMMENT_LIKE),error_handler:x,batch_if:ba,batch_function:da},'/ajax/ufi/comment_spam.php':{mode:n.IMMEDIATE,handler:z(aa.ENDPOINT_COMMENT_SPAM),error_handler:w},'/ajax/ufi/add_comment.php':{mode:n.IMMEDIATE,handler:z(aa.ENDPOINT_ADD_COMMENT),error_handler:v},'/ajax/ufi/delete_comment.php':{mode:n.IMMEDIATE,handler:z(aa.ENDPOINT_DELETE_COMMENT),error_handler:w},'/ajax/ufi/undo_delete_comment.php':{mode:n.IMMEDIATE,handler:z(aa.ENDPOINT_UNDO_DELETE_COMMENT),error_handler:w},'/ajax/ufi/ban_user.php':{mode:n.IMMEDIATE,handler:z(aa.ENDPOINT_BAN)},'/ajax/ufi/edit_comment.php':{mode:n.IMMEDIATE,handler:z(aa.ENDPOINT_EDIT_COMMENT),error_handler:v},'/ajax/ufi/like.php':{mode:n.BATCH_CONDITIONAL,handler:z(aa.ENDPOINT_LIKE),error_handler:y,batch_if:ca,batch_function:da},'/ajax/ufi/id_comment_fetch.php':{mode:n.IMMEDIATE,handler:z(aa.ENDPOINT_ID_COMMENT_FETCH)},'/ajax/ufi/remove_preview.php':{mode:n.IMMEDIATE,handler:z(aa.ENDPOINT_REMOVE_PREVIEW)},'/ajax/ufi/translate_comment.php':{mode:n.IMMEDIATE,handler:z(aa.ENDPOINT_TRANSLATE_COMMENT)}});function ba(ea,fa){return ea&&ea.ft_ent_identifier==fa.ft_ent_identifier&&ea.comment_id==fa.comment_id;}function ca(ea,fa){return ea&&ea.ft_ent_identifier==fa.ft_ent_identifier;}function da(ea,fa){return fa;}e.exports=t;});
__d("UFIActionLinkController",["ReactDOM","event-extensions","Arbiter","CSS","DOMQuery","Parent","React","UFIBlingBox","UFICentralUpdates","UFIComments","UFILikeLink","UFIFeedbackTargets","UFITrackingNodes","UFIUserActions","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DOMQuery'),j=b('Parent'),k=b('React'),l=b('UFIBlingBox'),m=b('UFICentralUpdates'),n=b('UFIComments'),o=b('UFILikeLink'),p=b('UFIFeedbackTargets'),q=b('UFITrackingNodes'),r=b('UFIUserActions'),s=b('copyProperties');function t(v,w,x){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var y=i.scry(v,w)[0];if(y){var z=document.createElement('span');y.parentNode.replaceChild(z,y);z.appendChild(y);if(typeof x==="function")x(z);}else var aa=g.subscribe('PhotoSnowlift.DATA_CHANGE',function(){g.unsubscribe(aa);t(v,w,x);},g.SUBSCRIBE_NEW);}var u=function(v,w,x){this._id=w.ftentidentifier;this._source=w.source;this._contextArgs=w;this._ufiRoot=v;this._attemptInitializeBling();if(x.viewercanlike)this._attemptInitializeLike();m.subscribe('feedback-updated',function(y,z){var aa=z.updates;if(this._id in aa)this.render();}.bind(this));m.subscribe('feedback-id-changed',function(y,z){var aa=z.updates;if(this._id in aa)this._id=aa[this._id];}.bind(this));};s(u.prototype,{_attemptInitializeBling:function(){t(this._ufiRoot,'^form .uiBlingBox',function(v){this._blingRoot=v;if(this._dataReady)this._renderBling();}.bind(this));},_attemptInitializeLike:function(){t(this._ufiRoot,'^form .like_link',function(v){this._likeRoot=v;if(this._dataReady)this._renderLike();}.bind(this));},render:function(){this._dataReady=true;this._renderBling();this._renderLike();},_renderBling:function(){if(this._blingRoot)p.getFeedbackTarget(this._id,function(v){var w=function(event){var z=j.byTag(event.target,"form");h.toggleClass(z,"collapsed_comments");h.toggleClass(z,"hidden_add_comment");event.preventDefault();}.bind(this),x=q.getTrackingInfo(q.types.BLINGBOX),y=l({likes:v.likecount,comments:n.getDisplayedCommentCount(this._id),reshares:v.sharecount,permalink:v.permalink,contextArgs:this._contextArgs,onClick:w,'data-ft':x});this._blingBox=k.renderOrUpdateComponent(y,this._blingRoot);}.bind(this));},_renderLike:function(){if(this._likeRoot)p.getFeedbackTarget(this._id,function(v){var w=!v.hasviewerliked,x=function(event){r.changeLike(this._id,w,{source:this._source,target:event.target});}.bind(this),y=o({onClick:x,likeAction:w});this._likeLink=k.renderOrUpdateComponent(y,this._likeRoot);}.bind(this));}});e.exports=u;});
__d("Layout",["keyMirror"],function(a,b,c,d,e,f){var g=b('keyMirror'),h={small:true,medium:true,large:true,none:true},i={small:true,medium:true,large:true,huge:true},j={none:true,medium:true,light:true,dark:true},k={dark:true,inverted:true,standard:true},l={top:true,middle:true,bottom:true},m={left:true,center:true,right:true},n={horizontal:true,vertical:true},o={spacing:g(h),size:g(i),boldness:g(j),appearance:g(k),direction:g(n),vAlign:g(l),hAlign:g(m)};e.exports=o;});
__d("curryOnly",[],function(a,b,c,d,e,f){var g=function(h,i,j){if(!h)return null;return function(){return h.call(j,i);};};e.exports=g;});
__d("reactKeys",[],function(a,b,c,d,e,f){var g=function(h){var i=[],j;for(j in h)if(h.hasOwnProperty(j))i.push(j);return i;};e.exports=g;});
__d("mergeDeepInto",["mergeHelpers"],function(a,b,c,d,e,f){var g=b('mergeHelpers'),h=g.checkMergeArgs,i=g.checkMergeLevel,j=g.isTerminal,k=g.normalizeMergeArg,l=function(n,o,p){h(n,o);i(p);var q,r,s,t=p+1;for(s in o){if(!o.hasOwnProperty(s))continue;q=n[s];r=o[s];if(j(r)){n[s]=r;}else if(j(q)){n[s]={};l(n[s],o[s],t);}else l(n[s],o[s],t);}},m=function(n,o){var p=k(o);l(n,p,0);};e.exports=m;});
__d("ReactUtils",["bindNoArgs","curryOnly","keyMirror","keyOf","reactKeys","merge","mergeDeep","mergeDeepInto","mergeHelpers","mergeInto","mixInto","objMap"],function(a,b,c,d,e,f){var g=b('bindNoArgs'),h=b('curryOnly'),i=b('keyMirror'),j=b('keyOf'),k=b('reactKeys'),l=b('merge'),m=b('mergeDeep'),n=b('mergeDeepInto'),o=b('mergeHelpers'),p=b('mergeInto'),q=b('mixInto'),r=b('objMap');f.bindNoArgs=g;f.curryOnly=h;f.keyMirror=i;f.keyOf=j;f.keys=k;f.merge=l;f.mergeDeep=m;f.mergeInto=p;f.mixInto=q;f.objMap=r;});
__d("LeftRight",["ReactDOM","React","ReactErrors","ReactUtils"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('React'),i=b('ReactErrors'),j=b('ReactUtils'),k=j.keyMirror({left:true,right:true,both:true});function l(n){i.throwIf(!n.children||n.children.length<1||n.children.length>2,"LeftRight component must have one or two children.");}var m=h.createComponent({render:function(){l(this.props);var n=this.props.direction||k.both,o=[{clearfix:true},this.props.classSet],p={lfloat:n===k.left||n===k.both},q={rfloat:n===k.right||n===k.both},r=g.div({classSet:p,children:this.props.children[0]}),s=(this.props.children.length<2)?null:g.div({classSet:q,children:this.props.children[1]}),t=(n===k.right&&s)?[s,r]:[r,s],u=g.div({classSet:o,children:t});u.props=j.merge(this.props,u.props);return u;}});m.DIRECTION=k;e.exports=m;});
__d("ImageBlock",["ReactDOM","Layout","LeftRight","React","ReactUtils","ReactErrors","cx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('Layout'),i=b('LeftRight'),j=b('React'),k=b('ReactUtils'),l=b('ReactErrors'),m=b('cx'),n=h.spacing;function o(s){l.throwIf(!s.children||s.children.length>3||s.children.length<1,"ImageBlock requires two or three children.");}function p(s){var t={img:true};t._8o=true;t._8r=s===n.small;t._8s=s===n.medium;t._8t=s===n.large;return t;}function q(s,t){s.props.classSet=[p(t),s.props.classSet];}var r=j.createComponent({render:function(){o(this.props);var s=this.props.children[0],t=this.props.children[1],u=this.props.children[2],v=this.props.spacing||n.small;q(s,v);var w={};w._8m=true;w._8u=v===n.small;if(s.tagName=='IMG'){if(s.props.alt===undefined)s.props.alt='';}else if((s.tagName=='A'||s.tagName=='LINK')&&s.props.tabIndex===undefined&&s.props.title===undefined&&s.props['aria-label']===undefined){s.props.tabIndex='-1';s.props['aria-hidden']='true';}var x;if(!u){x=g.div({classSet:w,children:t});}else x=i({classSet:w,direction:i.DIRECTION.right,children:[t,u]});var y=i({classSet:this.props.classSet,direction:i.DIRECTION.left,children:[s,x]});y.props=k.merge(this.props,y.props);return y;}});e.exports=r;});
__d("ReactLegacyMentionsInput",["ReactDOM","event-extensions","Bootloader","Keys","React"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM');b('event-extensions');var h=b('Bootloader'),i=b('Keys'),j=b('React'),k=b('event-extensions').$E,l=j.createComponent({onDomReady:function(m){this.props.initialData&&this._initializeTextarea(m);},_handleKeydown:function(event){var m=event.nativeEvent,n=this.props.onEnterSubmit,o=Event.getKeyCode(m)==i.RETURN&&!k(m).getModifiers().any,p=this._mentionsInput&&this._mentionsInput.getTypeahead().getView().getSelection();if(n&&o&&!p){var q=event.target,r=q.value&&q.value.trim();if(r||this.props.acceptEmptyInput){var s={visibleValue:r,encodedValue:r};if(this._mentionsInput){s.encodedValue=this._mentionsInput.getRawValue().trim();this._mentionsInput.reset({flattened:''});}n(s,event);}event.preventDefault();}},_handleFocus:function(){this.props.onFocus&&this.props.onFocus();this._initializeTextarea(this.refs.root.getDOMNode());},_initializeTextarea:function(m){if(this._mentionsInput||this._bootloadingMentions)return;this._bootloadingMentions=true;h.loadModules(['CompactTypeaheadRenderer','ContextualTypeaheadView','InputSelection','MentionsInput','TextAreaControl','Typeahead','TypeaheadAreaCore','TypeaheadBestName','TypeaheadHoistFriends','TypingDetector'],function(n,o,p,q,r,s,t,u,v,w){var x=this.refs.textarea.getDOMNode();new r(x);if(this.props.onTypingStateChange){var y=new w(x);y.init();y.subscribe('change',this.props.onTypingStateChange);}var z={autoSelect:true,renderer:n},aa=new s(this.props.datasource,{ctor:o,options:z},{ctor:t},this.refs.typeahead.getDOMNode());aa.init([u,v]);this._mentionsInput=new q(m,aa,x,{});this._mentionsInput.init({max:6},this.props.initialData);if(this.props.initialData)p.set(x,x.value.length);this._bootloadingMentions=false;}.bind(this));},render:function(){var m={textInput:true,mentionsTextarea:true,uiTextareaAutogrow:true,uiTextareaNoResize:true,UFIAddCommentInput:true,DOMControl_placeholder:true};return (g.div({ref:"root",className:"uiMentionsInput textBoxContainer ReactLegacyMentionsInput",children:[g.div({className:"highlighter",children:g.div({children:g.span({className:"highlighterContent hidden_elem"})})}),g.div({ref:"typeahead",className:"uiTypeahead mentionsTypeahead",children:g.div({className:"wrap",children:[g.input({type:"hidden",autocomplete:"off",className:"hiddenInput"}),g.div({className:"innerWrap",children:g.textarea({ref:"textarea",name:"add_comment_text",classSet:m,title:this.props.placeholder,content:this.props.placeholder,placeholder:this.props.placeholder,onFocus:this._handleFocus.bind(this),onKeyDown:this._handleKeydown.bind(this)})})]})}),g.input({type:"hidden",autocomplete:"off",className:"mentionsHidden",value:""})]}));}});e.exports=l;});
__d("UFIClassSets",["cx"],function(a,b,c,d,e,f){var g=b('cx'),h={img:true,UFIActorImage:true};h._rx=true;var i={UFIRow:true},j={UFIUnseenItem:true};e.exports={ROW:i,ACTOR_IMAGE:h,UNSEEN_ITEM:j};});
__d("UFIAddComment",["ReactDOM","event-extensions","ImageBlock","Keys","React","ReactLegacyMentionsInput","UFIClassSets","UFITrackingNodes","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM');b('event-extensions');var h=b('ImageBlock'),i=b('Keys'),j=b('React'),k=b('ReactLegacyMentionsInput'),l=b('UFIClassSets'),m=b('UFITrackingNodes'),n=b('tx'),o="Write a comment...",p={UFICommentTip:true,fcg:true,fss:true},q={UFITextReplyDimensions:true},r=j.createComponent({getInitialState:function(){return {isCommenting:false};},_onKeyDown:function(event){if(this.props.isEditing&&Event.getKeyCode(event.nativeEvent)===i.ESC)this.props.onCancel();},render:function(){var s=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,t=null;if(this.props.isEditing){t=g.span({classSet:p,children:"Press Esc to cancel."});}else if(this.props.showSendOnEnterTip)t=g.span({classSet:p,children:"Press Enter to post."});var u=m.getTrackingInfo(m.types.ADD_COMMENT_BOX),v=[l.ACTOR_IMAGE,{hidden_elem:!s}],w=[l.ROW,{UFIAddComment:true,noDisplay:this.props.hide}],x={UFIMentionsInputWrap:true,UFICommentReply:this.props.replyCommentID};return (g.li({classSet:w,onKeyDown:this._onKeyDown.bind(this),'data-ft':u,children:h({classSet:x,children:[g.img({classSet:v,src:this.props.viewerActor.thumbSrc}),g.div({children:[k({initialData:this.props.initialData,placeholder:o,wrapperClassSet:q,datasource:this.props.mentionsDataSource,acceptEmptyInput:this.props.isEditing,onEnterSubmit:this.props.onCommentSubmit,onFocus:this.createStateUpdater({isCommenting:true}),onTypingStateChange:this.props.onTypingStateChange}),t]})]})}));}});e.exports=r;});
__d("UFIAddCommentController",["ReactDOM","Arbiter","copyProperties","MentionsInputUtils","Parent","UFIAddComment","React","ShortProfiles","UFICentralUpdates","UFIComments","UFIFeedbackTargets","UFIInstanceState","UFIUserActions"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('copyProperties'),i=b('MentionsInputUtils'),j=b('Parent'),k=b('UFIAddComment'),l=b('React'),m=b('ShortProfiles'),n=b('UFICentralUpdates'),o=b('UFIComments'),p=b('UFIFeedbackTargets'),q=b('UFIInstanceState'),r=b('UFIUserActions');function s(t,u,v,w){this.id=u;this._ufiInstanceID=w.instanceid;this._contextArgs=w;this._replyCommentID=v;if(t){this.root=t;this.render();n.subscribe('instance-updated',function(x,y){var z=y.updates;if(this._ufiInstanceID in z)this.render();}.bind(this));}n.subscribe('feedback-id-changed',function(x,y){var z=y.updates;if(this.id in z)this.id=z[this.id];}.bind(this));}h(s.prototype,{_onCommentSubmit:function(t,event){r.addComment(this.id,t.visibleValue,t.encodedValue,{source:this._contextArgs.source,ufiinstanceid:this._ufiInstanceID,target:event.target,replyid:this._replyCommentID});p.getFeedbackTarget(this.id,function(v){if(v.isranked)q.updateState(this._ufiInstanceID,'scrolloninsert',true);}.bind(this));var u=j.byTag(this.root,'form');if(u)g.inform('ufi/comment',{form:u});return false;},_onTypingStateChange:function(t,u){},renderAddComment:function(t,u,v){var w=this._contextArgs.logtyping?this._onTypingStateChange.bind(this):null,x=null,y=q.getKeyForInstance(this._ufiInstanceID,'isediting')&&!this._replyCommentID;return (k({hide:y,replyCommentID:this._replyCommentID,viewerActor:t,initialData:x,onCommentSubmit:this._onCommentSubmit.bind(this),mentionsDataSource:u,onTypingStateChange:w,showSendOnEnterTip:v,source:this._contextArgs.source,contextArgs:this._contextArgs}));},renderEditComment:function(t,u,v,w,x){var y=o.getComment(u),z=i.generateDataFromTextWithEntities(y.body);return (k({viewerActor:t,initialData:z,onCommentSubmit:w,onCancel:x,mentionsDataSource:v,source:this._contextArgs.source,contextArgs:this._contextArgs,isEditing:true}));},render:function(){if(!this.root)throw new Error('render called on UFIAddCommentController with no root');p.getFeedbackTarget(this.id,function(t){if(t.cancomment&&t.actorforpost)m.get(t.actorforpost,function(u){var v=this.renderAddComment(u,t.mentionsdatasource,t.showsendonentertip);this._addComment=l.renderOrUpdateComponent(v,this.root);}.bind(this));}.bind(this));}});e.exports=s;});
__d("ReactLegacyScrollableArea",["ReactDOM","Bootloader","React","Style"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('Bootloader'),i=b('React'),j=b('Style'),k={uiScrollableArea:true,'native':true},l={uiScrollableAreaWrap:true},m={uiScrollableAreaBody:true},n={uiScrollableAreaContent:true},o=i.createComponent({render:function(){var p={height:this.props.height?this.props.height+'px':'auto'};return (g.div({classSet:k,ref:"root",style:p,children:g.div({classSet:l,children:g.div({classSet:m,ref:"body",children:g.div({classSet:n,children:this.props.children})})})}));},onDomReady:function(){h.loadModules(['ScrollableArea'],this._loadScrollableArea.bind(this));},_loadScrollableArea:function(p){this._area=p.fromNative(this.refs.root.getDOMNode(),{fade:this.props.fade,persistent:this.props.persistent});var q=this.refs.body.getDOMNode();j.set(q,'width',this.props.width+'px');this._area.subscribe('scroll',this.props.onScroll);}});e.exports=o;});
__d("CloseButton",["ReactDOM","Layout","React","ReactUtils","$"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('Layout'),i=b('React'),j=b('ReactUtils'),k=b('$'),l=i.createComponent({render:function(){var m=this.props,n=m.size||h.size.medium,o=m.appearance||h.appearance.normal,p=n===h.size.small,q=n===h.size.huge,r=o===h.appearance.dark,s=o===h.appearance.inverted,t={uiCloseButton:true,uiCloseButtonSmall:p,uiCloseButtonHuge:q,uiCloseButtonSmallDark:p&&r,uiCloseButtonSmallInverted:p&&s,uiCloseButtonDark:!p&&r,uiCloseButtonInverted:!p&&s},u=[t,m.classSet],v=(g.a({title:m.tooltip,'data-hover':m.tooltip&&'tooltip','data-tooltip-alignh':m.tooltip&&'center',classSet:u}));v.props=j.merge(m,v.props);return v;}});e.exports=l;});
__d("Link",["ReactDOM","React","UntrustedLink","$","mergeInto"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('React'),i=b('UntrustedLink'),j=b('$'),k=b('mergeInto'),l=h.createComponent({_installLinkshimOnMouseDown:function(event){var m=this.props.href;if(m.shimhash)i.bootstrap(j(this._rootDomId),m.shimhash);this.props.onMouseDown&&this.props.onMouseDown(event);},render:function(){var m=this.props.href,n=g.a({});k(n.props,this.props);if(m){n.props.href=m.url;if(!n.props.target)n.props.target='_blank';var o=!!m.shimhash;if(o){n.props.rel=n.props.rel?(n.props.rel+' nofollow'):'nofollow';n.props.onMouseDown=this._installLinkshimOnMouseDown.bind(this);}}return n;}});e.exports=l;});
__d("HovercardLinkInterpolator",["ReactDOM","HovercardLink","Link"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('HovercardLink'),i=b('Link');function j(k,l){var m=l.entities[0],n=i({href:m,content:k});if(!m.external)n.props['data-hovercard']=h.constructEndpoint(m).toString();return n;}e.exports=j;});
__d("LinkButton",["ReactDOM"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=function(i){var j=i.name&&i.value?i.name+'['+encodeURIComponent(i.value)+']':null;return (g.label({classSet:{uiLinkButton:true,uiLinkButtonSubtle:i.subtle,async_throbber:i.showSaving},children:g.input({type:i.inputType||'button',name:j,value:i.label,classSet:{stat_elem:i.showSaving}})}));};e.exports=h;});
__d("ProfileBrowserLink",["URI"],function(a,b,c,d,e,f){var g=b('URI'),h='/ajax/browser/dialog/',i='/browse/',j=function(l,m,n){return new g(l+m).setQueryData(n);},k={constructPageURI:function(l,m){return j(i,l,m);},constructDialogURI:function(l,m){return j(h,l,m);}};e.exports=k;});
__d("ProfileBrowserTypes",[],function(a,b,c,d,e,f){var g={LIKES:'likes',GROUP_MESSAGE_VIEWERS:'group_message_viewers'};e.exports=g;});
__d("Timestamp",["ReactDOM","event-extensions","LiveTimer","React"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM');b('event-extensions');var h=b('LiveTimer'),i=b('React'),j=i.createComponent({render:function(){var k=h.renderRelativeTimeToServer(this.props.time),l=k.text;if(!l)l=this.props.text;var m={livetimestamp:true};m[this.props.className]=true;return (g.abbr({classSet:m,title:this.props.verbose,'data-utime':this.props.time,content:l}));}});e.exports=j;});
__d("ReactTextWithEmoticons",["ReactDOM","Emoji","Emote","React"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('Emoji'),i=b('Emote'),j=b('React'),k=j.createComponent({render:function(){if(!this.props.renderEmoticons&&!this.props.renderEmoji)return g.span({content:this.props.text});var l;if(this.props.renderEmoticons&&this.props.renderEmoji){l=h.htmlEmoji(this.props.text,i.htmlEmoteWithoutFBID);}else if(this.props.renderEmoticons){l=i.htmlEmoteWithoutFBID(this.props.text);}else l=h.htmlEmoji(this.props.text);return g.span({dangerouslySetInnerHtml:{__html:l}});}});e.exports=k;});
__d("ReactTextWithEntities",["ReactDOM","Link","React","ReactTextWithEmoticons"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('Link'),i=b('React'),j=b('ReactTextWithEmoticons');function k(q){return (q).replace(/<3\b|&hearts;/g,'\u2665');}function l(q,r){return (h({href:r.entities[0],children:[q]}));}function m(q,r){return q.offset-r.offset;}function n(q){return !!q;}var o=/(\r\n|[\r\n])/,p=i.createComponent({_formatStandardText:function(q){var r=q.split(o),s=[];for(var t=0;t<r.length;t++){var u=r[t];if(u)if(o.test(u)){s.push(g.br({}));}else if(this.props.renderEmoticons||this.props.renderEmoji){s.push(j({text:u,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}));}else s.push(k(u));}return s;},render:function(){var q=0,r=this.props.ranges,s=this.props.aggregatedRanges,t=this.props.text,u=null;if(r){u=s?r.concat(s):r;}else if(s)u=s;if(u)u.sort(m);var v=[],w=u?u.length:0;for(var x=0,y=w;x<y;x++){var z=u[x];if(z.offset<q)continue;if(z.offset>q)v=v.concat(this._formatStandardText(t.substring(q,z.offset)));var aa=t.substr(z.offset,z.length);v=v.concat([this.props.interpolator?this.props.interpolator(aa,z):l(aa,z)]);q=z.offset+z.length;}if(t.length>q)v=v.concat(this._formatStandardText(t.substr(q)));return g.span({classSet:this.props.classSet,children:v});}});e.exports=p;});
__d("SeeMore",["ReactDOM","React","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('React'),i=b('tx'),j="...",k="See More",l={SeeMoreLink:true,fss:true},m=h.createComponent({getInitialState:function(){return {isCollapsed:true};},render:function(){var n=this.state.isCollapsed,o=!n?null:g.span({content:j}),p=this.props.children[0],q=n?null:g.span({children:this.props.children[1]}),r=!n?null:g.a({classSet:l,onClick:this.createStateUpdater({isCollapsed:false}),content:k});return (g.span({classSet:this.props.classSet,children:[p,o,r,q]}));}});e.exports=m;});
__d("TruncatedTextWithEntities",["ReactDOM","React","ReactTextWithEntities","SeeMore"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('React'),i=b('ReactTextWithEntities'),j=b('SeeMore');function k(o,p){var q=o.offset+o.length;return p>o.offset&&p<q;}function l(o,p){for(var q=0;q<o.length;q++){var r=o[q];if(k(r,p))return r.offset;}return p;}var m=function(o,p,q){var r=[],s=[],t=l(p,q);for(var u=0;u<p.length;u++){var v=p[u];if(v.offset<t){r.push(v);}else s.push({offset:v.offset-t,length:v.length,entities:v.entities});}return {first:{ranges:r,text:o.substr(0,t)},second:{ranges:s,text:o.substr(t)}};},n=h.createComponent({render:function(){var o=this.props.maxLines,p=this.props.maxLength,q=this.props.truncationPercent||.6,r=Math.floor(q*p),s=this.props.text||'',t=this.props.ranges||[],u=s.split('\n'),v=u.length-1,w=p&&s.length>p,x=o&&v>o;if(x)r=Math.min(u.slice(0,o).join('\n').length,r);if(w||x){var y=m(s,t,r);return (g.span({'data-ft':this.props['data-ft'],children:j({classSet:this.props.classSet,children:[i({interpolator:this.props.interpolator,ranges:y.first.ranges,text:y.first.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}),i({interpolator:this.props.interpolator,ranges:y.second.ranges,text:y.second.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji})]})}));}else return (g.span({'data-ft':this.props['data-ft'],children:i({classSet:this.props.classSet,interpolator:this.props.interpolator,ranges:t,text:s,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji})}));}});e.exports=n;});
__d("UFIReplyLink",["CommentRepliesImpl"],function(a,b,c,d,e,f){e.exports=c('CommentRepliesImpl').module||{enabled:false};});
__d("UFIReplyUtil",["CommentRepliesUtilImpl"],function(a,b,c,d,e,f){e.exports=c('CommentRepliesUtilImpl').module||{enabled:false};});
__d("UFISpamCount",["UFISpamCountImpl"],function(a,b,c,d,e,f){e.exports=c('UFISpamCountImpl').module||{enabled:false};});
__d("UFIComment",["ReactDOM","function-extensions","Bootloader","CloseButton","Env","HovercardLink","HovercardLinkInterpolator","ImageBlock","Layout","LinkButton","ProfileBrowserLink","ProfileBrowserTypes","React","ReactUtils","Timestamp","TruncatedTextWithEntities","UFIClassSets","UFIConstants","UFIInstanceState","UFIReplyLink","UFIReplyUtil","UFISpamCount","UFITrackingNodes","URI","tx","UFIConfig"],function(a,b,c,d,e,f){var g=b('ReactDOM');b('function-extensions');var h=b('Bootloader'),i=b('CloseButton'),j=b('Env'),k=b('HovercardLink'),l=b('HovercardLinkInterpolator'),m=b('ImageBlock'),n=b('Layout'),o=b('LinkButton'),p=b('ProfileBrowserLink'),q=b('ProfileBrowserTypes'),r=b('React'),s=b('ReactUtils'),t=b('Timestamp'),u=b('TruncatedTextWithEntities'),v=b('UFIClassSets'),w=b('UFIConstants'),x=b('UFIInstanceState'),y=b('UFIReplyLink'),z=b('UFIReplyUtil'),aa=b('UFISpamCount'),ba=w.UFIStatus,ca=b('UFITrackingNodes'),da=b('URI'),ea=b('tx'),fa=c('UFIConfig'),ga=' \u00b7 ',ha={UFICommentBody:true},ia={UFICommentActorName:true},ja={UFICommentNotSpamLink:true},ka=s.keyMirror({edit:true,hide:true,remove:true}),la={UFICommentActions:true,fsm:true,fwn:true,fcg:true},ma={UFIFailureMessage:true},na={UFIFailureMessageIcon:true},oa={UFITranslateLink:true},pa={UFITranslatedText:true},qa={UFICommentLikeButton:true},ra={UFICommentLikeIcon:true},sa={uiLinkSubtle:true},ta={stat_elem:true},ua={pls:true},va={fcg:true},wa=null,xa=function(eb,fb){var gb=new da('/ajax/like/tooltip.php').setQueryData({comment_fbid:eb.fbid,comment_from:eb.author.id,cache_buster:eb.likeconfirmhash||0});if(fb)gb.addQueryData({viewas:fb});return gb;},ya=function(eb){var fb=eb.status;return fb===ba.FAILED_ADD||fb===ba.FAILED_EDIT;};function za(eb){return eb.commenterIsFOF!==undefined&&eb.userIsMinor!==undefined&&eb.reportLink!==undefined;}var ab=r.createComponent({render:function(){var eb=this.props.comment,fb=eb.likecount||0,gb=q.LIKES,hb={id:eb.fbid},ib=xa(this.props.comment,this.props.viewas),jb,kb;if(this.props.contextArgs.entstream){if(fb===1){kb="1 Like";}else kb=ea._("{count} Likes",{count:fb});}else{jb=g.i({classSet:ra});kb=g.span({content:fb});}return (g.a({classSet:qa,rel:"dialog",'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':ib.toString(),ajaxify:p.constructDialogURI(gb,hb).toString(),href:p.constructPageURI(gb,hb).toString(),children:[jb,kb]}));}}),bb=r.createComponent({render:function(){var eb=this.props,fb=eb.comment,gb=eb.feedback,hb=eb.markedAsSpamHere,ib=fb.status===ba.SPAM_DISPLAY,jb,kb,lb,mb,nb,ob;if(!fb.islocal){if(ib&&!hb){if(eb.viewerCanMarkNotSpam)jb=[ga,g.a({onClick:eb.onMarkAsNotSpam,classSet:ja,content:"Not Spam"})];}else{if(gb.viewercanlike){var pb=ca.getTrackingInfo(fb.hasviewerliked?ca.types.UNLIKE_LINK:ca.types.LIKE_LINK),qb=fb.hasviewerliked?"Unlike this comment":"Like this comment";kb=[ga,g.a({onClick:eb.onCommentLikeToggle,'data-ft':pb,title:qb,content:fb.hasviewerliked?"Unlike":"Like"})];}if(gb.cancomment&&z.enabled)nb=[ga,y({comment:fb,contextArgs:eb.contextArgs})];if(fb.likecount)lb=[ga,ab({comment:fb,viewas:this.props.viewas,contextArgs:this.props.contextArgs})];if(fb.spamcount&&aa.enabled)mb=[ga,aa({count:fb.spamcount})];}if(fb.attachment&&fb.canremove)ob=[ga,g.a({onClick:eb.onPreviewRemove,content:"Remove Preview"})];}return (g.div({classSet:la,children:[cb({comment:fb,onRetrySubmit:eb.onRetrySubmit,showPermalink:eb.showPermalink}),kb,lb,mb,nb,jb,ob]}));}}),cb=r.createComponent({render:function(){var eb=this.props.comment,fb=this.props.onRetrySubmit,gb,hb;if(ya(eb)){gb=[g.span({classSet:ma,children:[g.i({classSet:na}),"Unable to post comment."]}),fb?[' ',g.a({onClick:fb,children:"Try Again"})]:null];}else{var ib=this.props.showPermalink?eb.permalink:null,jb=ca.getTrackingInfo(ca.types.SOURCE),kb=g.a({classSet:sa,href:ib,'data-ft':jb,children:t({time:eb.timestamp.time,text:eb.timestamp.text,verbose:eb.timestamp.verbose})}),lb;switch(eb.source){case w.UFISourceType.MOBILE:lb=g.a({classSet:sa,href:new da('/mobile/').setSubdomain('www').toString(),content:"mobile"});break;case w.UFISourceType.SMS:lb=g.a({classSet:sa,href:new da('/mobile/?v=texts').setSubdomain('www').toString(),content:"text message"});break;case w.UFISourceType.EMAIL:lb=o({subtle:true,label:"email",inputType:"submit",name:"email_explain",value:true,classSet:ta});break;}hb=lb?ea._("{time} via {source}",{time:kb,source:lb}):kb;}var mb=null;if(eb.timestamp.original){var nb=new da('/ajax/edits/browser/comment').addQueryData({comment_token:eb.id}).toString();mb=[ga,g.a({ref:"EditLink",href:"#",rel:"dialog",className:"uiLinkSubtle",ajaxify:nb,'data-hover':"tooltip",title:"Show edit history",content:"Edited"})];}return (g.span({children:[hb,gb,mb]}));},propTrigger:function(eb){var fb=this.props.comment,gb=eb.comment;if(!fb.editnux&&!!gb.editnux)h.loadModules(['ContextualDialogX'],function(hb){var ib=new hb();ib.init(gb.editnux).setContext(this.refs.EditLink.getDOMNode()).setWidth(300).setPosition('below').show();}.bind(this));}}),db=r.createComponent({getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,oneClickRemovedHere:false,isInlinePageDeleted:false,isInlineBanned:false};},_onHideAsSpam:function(event){this.props.onHideAsSpam(event);this.updateState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.props.onMarkAsNotSpam(event);this.updateState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.props.onOneClickRemove(event);this.updateState({isInlinePageDeleted:true});},_onUndoDeleteSpam:function(event){this.props.onUndoOneClickRemove(event);this.updateState({isInlinePageDeleted:false});},_onInlineBan:function(event){this.props.onInlineBan(event);this.updateState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.props.onUndoInlineBan(event);this.updateState({isInlineBanned:false});},_onOneClickRemove:function(event){this.props.onOneClickRemove(event);this.updateState({oneClickRemovedHere:true});},_onUndoOneClickRemove:function(event){this.props.onUndoOneClickRemove(event);this.updateState({oneClickRemovedHere:false});},_onAction:function(event,eb){if(eb===ka.remove){this.props.onRemove(event);}else if(eb===ka.edit){this.props.onEdit(event);}else if(eb===ka.hide)this._onHideAsSpam(event);},_createRemoveReportMenu:function(event){if(this._removeReportMenu)return;var eb=[{label:"Delete Comment...",value:ka.remove},{label:"Hide Comment",value:ka.hide}];h.loadModules(['UFILegacyUtils'],function(fb){this._removeReportMenu=fb.createCommentMenu(event.target,eb,this._onAction.bind(this,event));}.bind(this));},_createEditDeleteMenu:function(event){if(this._editDeleteMenu)return;var eb=[{label:"Edit...",value:ka.edit},{label:"Delete...",value:ka.remove}];h.loadModules(['UFILegacyUtils'],function(fb){this._editDeleteMenu=fb.createCommentMenu(event.target,eb,this._onAction.bind(this,event));}.bind(this));},_renderCloseButton:function(){var eb=this.props.comment,fb=this.props.feedback,gb=null,hb=null,ib=false;if(eb.canremove&&!this.props.hideAsSpamForPageAdmin){if(eb.viewerIsAuthor){if(eb.canedit){hb="Edit or Delete";gb=this._createEditDeleteMenu.bind(this);ib=true;}else{hb="Remove";gb=this.props.onRemove;}}else if(fb.canremoveall)if(this.props.showRemoveReportMenu){hb="Remove or Report";gb=this._createRemoveReportMenu.bind(this);}else{hb="Remove";gb=this._onOneClickRemove.bind(this);}}else if(eb.canreport){hb="Hide as Spam";gb=this._onHideAsSpam.bind(this);}var jb={UFICommentCloseButton:true,UFIEditButton:ib,hdn:gb===null};return (i({onClick:gb,tooltip:hb,classSet:jb}));},onDomReady:function(eb){var fb=x.getKeyForInstance(this.props.comment.ufiinstanceid,'scrolloninsert');if(this.state.isHighlighting||fb){h.loadModules(['UFIScrollHighlight'],function(gb){gb.actOn.curry(eb).defer();});this.updateState({isHighlighting:false});}},render:function(){var eb=this.props.comment,fb=this.props.feedback,gb=eb.status===ba.DELETED,hb=eb.status===ba.SPAM_DISPLAY,ib=eb.status===ba.PENDING_UNDO_DELETE,jb=this.state.markedAsSpamHere,kb=this.state.oneClickRemovedHere,lb=this.state.isInlinePageDeleted,mb=this.props.hideAsSpamForPageAdmin,nb=this.state.isInlineBanned,ob=za(eb),pb=!eb.status&&(eb.isunseen||eb.islocal);if(!eb.status&&fb.lastseentime){var qb=eb.timestamp.original||eb.timestamp.time;pb=pb||qb>fb.lastseentime;}var rb=this.props.contextArgs.markedcomment;if(rb&&rb==eb.legacyid)pb=true;var sb=null;if(ob)if(wa){var tb,ub=null;if(mb){sb=nb?this._onUndoInlineBan.bind(this):this._onInlineBan.bind(this);if(lb){ub=this._onUndoDeleteSpam.bind(this);var vb=g.a({href:"#",content:"Undo",onClick:ub});tb=ea._("You've deleted this comment so no one can see it. {undo}.",{undo:vb});}else if(jb)tb=this.getPageAdminNotice();}else if(jb){tb="This comment has been hidden as spam.";ub=this._onMarkAsNotSpam.bind(this);}else if(kb){tb="This comment has been removed.";ub=this._onUndoOneClickRemove.bind(this);}if(tb)return (g.li({classSet:v.ROW,children:wa({notice:tb,comment:this.props.comment,onUndo:ub,onBanAction:sb,isInlineBanned:nb,hideAsSpamForPageAdmin:mb})}));}else h.loadModules(['UFICommentRemovalControls'],function(xb){wa=xb;this.updateState.bind(this,{}).defer();}.bind(this));var wb=[v.ROW,{UFIRow:true,UFIComment:true,UFICommentFailed:ya(eb),UFITranslucentComment:gb||hb||ib,highlightComment:this.state.isHighlighting,noDisplay:gb&&!kb}];if(pb)wb.push(v.UNSEEN_ITEM);return (g.li({classSet:wb,'data-ft':this.props['data-ft'],children:this.renderComment()}));},getPageAdminNotice:function(){var eb=g.a({href:"#",content:"Undo this",onClick:this._onMarkAsNotSpam.bind(this)}),fb=g.a({href:"#",content:"delete this comment",onClick:this._onDeleteSpam.bind(this)}),gb=ea._("You've hidden this comment so only the person who wrote it and their friends can see it. {undoThis} or {deleteThisComment}.",{undoThis:eb,deleteThisComment:fb});return gb;},renderComment:function(){var eb=this.props,fb=eb.comment,gb=eb.feedback,hb=fb.author,ib=k.constructEndpoint(hb).toString(),jb=fb.status===ba.SPAM_DISPLAY,kb=gb.canremoveall||fb.hiddenbyviewer,lb=null,mb=null;if(!eb.isLocallyComposed&&!this.state.wasHighlighted&&!fb.fromfetch){mb=w.commentTruncationLength;lb=w.commentTruncationMaxLines;}var nb;if(fb.attachment)nb=g.div({isStatic:true,dangerouslySetInnerHtml:fb.attachment.markup});var ob=ca.getTrackingInfo(ca.types.SMALL_ACTOR_PHOTO),pb=ca.getTrackingInfo(ca.types.USER_NAME),qb=ca.getTrackingInfo(ca.types.USER_MESSAGE),rb={'right-aligned-text':fb.body.isrtl&&!j.rtl,'left-aligned-text':!fb.body.isrtl&&j.rtl,UFICommentContent:true},sb,tb=!fb.body.isrtl,ub=!j.rtl;if(tb!==ub)sb=tb?'ltr':'rtl';var vb=null,wb=null;if(fb.istranslatable&&(fb.translatedtext===undefined))vb=g.a({href:"#",title:"Translate this comment",classSet:oa,onClick:eb.onCommentTranslate,content:"See Translation"});if(fb.translatedtext){var xb=new da('http://bing.com/translator').addQueryData({text:fb.body.text});wb=g.span({classSet:pa,children:[fb.translatedtext,g.span({classSet:ua,children:["(",g.a({href:xb.toString(),classSet:va,content:"Translated by Bing"}),")"]})]});}return (m({spacing:n.spacing.medium,children:[g.a({href:hb.uri,'data-hovercard':ib,'data-ft':ob,children:g.img({src:hb.thumbSrc,classSet:v.ACTOR_IMAGE})}),g.div({children:[g.div({classSet:rb,dir:sb,children:[g.a({classSet:ia,href:hb.uri,content:hb.name,'data-hovercard':ib,'data-ft':pb}),' ',u({classSet:ha,interpolator:l,ranges:fb.body.ranges,text:fb.body.text,truncationPercent:w.commentTruncationPercent,maxLength:mb,maxLines:lb,renderEmoticons:fa.renderEmoticons,renderEmoji:fa.renderEmoji,'data-ft':qb}),vb,wb,nb]}),bb({comment:fb,feedback:gb,onCommentLikeToggle:eb.onCommentLikeToggle,onPreviewRemove:eb.onPreviewRemove,onRetrySubmit:eb.onRetrySubmit,onMarkAsNotSpam:this._onMarkAsNotSpam.bind(this),viewerCanMarkNotSpam:kb,viewas:eb.contextArgs.viewas,showPermalink:eb.showPermalink,contextArgs:eb.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere})]}),!jb?this._renderCloseButton():null]}));}});e.exports=db;});
__d("UFIContainer",["ReactDOM","React","UFITrackingNodes"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('React'),i=b('UFITrackingNodes'),j=h.createComponent({render:function(){var k=null;if(this.props.hasNub)k=g.li({classSet:{UFIArrow:true},children:g.i({})});return (g.ul({classSet:{UFIList:true},'data-ft':i.getTrackingInfo(i.types.UFI),children:[k,this.props.children]}));}});e.exports=j;});
__d("UFILikeSentence",["ReactDOM","HovercardLinkInterpolator","ImageBlock","ProfileBrowserLink","ProfileBrowserTypes","React","ReactTextWithEntities","UFIClassSets","URI","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('HovercardLinkInterpolator'),i=b('ImageBlock'),j=b('ProfileBrowserLink'),k=b('ProfileBrowserTypes'),l=b('React'),m=b('ReactTextWithEntities'),n=b('UFIClassSets'),o=b('URI'),p=b('tx');function q(s,t,u,v){if(v.count!=null){var w=k.LIKES,x={id:s.targetfbid},y=[];for(var z=0;z<t.length;z++)if(!t[z].count)y.push(t[z].entities[0].id);var aa=new o('/ajax/like/tooltip.php').setQueryData({comment_fbid:s.targetfbid,comment_from:s.actorforpost,seen_user_fbids:y.length?y:true});return (g.a({rel:"dialog",ajaxify:j.constructDialogURI(w,x).toString(),href:j.constructPageURI(w,x).toString(),'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':aa.toString(),children:u}));}else return h(u,v);}var r=l.createComponent({render:function(){var s=this.props.feedback,t=s.likesentences.current,u=[n.ROW,{UFILikeSentence:true}];if(s.likesentences.isunseen)u.push(n.UNSEEN_ITEM);var v=null,w=null;if(t.text){v=g.i({classSet:{UFILikeIcon:true}});if(s.viewercanlike&&(this.props.entstream||!s.hasviewerliked))v=g.a({classSet:{UFILikeLink:true},href:"#",tabIndex:"-1",title:"Like this item",onClick:this.props.onTargetLikeToggle,children:v});var x=q.bind(null,s,t.ranges);w=m({interpolator:x,ranges:t.ranges,aggregatedRanges:t.aggregatedranges,text:t.text});}else if(this.props.entstream&&s.viewercanlike){v=g.a({classSet:{UFILikeLink:true},href:"#",tabIndex:"-1",title:"Like this item",onClick:this.props.onTargetLikeToggle,children:g.i({classSet:{UFILikeIcon:true}})});w="Be the first to like this.";}var y=null;if(s.seencount>0){var z=k.GROUP_MESSAGE_VIEWERS,aa={id:s.targetfbid},ba=j.constructDialogURI(z,aa),ca=j.constructPageURI(z,aa),da=new o('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:s.entidentifier,displayed_count:s.seencount}),ea=s.seenbyall?"Seen by everyone":p._("Seen by {count}",{count:s.seencount});y=g.a({rel:"dialog",ajaxify:ba.toString(),href:ca.toString(),tabindex:"-1",'data-hover':"tooltip",'data-tooltip-alignh':"left",'data-tooltip-uri':da.toString(),classSet:{UFISeenCount:true,UFISeenCountRight:!!t.text},children:[g.span({classSet:{UFISeenCountIcon:true}}),ea]});}var fa=null;if(v&&w){fa=i({children:[v,w,y]});}else fa=y;return (g.li({classSet:u,children:fa}));}});e.exports=r;});
__d("UFIPager",["ReactDOM","ImageBlock","React","UFIClassSets"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('ImageBlock'),i=b('React'),j=b('UFIClassSets'),k=i.createComponent({onPagerClick:function(){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();},render:function(){var l=this.onPagerClick.bind(this),m={ufiPagerLoading:this.props.isLoading},n=[j.ROW];if(this.props.isUnseen)n.push(j.UNSEEN_ITEM);return (g.li({classSet:n,'data-ft':this.props['data-ft'],children:h({children:[g.a({classSet:{UFIPagerIcon:true},onClick:l}),g.a({classSet:{UFIPagerLink:true},onClick:l,children:g.span({classSet:m,children:this.props.pagerLabel})}),g.span({className:"fcg",children:this.props.countSentence})]})}));}});e.exports=k;});
__d("UFIShareRow",["ReactDOM","ImageBlock","NumberFormat","React","UFIClassSets","URI","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('ImageBlock'),i=b('NumberFormat'),j=b('React'),k=b('UFIClassSets'),l=b('URI'),m=b('tx'),n=j.createComponent({render:function(){var o=new l('/ajax/shares/view').setQueryData({target_fbid:this.props.targetID}),p=new l('/shares/view').setSubdomain('www').setQueryData({id:this.props.targetID}),q;if(this.props.shareCount>1){var r=i.formatIntegerWithDelimiter(this.props.shareCount,this.props.contextArgs.numberdelimiter||',');q=m._("{count} shares",{count:r});}else q="1 share";return (g.li({classSet:k.ROW,children:h({children:[g.a({className:"UFIShareIcon",rel:"dialog",ajaxify:o.toString(),href:p.toString()}),g.a({className:"UFIShareLink",rel:"dialog",ajaxify:o.toString(),href:p.toString(),children:q})]})}));}});e.exports=n;});
__d("UFISpamPlaceholder",["ReactDOM","React","UFIClassSets","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),g=b('ReactDOM'),h=b('React'),i=b('UFIClassSets'),j=b('tx'),k=h.createComponent({render:function(){var l=[{UFISpamCommentWrapper:true,UFISpamCommentLoading:this.props.isLoading},i.ROW];return (g.li({children:g.a({classSet:{UFISpamCommentLink:true},onClick:this.props.onClick,children:g.span({'data-hover':"tooltip",'data-tooltip-alignh':"center",title:j._("{count} hidden",{count:this.props.numHidden}),classSet:l,children:g.i({classSet:{placeholderIcon:true}})})})}));}});e.exports=k;});
__d("UFI",["ReactDOM","NumberFormat","React","ReactLegacyScrollableArea","UFIAddCommentController","UFIComment","UFIConstants","UFIContainer","UFIInstanceState","UFILikeSentence","UFIPager","UFIReplyUtil","UFIShareRow","UFISpamPlaceholder","UFITrackingNodes","isEmpty","tx","copyProperties"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('NumberFormat'),i=b('React'),j=b('ReactLegacyScrollableArea'),k=b('UFIAddCommentController'),l=b('UFIComment'),m=b('UFIConstants'),n=b('UFIContainer'),o=b('UFIInstanceState'),p=b('UFILikeSentence'),q=b('UFIPager'),r=b('UFIReplyUtil'),s=b('UFIShareRow'),t=b('UFISpamPlaceholder'),u=b('UFITrackingNodes'),v=b('isEmpty'),w=b('tx'),x=b('copyProperties'),y=i.createComponent({getInitialState:function(){return {requestRange:this.props.availableRange,loadingSpamOffsets:{}};},render:function(){var z=this.props,aa=z.feedback,ba=z.contextArgs,ca=z.source!=m.UFIFeedbackSourceType.ADS,da=(!v(aa.likesentences.current)||aa.seencount>0)&&ca,ea=ba.entstream&&aa.viewercanlike,fa=da||ea,ga=null;if(fa)ga=p({entstream:ba.entstream,feedback:aa,onTargetLikeToggle:z.onTargetLikeToggle});var ha=z.availableComments&&z.availableComments.length&&ca,ia=null;if(ha)ia=this.renderCommentMap(z.availableComments,z.availableRange.offset);var ja=null,ka=aa.cancomment;if(ka&&ba.showaddcomment&&aa.actorforpost){var la=new k(null,z.id,null,ba),ma=z.authorProfiles[aa.actorforpost];ja=la.renderAddComment(ma,aa.mentionsdatasource,aa.showsendonentertip);}var na=null,oa=ba.showshares&&aa.sharecount&&ca;if(oa)na=s({targetID:aa.targetfbid,shareCount:aa.sharecount,contextArgs:ba});var pa=this.renderPagers(),qa=fa||oa||ha||ka,ra=[pa.topPager,ia,pa.bottomPager];if(ba.scrollcomments&&ba.scrollwidth)ra=g.li({children:j({width:ba.scrollwidth,children:[g.ul({children:ra})]})});return (n({hasNub:ba.shownub&&qa,children:[ga,na,ra,ja]}));},renderCommentMap:function(z,aa){var ba={},ca=0,da=0,ea=function(){if(da>0){var ma={offset:ca,length:da},na=function(oa){this.state.loadingSpamOffsets[oa.offset]=true;this.updateState({});this.props.onSpamFetch(oa);}.bind(this,ma);ba['spam'+ca]=t({onClick:na,numHidden:da,isLoading:!!this.state.loadingSpamOffsets[ca]});ca=0;da=0;}}.bind(this),fa=this.props.instanceid,ga=o.getKeyForInstance(fa,'editcommentid'),ha={};if(r.enabled)ha=o.getKeyForInstance(fa,r.replyComposerUsersName)||{};for(var ia=0;ia<z.length;ia++)if(z[ia].status==m.UFIStatus.SPAM){if(da>0){da++;}else{ca=aa+ia;da=1;}}else{ea();var ja=Math.max(this.props.loggingOffset-ia-aa,0),ka=z[ia],la=ka.id==ga?this.renderEditCommentBox(ka):this.renderComment(ka,ja);ba['comment'+z[ia].id]=la;if(r.enabled&&ha[ka.id])ba['commentr'+z[ia].id]=r.renderReplyComposer(this,ka);}ea();return ba;},renderEditCommentBox:function(z){var aa=new k(null,this.props.id,null,{}),ba=aa.renderEditComment(this.props.authorProfiles[this.props.feedback.actorforpost],z.id,this.props.feedback.mentionsdatasource,this.props.onEditAttempt.bind(null,z),this.props.onCancelEdit);return ba;},renderComment:function(z,aa){var ba=this.props,ca=ba.feedback;z=x({},z);z.author=ba.authorProfiles[z.author];z.viewerIsAuthor=ca.actorforpost===z.author.id;var da=o.getKeyForInstance(this.props.instanceid,'locallycomposed'),ea=z.islocal||da&&da[z.id],fa=ca.showremovemenu||(ca.viewerid===z.author.id),ga=ca.canremoveall&&ca.isownerpage&&!z.viewerIsAuthor,ha=ba.source!=m.UFIFeedbackSourceType.INTERN,ia=u.getTrackingInfo(u.types.COMMENT,aa);return (l({comment:z,feedback:ca,'data-ft':ia,contextArgs:this.props.contextArgs,hideAsSpamForPageAdmin:ga,isLocallyComposed:ea,showPermalink:ha,showRemoveReportMenu:fa,onCommentLikeToggle:ba.onCommentLikeToggle.bind(null,z),onCommentTranslate:ba.onCommentTranslate.bind(null,z),onEdit:ba.onCommentEdit.bind(null,z),onHideAsSpam:ba.onCommentHideAsSpam.bind(null,z),onInlineBan:ba.onCommentInlineBan.bind(null,z),onMarkAsNotSpam:ba.onCommentMarkAsNotSpam.bind(null,z),onOneClickRemove:ba.onCommentOneClickRemove.bind(null,z),onPreviewRemove:ba.onPreviewRemove.bind(null,z),onRemove:ba.onCommentRemove.bind(null,z),onRetrySubmit:ba.onRetrySubmit.bind(null,z),onUndoInlineBan:ba.onCommentUndoInlineBan.bind(null,z),onUndoOneClickRemove:ba.onCommentUndoOneClickRemove.bind(null,z)}));},onPage:function(z){this.updateState({requestRange:z});this.props.onChangeRange(z);},renderPagers:function(){var z=this.props,aa=this.state.requestRange.offset,ba=this.state.requestRange.length,ca=z.availableRange.offset,da=z.availableRange.length,ea=z.deletedCount,fa=z.commentCount,ga=fa-ea,ha=da-ea,ia=z.contextArgs.numberdelimiter||',',ja={topPager:null,bottomPager:null};if(z.source==m.UFIFeedbackSourceType.ADS)return ja;var ka=aa<ca,la=aa+ba>ca+da;if(da==fa)return ja;var ma=(ca+da)==fa;if((fa<z.pageSize&&ma)||ha===0){var na=Math.min(fa,z.pageSize),oa=this.onPage.bind(this,{offset:fa-na,length:na}),pa;if(ga==1){pa="View 1 comment";}else{var qa=h.formatIntegerWithDelimiter(ga,ia);pa=w._("View all {count} comments",{count:qa});}var ra=u.getTrackingInfo(u.types.VIEW_ALL_COMMENTS),sa=q({isUnseen:z.feedback.hasunseencollapsed,isLoading:ka,pagerLabel:pa,onPagerClick:oa,'data-ft':ra});if(z.feedback.isranked){ja.bottomPager=sa;}else ja.topPager=sa;return ja;}if(ca>0){var ta=Math.max(ca-z.pageSize,0),na=ca+da-ta,ua=this.onPage.bind(this,{offset:ta,length:na}),va=h.formatIntegerWithDelimiter(ha,ia),wa=h.formatIntegerWithDelimiter(ga,ia),xa=w._("{countshown} of {totalcount}",{countshown:va,totalcount:wa});if(z.feedback.isranked){ja.bottomPager=q({isLoading:ka,pagerLabel:"View more comments",onPagerClick:ua,countSentence:xa});}else ja.topPager=q({isLoading:ka,pagerLabel:"View previous comments",onPagerClick:ua,countSentence:xa});}if(ca+da<fa){var ya=Math.min(da+z.pageSize,fa-ca),za=this.onPage.bind(this,{offset:ca,length:ya});if(z.feedback.isranked){ja.topPager=q({isLoading:la,pagerLabel:"View previous comments",onPagerClick:za});}else ja.bottomPager=q({isLoading:la,pagerLabel:"View more comments",onPagerClick:za});}return ja;}});e.exports=y;});
__d("UFIController",["ReactDOM","Arbiter","Bootloader","CSS","DOM","DOMQuery","LiveTimer","Parent","React","ReactMount","ShortProfiles","UFI","UFIActionLinkController","UFICentralUpdates","UFIComments","UFIConstants","UFIFeedbackTargets","UFIInstanceState","UFIReplyUtil","UFIUserActions","copyProperties","isEmpty","tx","UFICommentTemplates"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('Arbiter'),i=b('Bootloader'),j=b('CSS'),k=b('DOM'),l=b('DOMQuery'),m=b('LiveTimer'),n=b('Parent'),o=b('React'),p=b('ReactMount'),q=b('ShortProfiles'),r=b('UFI'),s=b('UFIActionLinkController'),t=b('UFICentralUpdates'),u=b('UFIComments'),v=b('UFIConstants'),w=b('UFIFeedbackTargets'),x=b('UFIInstanceState'),y=b('UFIReplyUtil'),z=b('UFIUserActions'),aa=b('copyProperties'),ba=b('isEmpty'),ca=b('tx'),da=c('UFICommentTemplates'),ea=function(ha,ia,ja,ka){var la=ha.offset+ha.length===ia;return {offset:ha.offset,length:(la&&fa(ka))?ja-ha.offset:ha.length};},fa=function(ha){return ha==v.UFIPayloadSourceType.USER_ACTION||ha==v.UFIPayloadSourceType.LIVE_SEND;};function ga(ha,ia,ja){this.root=ha;this.id=ia.ftentidentifier;this.source=ia.source;this._ufiInstanceID=ia.instanceid;this._contextArgs=ia;this._verifiedCommentsExpanded=false;var ka=ja.feedbacktargets[0];this.actionLink=new s(ha,ia,ka);var la=ja.commentlists[this.id];this.commentcount=u.getCommentCount(this.id);this.deletedcount=0;this.range=aa({},la.range);this._loggingOffset=null;this._ufi=null;this.ufiCentralUpdatesSubscriptions=[t.subscribe('feedback-updated',function(ma,na){var oa=na.updates;if(this.id in oa)this.fetchAndUpdate(this.render.bind(this),na.payloadSource);}.bind(this)),t.subscribe('feedback-id-changed',function(ma,na){var oa=na.updates;if(this.id in oa)this.id=oa[this.id];}.bind(this)),t.subscribe('instance-updated',function(ma,na){var oa=na.updates;if(this._ufiInstanceID in oa){var pa=oa[this._ufiInstanceID];if(pa.editcommentid||(y.enabled&&pa[y.replyComposerUsersName]))this.render(na.payloadSource);}}.bind(this))];this.clearPageletSubscription=h.subscribe('ajaxpipe/clear_pagelet',this.onPageletDestroy.bind(this));t.handleUpdate(v.UFIPayloadSourceType.INITIAL_SERVER,ja);i.loadModules(['ScrollAwareDOM'],function(ma){p.scrollMonitor=ma.monitor;});}aa(ga.prototype,{_onTargetLikeToggle:function(event){var ha=!this.feedback.hasviewerliked;z.changeLike(this.id,ha,{source:this.source,target:event.target});event.preventDefault();},_onCommentLikeToggle:function(ha,event){var ia=!ha.hasviewerliked;z.changeCommentLike(ha.id,ia,{source:this.source,target:event.target});},_onCommentEdit:function(ha){x.updateState(this._ufiInstanceID,'isediting',true);x.updateState(this._ufiInstanceID,'editcommentid',ha.id);},_onEditAttempt:function(ha,ia,event){if(!ia.visibleValue){this._onCommentRemove(ha);}else z.editComment(ha.id,ia.visibleValue,ia.encodedValue,{source:this._contextArgs.source,target:event.target});x.updateStateField(this._ufiInstanceID,'locallycomposed',ha.id,true);this._onEditReset();},_onEditReset:function(){x.updateState(this._ufiInstanceID,'isediting',false);x.updateState(this._ufiInstanceID,'editcommentid',null);},_onCommentRemove:function(ha,event){var ia=da[':fb:ufi:hide-dialog-template'].build();k.setContent(ia.getNode('body'),"Are you sure you want to delete this comment?");k.setContent(ia.getNode('title'),"Delete Comment");i.loadModules(['DialogX'],function(ja){var ka=new ja({modal:true,width:465},ia.getRoot());ka.subscribe('confirm',function(){z.removeComment(ha.id,{source:this.source,oneclick:false,target:event.target});ka.hide();}.bind(this));ka.show();});},_onCommentOneClickRemove:function(ha,event){z.removeComment(ha.id,{source:this.source,oneclick:true,target:event.target});},_onCommentUndoOneClickRemove:function(ha,event){var ia=this.feedback.canremoveall&&this.feedback.isownerpage&&!ha.viewerIsAuthor;z.undoRemoveComment(ha.id,ia,{source:this.source,target:event.target});},_onCommentHideAsSpam:function(ha,event){z.setHideAsSpam(ha.id,true,{source:this.source,target:event.target});},_onCommentMarkAsNotSpam:function(ha,event){z.setHideAsSpam(ha.id,false,{source:this.source,target:event.target});},_onCommentTranslate:function(ha,event){z.translateComment(ha,{source:this.source,target:event.target});},_onCommentInlineBanChange:function(ha,ia,event){z.banUser(ha,this.feedback.ownerid,ia,{source:this.source,target:event.target});},_onCommentInlineBan:function(ha,event){this._onCommentInlineBanChange(ha,true,event);},_onCommentUndoInlineBan:function(ha,event){this._onCommentInlineBanChange(ha,false,event);},_fetchSpamComments:function(ha){z.fetchSpamComments(this.id,ha);},_removePreview:function(ha,event){z.removePreview(ha,{source:this.source,target:event.target});},_retrySubmit:function(ha){i.loadModules(['UFIRetryActions'],function(ia){ia.retrySubmit(ha,{source:this.source});}.bind(this));},_ensureCommentsExpanded:function(){if(this._verifiedCommentsExpanded)return;var ha=n.byTag(this.root,'form');if(ha){j.removeClass(ha,'collapsed_comments');this._verifiedCommentsExpanded=true;}},render:function(ha){var ia=this.comments.length||!ba(this.feedback.likesentences.current);if(ia&&fa(ha))this._ensureCommentsExpanded();if(this._loggingOffset===null)this._loggingOffset=this.range.offset+this.comments.length-1;var ja=r({feedback:this.feedback,id:this.id,onTargetLikeToggle:this._onTargetLikeToggle.bind(this),onCommentLikeToggle:this._onCommentLikeToggle.bind(this),onCommentRemove:this._onCommentRemove.bind(this),onCommentHideAsSpam:this._onCommentHideAsSpam.bind(this),onCommentMarkAsNotSpam:this._onCommentMarkAsNotSpam.bind(this),onCommentEdit:this._onCommentEdit.bind(this),onCommentOneClickRemove:this._onCommentOneClickRemove.bind(this),onCommentUndoOneClickRemove:this._onCommentUndoOneClickRemove.bind(this),onCommentTranslate:this._onCommentTranslate.bind(this),onCommentInlineBan:this._onCommentInlineBan.bind(this),onCommentUndoInlineBan:this._onCommentUndoInlineBan.bind(this),onEditAttempt:this._onEditAttempt.bind(this),onCancelEdit:this._onEditReset.bind(this),onChangeRange:this._changeRange.bind(this),onSpamFetch:this._fetchSpamComments.bind(this),onPreviewRemove:this._removePreview.bind(this),onRetrySubmit:this._retrySubmit.bind(this),contextArgs:this._contextArgs,commentCount:this.commentcount,deletedCount:this.deletedcount,availableComments:this.comments,source:this.source,availableRange:this.range,pageSize:v.defaultPageSize,authorProfiles:this.authorProfiles,instanceid:this._ufiInstanceID,loggingOffset:this._loggingOffset});this._ufi=o.renderOrUpdateComponent(ja,this.root);m.updateTimeStamps();},fetchAndUpdate:function(ha,ia){w.getFeedbackTarget(this.id,function(ja){var ka=u.getCommentCount(this.id),la=ea(this.range,this.commentcount,ka,ia);u.getCommentsInRange(this.id,la,function(ma){var na=[];if(ja.actorforpost)na.push(ja.actorforpost);for(var oa=0;oa<ma.length;oa++)if(ma[oa].author)na.push(ma[oa].author);q.getMulti(na,function(pa){this.authorProfiles=pa;this.feedback=ja;this.commentcount=ka;this.deletedcount=u.getDeletedCount(this.id);this.comments=ma;this.range=la;ha(ia);if(ia==v.UFIPayloadSourceType.ENDPOINT_COMMENT_FETCH)h.inform('CommentUFI.Pager');}.bind(this));}.bind(this));}.bind(this));},_changeRange:function(ha){this.range=ha;this.fetchAndUpdate(this.render.bind(this),v.UFIPayloadSourceType.USER_ACTION);},onPageletDestroy:function(ha,ia){if(l.contains(ia.pagelet_id,this.root)){o.destroyAndReleaseReactRootNode(this.root);this.ufiCentralUpdatesSubscriptions.forEach(t.unsubscribe.bind(t));h.unsubscribe(this.clearPageletSubscription);}}});e.exports=ga;});
__d("bindNoArgs",[],function(a,b,c,d,e,f){var g=function(h,i){if(!h)return null;return function(){return h.call(i);};};e.exports=g;});
__d("renderer-renderClassSet",[],function(a,b,c,d,e,f){function g(h,i){var j='',k;if(Array.isArray(h)){for(var l=0;l<h.length;l++){j+=g(h[l],i);i=i||!!j;}}else for(k in h)if(h[k]){if(i)j+=' ';j+=k;i=true;}return j;}e.exports=g;});