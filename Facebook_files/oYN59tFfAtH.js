/*1347249148,173214269*/

if (window.CavalryLogger) { CavalryLogger.start_js(["I++Bd"]); }

var TimelineAggregatePost={init:function(a){Event.listen(a,'click',function(b){var c=b.getModifiers();if(b.isMiddleClick()||c.access||c.meta)return true;var d=Parent.byTag(b.getTarget(),'li');if(!CSS.hasClass(d,"_1ww"))new AsyncRequest().setURI(DataStore.get(d,'url')).send();});},initPage:function(a){Event.listen(a,'click',function(b){var c=Parent.byClass(b.getTarget(),'uiCloseButton');if(c)return;var d=Parent.byTag(b.getTarget(),'li');new AsyncRequest().setURI(DataStore.get(d,'url')).send();});},poke:function(a){ScrollableArea.poke(a);},setScrollHeight:function(a){var b=DOM.find(a,'.sArea');Style.set(b,'height',a.offsetHeight+'px');}};
__d("ComposerXAttachmentBootstrap",["CSS","Form","Parent","URI","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('Form'),i=b('Parent'),j=b('URI'),k=b('cx'),l=[],m={bootstrap:function(n){m.load(i.byTag(n,'form'),n.getAttribute('data-endpoint'));},load:function(n,o,p){var q=j(o).addQueryData({composerurihash:m.getURIHash(o)});g.conditionClass(n,"_fu",p);var r=i.byClass(n,"_2_4");g.removeClass(r,'async_saving');h.setDisabled(n,false);n.action=q.toString();h.bootstrap(n);},getURIHash:function(n){if(n==='initial')return 'initial';var o=l.indexOf(n);if(o!==-1){return o+'';}else{o=l.length;l[o]=n;return o+'';}}};e.exports=m;});
__d("ComposerXStore",["function-extensions","Arbiter","ge"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Arbiter'),h=b('ge'),i={};function j(l,m){return 'ComposerX/'+l+'/'+m;}var k={set:function(l,m,n){if(!i[l])i[l]={};i[l][m]=n;g.inform(j(l,m),{},g.BEHAVIOR_STATE);},get:function(l,m){if(i[l])return i[l][m];return null;},getAllForComposer:function(l){return i[l]||{};},waitForComponents:function(l,m,n){g.registerCallback(n,m.map(j.curry(l)));}};g.subscribe('page_transition',function(){for(var l in i)if(!h(l))delete i[l];});e.exports=k;});
__d("ComposerX",["Arbiter","ComposerXAttachmentBootstrap","ComposerXStore","CSS","DOM","DOMQuery","copyProperties","csx","cx","getObjectValues"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ComposerXAttachmentBootstrap'),i=b('ComposerXStore'),j=b('CSS'),k=b('DOM'),l=b('DOMQuery'),m=b('copyProperties'),n=b('csx'),o=b('cx'),p=b('getObjectValues');function q(r){this._root=r;this._composerID=r.id;this._attachments={};this._attachmentFetchForm=l.find(r,"._2_4");this._resetSubscription=g.subscribe('composer/publish',function(s,t){if(t.composer_id===this._composerID)this.reset();}.bind(this));}m(q.prototype,{_lastEndpointHash:'beforeinit',_lastFetchEndpoint:'',_initialAttachmentAlias:null,getAttachment:function(r,s){var t=h.getURIHash(r);this._lastEndpointHash=t;var u=this._attachments[t];if(u){i.waitForComponents(this._composerID,u.required_components,this._initAttachment.bind(this,u.instance,t,u.placeholders));return;}if(r!==this._lastFetchEndpoint&&r!=='initial'){h.load(this._attachmentFetchForm,r,s);this._lastFetchEndpoint=r;}},setAttachment:function(r,s,t,u){s.setComposerID(this._composerID);this._attachments[r]={instance:s,placeholders:t,required_components:u};if(r==='initial'){if(this._initialAttachmentAlias){var v=h.getURIHash(this._initialAttachmentAlias);this._attachments[v]=this._attachments.initial;}if(this._currentInstance)return;}var w=l.find(this._root,"div._118"),x=s.getRoot();if(x.parentNode!==w){j.hide(x);k.appendContent(w,x);}i.waitForComponents(this._composerID,u,this._initAttachment.bind(this,s,r,t));},setComponent:function(r,s){if(!i.get(this._composerID,r)){i.set(this._composerID,r,s);k.appendContent(this._attachmentFetchForm,k.create('input',{type:'hidden',name:'loaded_components[]',value:r}));}},reset:function(){if(this._currentInstance){this._currentInstance.cleanup();this._currentInstance=null;}for(var r in this._attachments)this._attachments[r].instance.reset();var s=i.getAllForComposer(this._composerID);p(s).forEach(function(t){if(t.reset)t.reset(t);});this.getAttachment('initial');g.inform('composer/reset');},destroy:function(){if(this._resetSubscription){this._resetSubscription.unsubscribe();this._resetSubscription=null;}},addPlaceholders:function(r,s){var t;for(var u in this._attachments){t=this._attachments[u];if(t.instance===r){s.forEach(function(v){t.placeholders.push(v);t.required_components.push(v.component_name);});break;}}if(this._currentInstance===r)this._fillPlaceholders(s);},setInitialAttachmentAlias:function(r){this._initialAttachmentAlias=r;if(this._attachments.initial){var s=h.getURIHash(r);this._attachments[s]=this._attachments.initial;}},_initAttachment:function(r,s,t){if(this._currentInstance===r||(this._lastEndpointHash!=='beforeinit'&&this._lastEndpointHash!==s))return;if(this._currentInstance){if(!this._currentInstance.canSwitchAway())return;this._currentInstance.cleanup();}this._currentInstance=r;var u=l.find(this._root,"div._118"),v=u.childNodes,w=r.getRoot();for(var x=0;x<v.length;x++)if(v[x]!==w)j.hide(v[x]);j.show(w);this._fillPlaceholders(t);r.initWithComponents(s==='initial');this._setAttachmentSelectedClass(r.attachmentClassName);g.inform('composer/initializedAttachment',{composerRoot:this._root,isInitial:s==='initial'});},_fillPlaceholders:function(r){r.forEach(function(s){var t=i.get(this._composerID,s.component_name);if(s.element!==t.element.parentNode)k.setContent(s.element,t.element);}.bind(this));},_setAttachmentSelectedClass:function(r){var s=l.scry(this._root,"._4n")[0];if(s)j.removeClass(s,"_4n");if(r){var t=l.scry(this._root,'.'+r)[0];if(t)j.addClass(t,"_4n");}}});e.exports=q;});
__d("ComposerXController",["Arbiter","ComposerX","ComposerXAttachmentBootstrap","Parent","$","cx","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ComposerX'),i=b('ComposerXAttachmentBootstrap'),j=b('Parent'),k=b('$'),l=b('cx'),m=b('ge'),n={};function o(q){var r=j.byClass(k(q),"_119"),s=r.id;if(!n[s])n[s]=new h(r);return n[s];}var p={getAttachment:function(q,r,s){var t=o(q);t.getAttachment(r,s);},setAttachment:function(q,r,s,t,u){var v=o(q);v.setAttachment(r,s,t,u);},setComponent:function(q,r,s){var t=o(q);t.setComponent(r,s);},reset:function(q){var r=o(q);r.reset();},setInitialAttachmentAlias:function(q,r){var s=o(q);s.setInitialAttachmentAlias(r);},holdTheMarkup:bagofholding,getEndpoint:function(q,r,s){var t=o(q);i.load(t._attachmentFetchForm,r,s);},addPlaceholders:function(q,r,s){var t=o(q);t.addPlaceholders(r,s);}};i.bootstrap=function(q){p.getAttachment(q,q.getAttribute('data-endpoint'));};g.subscribe('page_transition',function(){for(var q in n)if(!m(q)){n[q].destroy();delete n[q];}});e.exports=p;});
__d("MessageButton",["event-extensions","Chat","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Chat'),h=b('copyProperties');function i(){}h(i,{initChat:function(j,k,l){Event.listen(j,'click',function(){g.openTab(k,l,'friend');return false;});}});e.exports=i;});
__d("requestAnimationFrame",[],function(a,b,c,d,e,f){var g=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(h){window.setTimeout(h,16);};e.exports=g;});
__d("ProfilePOPAlbumEducationDialog",["event-extensions","AsyncRequest"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h={listen:function(i,j){Event.listen(i,'click',function(){j.show();new g().setURI('/ajax/profile/picture/record_seen_nux/').send();});}};e.exports=h;});
requireLazy(['Selector'],function(a){add_properties('__behaviors',{});if(__behaviors.TimelineCurationControl)return;__behaviors.TimelineCurationControl=true;a.subscribe('open',function(b,c){var d=c.selector,e=c.clone||d,f=Parent.byClass(e,'fbTimelineCurationControl');if(f){CSS.addClass(f,'editControlsMenuOpen');var g=a.subscribe('close',function(h,i){if(i.selector==d){a.unsubscribe(g);CSS.removeClass.curry(f,'editControlsMenuOpen').defer();}});}});});
__d("TimelineSmartInsert",["CSS","DOM","Run","UserAgent","Vector"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Run'),j=b('UserAgent'),k=b('Vector'),l=false,m=false;function n(){if(m)return;i.onLeave(o);m=true;}function o(){l=false;m=false;}var p={BUFFER:100,run:function(q,r){n();if(!l||j.ie()<=8){r();return;}var s=q.offsetHeight;r();var t=q.offsetHeight;if(t-s!==0&&k.getElementPosition(q).y+s<k.getScrollPosition().y+p.BUFFER)window.scrollBy(0,t-s);},enable:function(){l=true;}};e.exports=p;});
__d("TimelineContentLoader",["event-extensions","function-extensions","Arbiter","CSS","DOM","DOMScroll","OnVisible","ScrollingPager","TimelineConstants","TimelineController","TimelineSmartInsert","TimelineURI","UIPagelet","UserAgent","Vector","$","copyProperties","createArrayFrom","debounce","ge","startsWith","tx","userAction"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('DOMScroll'),k=b('OnVisible'),l=b('ScrollingPager'),m=b('TimelineConstants'),n=b('TimelineController'),o=b('TimelineSmartInsert'),p=b('TimelineURI'),q=b('UIPagelet'),r=b('UserAgent'),s=b('Vector'),t=b('$'),u=b('copyProperties'),v=b('createArrayFrom'),w=b('debounce'),x=b('ge'),y=b('startsWith'),z=b('tx'),aa=b('userAction'),ba=false,ca=false,da,ea={},fa=null,ga={},ha=[],ia=[],ja={},ka={},la={},ma={},na=null,oa=null,pa=false,qa=null;function ra(ab,bb,cb,db,eb){this.node=ab;this.loaded=db;this.canScrollLoad=true;this.canUnload=bb!=za.RECENT;this.scrubberKey=bb;this.historicUnitCount=eb;this._pageletLoadData=cb;this._expandPageletLoadData={};}u(ra.prototype,{load:function(ab){if(this.loaded)return;var bb=this._pageletLoadData;g.inform(n.SECTION_LOADING,{data:bb,scrubberKey:this.scrubberKey});this.loaded=true;h.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');h.removeClass(this.node,'fbTimelineTimePeriodSuppressed');var cb='ProfileTimelineSectionPagelet';if(this.scrubberKey==za.WAY_BACK)cb='ProfileTimelineRemainingYearsPagelet';bb.time_cutoff=za.getTimeCutoff();bb.highlight_unit_data=ab;bb.parent_key=this.parentKey;bb.force_no_friend_activity=pa;h.addClass(this.node,'fbTimelineSectionLoading');if(this.canUnload&&ca){var db=this.node.firstChild.cloneNode(true);h.hide(db);i.insertAfter(this.node,db);}else this.canScrollLoad=false;la[this.scrubberKey]=q.loadFromEndpoint(cb,this.node.id,bb,{usePipe:true,jsNonblock:true,constHeight:true});ya(this.scrubberKey);},preload:function(){h.addClass(this.node,'fbTimelineTimePeriodSuppressed');h.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');var ab=i.find(this.node,'span.sectionLabel');if(ab.getAttribute('data-original-label')){i.setContent(ab,ab.getAttribute('data-original-label'));ab.removeAttribute('data-original-label');}},unload:function(){if(!this.loaded||!this.canUnload)return;this.loaded=false;la[this.scrubberKey]&&la[this.scrubberKey].cancel();h.addClass(this.node,'fbTimelineTimePeriodUnexpanded');h.removeClass(this.node,'fbTimelineTimePeriodSuppressed');if(this.node.nextSibling&&h.hasClass(this.node.nextSibling,'fbTimelineSection')){i.setContent(this.node,this.node.nextSibling);h.show(this.node.firstChild);}else i.empty(this.node);this.deactivateScrollLoad();},activateScrollLoad:function(){this.canScrollLoad=true;h.removeClass(this.node,'fbTimelineTimePeriodSuppressed');h.addClass(this.node,'fbTimelineTimePeriodUnexpanded');ka[this.scrubberKey]&&ka[this.scrubberKey].reset();},deactivateScrollLoad:function(){if(!this.loaded){this.canScrollLoad=false;h.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');h.addClass(this.node,'fbTimelineTimePeriodSuppressed');ka[this.scrubberKey]&&ka[this.scrubberKey].remove();}},setExpandLoadData:function(ab){this._expandPageletLoadData=ab;return this;},expandSubSections:function(){if(this.subSections.length)za.navigateToSection(this.subSections[0].scrubberKey);},expand:function(ab){if(!this.loaded)return;oa.add_event('expand_'+this.scrubberKey);var bb=i.find(this.node,'.fbTimelineSectionExpander');h.addClass(bb.firstChild,'async_saving');ab&&h.addClass(ab,'async_saving');this._expandPageletLoadData.time_cutoff=za.getTimeCutoff();za.navigateToSection(this.scrubberKey);i.scry(this.node,'ol.fbTimelineCapsule').forEach(i.remove);this._expandPageletLoadData.new_expand=true;la[this.scrubberKey]&&la[this.scrubberKey].cancel();la[this.scrubberKey]=q.loadFromEndpoint('ProfileTimelineSectionPagelet',bb.id,this._expandPageletLoadData,{usePipe:true,jsNonblock:true,constHeight:true});},isPermalinkPeriod:function(){return this._pageletLoadData.is_permalink_period;}});function sa(){if(ba)return;n.register(n.CONTENT,za);oa=aa('timeline').uai('init','scrubber',false);ba=true;if(r.ie()<=7)ca=true;}var ta=w(function(ab,bb,cb){var db=za.getSection(ab).historicUnitCount;bb-=db;cb-=1;if(db==-1||cb<=0||bb<0)return;var eb=za.getNextSectionKey(ab);if(eb){za.getSection(eb).load();ta(eb,bb,cb);}},500);function ua(ab,bb,cb,db){var eb=za.getNextSectionKey(bb);if(eb){ka[eb]=new k(ab,va.curry(eb,ab),false,cb||1000);}else if(bb!==za.WAY_BACK){db=db?db:0;if(db>80)return null;ua.curry(ab,bb,cb,db+1).defer(250);}}function va(ab,bb){if(ea[ab].canScrollLoad){oa.add_event("scroll_load_"+ab);if(ca){za.getSection(ab).preload();}else{za.getSection(ab).load();if(qa)ta(ab,qa.required_units,qa.max_parallelism);}bb&&i.remove(bb);}}function wa(){var ab,bb,cb=false;for(var db=0;db<ha.length;db++){var eb=ha[db];if(!eb)continue;var fb=za.getSection(eb);if(fb.canScrollLoad||fb.loaded){if(!fb.loaded){h.removeClass(fb.node,'fbTimelineTimePeriodSuppressed');h.addClass(fb.node,'fbTimelineTimePeriodUnexpanded');}if(ab&&bb){xa(ab,bb);if(cb)ab.deactivateScrollLoad();cb=true;}ab=null;bb=null;continue;}else if(ab){bb=fb;fb.deactivateScrollLoad();}else{ab=fb;if(cb)fb.activateScrollLoad();}h.removeClass(fb.node,'fbTimelineTimePeriodSuppressed');h.addClass(fb.node,'fbTimelineTimePeriodUnexpanded');}}function xa(ab,bb){h.removeClass(bb.node,'fbTimelineTimePeriodUnexpanded');h.addClass(bb.node,'fbTimelineTimePeriodSuppressed');var cb=i.find(ab.node,'span.sectionLabel'),db=i.find(bb.node,'span.sectionLabel');if(!db.getAttribute('data-original-label'))db.setAttribute('data-original-label',i.getText(db));if(cb.getAttribute('data-month')&&db.getAttribute('data-month')&&cb.getAttribute('data-year')==db.getAttribute('data-year')){i.setContent(db,z._("Show {month1} - {month2} {year}",{month1:db.getAttribute('data-month'),month2:cb.getAttribute('data-month'),year:cb.getAttribute('data-year')}));}else if(cb.getAttribute('data-year')!==db.getAttribute('data-year')){i.setContent(db,z._("Show {year1} - {year2}",{year1:db.getAttribute('data-year'),year2:cb.getAttribute('data-year')}));}else i.setContent(db,z._("Show {year}",{year:db.getAttribute('data-year')}));}function ya(ab){if(ca)for(var bb=0;bb<ha.length-1;bb++){var cb=ha[bb];if(!cb)continue;if(cb!=ab){var db=ea[cb];if(db.loaded&&db.canUnload)db.unload();}}wa();}var za={WAY_BACK:'way_back',RECENT:'recent',HEADER_SCROLL_CUTOFF:80,CURRENT_SECTION_OFFSET:150,FOOTER_HEIGHT:60,registerTimePeriod:function(ab,bb,cb,db,eb,fb,gb){sa();if(ia.contains(bb))return;var hb=new ra(ab,bb,cb,db,gb);if(!eb){ha[fb]=bb;ga[bb]=true;}else{hb.parentKey=eb;ea[eb].subSections=ea[eb].subSections||[];ea[eb].subSections[fb]=hb;}ea[bb]=hb;za.checkCurrentSectionChange();g.inform(n.SECTION_REGISTERED,{scrubberKey:bb});n.registerSectionKey(bb,fb);},reset:function(){for(var ab in ka)ka[ab].remove();for(var bb in la)la[bb]&&la[bb].cancel();for(var cb in ma){ma[cb].unsubscribe();delete ma[cb];}da&&da.unsubscribe();da=null;ea={};fa=null;ga={};ha=[];ia=[];ja={};ka={};la={};na=null;oa=null;pa=false;ba=false;},checkCurrentSectionChange:function(){var ab=za.getCurrentSection(),bb=fa&&fa.scrubberKey;if(ab&&ab.scrubberKey!==bb&&!ab.isPermalinkPeriod()){fa=ab;var cb=ab.scrubberKey,db=ab.parentKey;if(!db){db=cb;cb=null;}n.sectionHasChanged(db,cb);}},setTimeCutoff:function(ab){na=ab;},getTimeCutoff:function(){return na;},setParallelLoadConfig:function(ab){qa=ab;},getCurrentSection:function(){var ab={};for(var bb in ea){var cb=ea[bb];if(!cb.loaded||ja[cb.scrubberKey])continue;var db=s.getElementPosition(cb.node,'viewport').y;if(cb.scrubberKey=='recent')db--;if(db<za.CURRENT_SECTION_OFFSET)ab[db]=cb;}var eb=Math.max.apply(null,Object.keys(ab)),fb=eb==-Infinity;if(!fb){return ab[eb];}else if(ha[0])return ea[ha[0]];return null;},capsuleForCurrentSection:function(){var ab=za.getCurrentSection();return ab&&i.scry(ab.node,'ol.fbTimelineCapsule')[0];},enableScrollLoad:function(ab,bb,cb,db){ab=t(ab);var eb=i.scry(ab.parentNode,'ol.fbTimelineCapsule')[0];if(!eb)return;if(cb===null){ua(ab,bb,db);}else n.runOnceWhenSectionFullyLoaded(ua.curry(ab,bb,db),bb,cb);},enableScrollLoadOnClick:function(ab,bb,cb){ab=t(ab);Event.listen(ab,'click',function(db){db.preventDefault();za.enableScrollLoad(ab,bb,null,cb);});},expandSectionOnClick:function(ab,bb){Event.listen(ab,'click',function(cb){cb.preventDefault();za.getSection(bb).expand();});},expandSubSectionsOnClick:function(ab,bb){Event.listen(ab,'click',function(cb){cb.preventDefault();za.getSection(bb).expandSubSections();});},getSection:function(ab){return ea[ab];},getNextSectionKey:function(ab){for(var bb=0;bb<ha.length-1;bb++)if(ha[bb]==ab){while(bb<ha.length-1&&!ha[bb+1])bb++;return ha[bb+1];}var cb=za.getSection(ab);if(!cb||!cb.parentKey)return;var db=za.getSection(cb.parentKey);if(!db)return;for(var eb=0;eb<db.subSections.length-1;eb++)if(db.subSections[eb].scrubberKey==ab)return db.subSections[eb+1].scrubberKey;},hideSection:function(ab){var bb=za.getSection(ab);bb&&h.hide(bb.node);var cb=n.getCurrentScrubber();if(cb){var db=n.getCurrentScrubber().getNav(ab);db&&h.hide(db);}var eb=n.getCurrentStickyHeaderNav();eb&&eb.removeTimePeriod(ab);ja[ab]=true;},loadSectionOnClick:function(ab,bb){Event.listen(ab,'click',function(cb){cb.preventDefault();za.getSection(bb).load();});},removeSection:function(ab){for(var bb in ha)if(ha[bb]==ab){ha[bb]=null;break;}delete ea[ab];delete ga[ab];if(ab in ka){ka[ab].remove();delete ka[ab];}var cb=n.getCurrentStickyHeaderNav();cb&&cb.removeTimePeriod(ab);ia.push(ab);},removeSectionParent:function(ab){i.remove(t(ab).parentNode);},navigateToSection:function(ab,bb,cb){oa.add_event("nav_"+ab);bb=!!bb;var db=ab,eb=za.getSection(ab);if(!eb)return;if(!eb.loaded)o.enable();if(!ga[ab]){eb.node.style.minHeight=s.getViewportDimensions().y+'px';var fb=g.subscribe(n.SECTION_FULLY_LOADED,function(nb,ob){if(ob.scrubberKey===ab){eb.node.style.minHeight='';fb.unsubscribe();}});db=eb.parentKey;var gb=za.getSection(db).node;if(!h.hasClass(gb,'fbTimelineSectionExpanded')){j.scrollTo(gb,0);h.addClass(gb,'fbTimelineSectionExpanded');i.scry(gb,'ol.fbTimelineCapsule').forEach(i.remove);i.scry(gb,'div.fbTimelineSectionExpandPager').forEach(i.remove);i.scry(gb,'div.fbTimelineContentHeader').forEach(i.remove);}var hb=za.getNextSectionKey(db);if(hb&&ka[hb])ka[hb].setBuffer(0);}for(var ib=0;ib<ha.length;ib++){var jb=ha[ib];if(!jb)continue;if(jb==db)break;za.getSection(jb).deactivateScrollLoad();i.scry(t('timeline_tab_content'),'.fbTimelineSectionExpandPager').forEach(function(nb){var ob=l.getInstance(nb.id);ob&&ob.removeOnVisible();});}za.adjustContentPadding();eb.load(cb);wa();var kb=s.getScrollPosition().x,lb=s.getElementPosition(eb.node).y;if(!bb){var mb=ga[ab]?m.SCROLL_TO_OFFSET:m.SUBSECTION_SCROLL_TO_OFFSET;j.scrollTo(new s(kb,lb-mb,'document'),true,false,false,function(){var nb=s.getElementPosition(eb.node).y;j.scrollTo(new s(kb,nb-mb,'document'),false);var ob=i.scry(eb.node,'h3.uiHeaderTitle')[0];ob&&ob.focus();});}},adjustContentPadding:function(){var ab=x('timeline_tab_content');if(!ab)return;var bb=n.getCurrentKey()||p.TIMELINE_KEY;if(bb!==p.TIMELINE_KEY)return;var cb=ha.length-1,db=za.getSection(ha[cb]);ab.style.paddingBottom=db&&db.loaded?null:s.getViewportDimensions().y-za.CURRENT_SECTION_OFFSET-za.HEADER_SCROLL_CUTOFF-za.FOOTER_HEIGHT+'px';},adjustContentPaddingAfterLoad:function(ab,bb){n.runOnceWhenSectionFullyLoaded(za.adjustContentPadding,ab,bb);},appendContentAfterLoad:function(ab,bb,cb){n.runOnceWhenSectionFullyLoaded(i.appendContent.curry(t(ab),bb),cb,'0');},markSectionAsLoaded:function(ab,bb,cb){n.runOnceWhenSectionFullyLoaded(function(){x(ab)&&h.removeClass(t(ab).parentNode,'fbTimelineSectionLoading');},bb,cb);},suppressSectionsAbove:function(ab){var bb,cb;for(var db=0;db<ha.length;db++){var eb=ha[db];if(!eb)continue;bb=za.getSection(eb).node;cb=null;if(v(ab.parentNode.children).indexOf(ab)<=v(bb.parentNode.children).indexOf(bb)){cb=eb;break;}za.getSection(eb).deactivateScrollLoad();}if(cb)za.navigateToSection(cb,true);},forceNoFriendActivity:function(){pa=true;},removeDupes:function(ab){var bb=x(ab);if(!bb)return;var cb=i.scry(bb,'li.fbTimelineUnit'),db={};for(var eb=0;eb<cb.length;eb++){var fb=cb[eb];if(fb.id&&y(fb.id,'tl_unit_')){var gb=fb.id.substring(8,fb.id.length),hb=(fb.getAttribute('data-unit')=='ExperienceSummaryUnit'?fb.getAttribute('data-time'):1);if(db.hasOwnProperty(gb)&&db[gb]==hb){i.remove(fb);}else db[gb]=hb;}}},removeLoadingState:function(ab){x(ab)&&h.removeClass(t(ab),'fbTimelineSectionLoading');},setExpandLoadDataForSection:function(ab,bb){var cb=za.getSection(ab);cb&&cb.setExpandLoadData(bb);},updatePagerAfterLoad:function(ab,bb,cb,db){if(!l.getInstance(ab.firstChild.id))ma[ab.firstChild.id]=g.subscribe(l.REGISTERED,function(eb,fb){ma[ab.firstChild.id].unsubscribe();delete ma[ab.firstChild.id];if(fb.id===ab.firstChild.id)za.updatePagerAfterLoad(ab,bb,cb,db);});n.runOnceWhenSectionFullyLoaded(h.removeClass.curry(ab,'fbTimelineHiddenPager'),cb,db);n.runOnceWhenSectionFullyLoaded(n.adjustScrollingPagerBuffer.curry(ab.firstChild.id,bb),cb,db);}};e.exports=za;});
__d("TimelineCapsule",["$","Arbiter","createArrayFrom","CSS","DataStore","DOM","DOMQuery","DOMScroll","Parent","TimelineConstants","TimelineContentLoader","TimelineController","UserAgent","Vector","isEmpty","requestAnimationFrame"],function(a,b,c,d,e,f){var g=b('$'),h=b('Arbiter'),i=b('createArrayFrom'),j=b('CSS'),k=b('DataStore'),l=b('DOM'),m=b('DOMQuery'),n=b('DOMScroll'),o=b('Parent'),p=b('TimelineConstants'),q=b('TimelineContentLoader'),r=b('TimelineController'),s=b('UserAgent'),t=b('Vector'),u=b('isEmpty'),v=b('requestAnimationFrame'),w=(function(){var x=45,y=15,z='use',aa='update',ba={},ca={};function da(qa){return j.hasClass(qa,'fbTimelineBalancer');}function ea(qa){return qa.getAttribute('data-spine');}function fa(qa){return j.hasClass(qa,'placeholderUnit');}function ga(qa,ra){if(ra)return (k.get(p.DS_SIDEORG,qa.id)||qa.getAttribute('data-side'));return qa.getAttribute('data-side');}var ha=function(qa,ra){if(s.ie()<=6){ha=function(sa,ta){k.set(p.DS_SIDEORG,sa.id,ga(sa,true));sa.setAttribute('data-side',ta);j.removeClass(sa,'leftColumn');j.removeClass(sa,'rightColumn');j.addClass(sa,ta=='l'?'leftColumn':'rightColumn');};}else ha=function(sa,ta){k.set(p.DS_SIDEORG,sa.id,ga(sa,true));sa.setAttribute('data-side',ta);};ha(qa,ra);};function ia(qa){return qa.getAttribute('data-size');}function ja(qa){if(j.hasClass(qa,'fbTimelineOneColumn')&&qa.prevSibling&&j.hasClass(qa.prevSibling,'fbTimelineOneColumn'))return y*2;if(j.hasClass(qa,'fbTimelineIndeterminateContent'))return 0;return y;}function ka(qa,ra){var sa=0;if(j.shown(qa)&&!j.hasClass(qa,'placeholderUnit'))if(ra===z){sa=k.get(p.DS_HEIGHT,qa.id,null);if(sa===null)sa=qa.getAttribute('data-calculatedheight');}else sa=qa.offsetHeight+ja(qa);if(ra===z&&sa===null)sa=300;k.set(p.DS_HEIGHT,qa.id,parseInt(sa,10));}function la(qa){var ra=k.get(p.DS_HEIGHT,qa.id,null);return ra;}function ma(qa,ra){if(ia(ra)=='2'){return 0;}else if(ga(ra)=='r'){return qa+la(ra);}else return qa-la(ra);}function na(qa){for(var ra=0;ra<qa.childNodes.length;ra++){var sa=qa.childNodes[ra];if(!sa.getAttribute('data-endmarker'))continue;var ta=sa.getAttribute('data-endmarker'),ua=sa.getAttribute('data-pageindex'),va=function(){k.set(p.DS_LOADED,qa.id,ua);l.remove(sa);h.inform(r.SECTION_FULLY_LOADED,{scrubberKey:ta,pageIndex:ua,capsuleID:qa.id,childCount:qa.childNodes.length});};if(q.getSection(ta)){va();}else var wa=h.subscribe(r.SECTION_REGISTERED,function(xa,ya){if(ya.scrubberKey===ta){va();wa.unsubscribe();}});break;}h.inform('TimelineCapsule/balanced',{capsule:qa});}function oa(qa){if(u(ba[qa.id]))return;var ra=da(qa)?qa.firstChild:qa,sa=ra.childNodes.length,ta={},ua={},va,wa=y,xa=y,ya,za=[];for(var ab=0;ab<sa;ab++){va=ra.childNodes[ab];if(j.hasClass(va,'fbTimelineUnit')){ya=m.scry(va,'div.timelineUnitContainer')[0];if(ya)ua[va.id]=ya.getAttribute('data-time');if(!fa(va)&&j.shown(va)){if(ia(va)=='2'){ta[va.id]=Math.max(wa,xa);wa=xa=ta[va.id]+la(va);}else if(ga(va)=='r'){ta[va.id]=xa;xa+=la(va);}else{ta[va.id]=wa;wa+=la(va);}if(ga(va,true)=='l'||ia(va)=='2')za.push(va.id);}}}for(ab=0;ab<za.length-1;++ab){var bb=za[ab],cb=za[ab+1],db=ta[bb]+x,eb=ta[cb];for(var fb in ba[qa.id]){if(db>eb)break;var gb=ba[qa.id][fb];if(j.shown(gb))continue;if(ua[fb]<=ua[bb]&&ua[fb]>ua[cb]){gb.style.top=db+"px";db+=x;j.show(gb);}}}}function pa(qa,ra){var sa=o.byAttribute(qa,'data-size');if(sa){if(j.hasClass(qa.parentNode,'timelineReportContent')){ra(qa);}else ra(sa);w.balanceCapsule(o.byClass(sa,'fbTimelineCapsule'));}}return {getUnitsWithTime:function(qa){return m.scry(qa,'div.timelineUnitContainer').filter(function(ra){return (ra.parentNode.parentNode===qa&&ra.getAttribute('data-time'));});},removeUnit:function(qa){pa(qa,function(ra){l.remove(ra);});},hideUnit:function(qa){pa(qa,function(ra){j.addClass(ra,'fbTimelineColumnHidden');});},undoHideUnit:function(qa,ra){l.remove(o.byClass(ra,'hiddenText'));pa(qa,function(sa){j.removeClass(sa,'fbTimelineColumnHidden');});},unplacehold:function(qa){var ra=g(qa);ra.style.top=null;j.removeClass(ra,'visiblePlaceholder');j.removeClass(ra,'placeholder');var sa=o.byClass(ra,'fbTimelineCapsule');delete ba[sa.id][qa];w.balanceCapsule(sa);},scrollToCapsule:function(qa){if(!ca.hasOwnProperty(qa.id)){var ra=t.getElementPosition(qa.parentNode);n.scrollTo(new t(t.getScrollPosition().x,ra.y-p.SUBSECTION_SCROLL_TO_OFFSET,'document'));ca[qa.id]=true;}},setFirstUnit:function(qa){var ra=true,sa=qa.childNodes.length;for(var ta=0;ta<sa;ta++){var ua=qa.childNodes[ta];if(ua.id.indexOf('tl_unit_')===0)if(ra){ra=false;j.addClass(ua,'firstUnit');}else{j.removeClass(ua,'firstUnit');break;}}},balanceCapsuleFromChild:function(qa,ra){w.balanceCapsule(o.byClass(qa,'fbTimelineCapsule'),ra);},balanceCapsule:function(qa,ra){if(!qa)return;var sa=0,ta,ua=document.createDocumentFragment(),va=[],wa=[],xa=[],ya=false,za=ra&&ra.heights_action;if(za!==aa&&(s.chrome()||s.safari()))j.toggleClass(qa,'webkitFix');for(var ab=0;ab<qa.childNodes.length;ab++){ta=qa.childNodes[ab];if(ea(ta)){continue;}else if(da(ta)){i(ta.firstChild.childNodes).forEach(function(ib){ka(ib,za);});continue;}ka(ta,za);if(ga(ta,true)=='r'){wa.push(ta);}else va.push(ta);xa.push(ta);if(ia(ta)!='2')if((sa>0&&ga(ta)=='r')||(sa<0&&ga(ta)=='l'))ya=true;sa=ma(sa,ta);}var bb=[],cb=[],db=[];m.scry(qa,'li.fbTimelineBalancer').forEach(function(ib){var jb=i(ib.firstChild.childNodes);if(ib.getAttribute('data-nonunits')){db=db.concat(jb);}else if(ga(ib)=='left'){bb=bb.concat(jb);}else if(ga(ib)=='right')cb=cb.concat(jb);});if(ya){qa.style.minHeight=qa.offsetHeight;va.forEach(function(ib){if(ia(ib)!='2')ha(ib,'l');});wa.forEach(function(ib){if(ia(ib)!='2')ha(ib,'r');});var eb=l.create('li',{className:'fbTimelineBalancer'},l.create('ol',null,va));eb.setAttribute('data-side','left');l.prependContent(qa,eb);bb=va.concat(bb);var fb=l.create('li',{className:'fbTimelineBalancer'},l.create('ol',null,wa));fb.setAttribute('data-side','right');l.prependContent(qa,fb);cb=wa.concat(cb);sa=0;}while((sa>=0&&bb.length)||(sa<0&&cb.length)){if(sa>=0){ta=bb.shift();}else ta=cb.shift();ua.appendChild(ta);sa=ma(sa,ta);}while(db.length)ua.appendChild(db.shift());qa.appendChild(ua);m.scry(qa,'li.fbTimelineBalancer').forEach(function(ib){if(!ib.firstChild.childNodes.length)l.remove(ib);});var gb;if(ra&&ra.tail_balance){gb=ra.tail_balance;}else if(k.get(p.DS_TAILBALANCE,qa.id))gb=p.FIXED_SIDE_BOTH;if(gb)sa=w.tailBalance(qa,sa,gb);if(ya){xa.forEach(function(ib){if(ib.parentNode!==qa){qa.appendChild(ib);sa=ma(sa,ib);}});qa.style.minHeight=null;}var hb=o.byClass(qa,'fbTimelineSection');if(hb)k.set(p.DS_COLUMN_HEIGHT_DIFFERENTIAL,hb.id,sa);ba[qa.id]={};m.scry(qa,'li.placeholderUnit').forEach(function(ib){ba[qa.id][ib.id]=ib;});oa(qa);na(qa);if(za===z){ra.heights_action=aa;v(function(){v(w.balanceCapsule.curry(qa,ra));});}},tailBalance:function(qa,ra,sa){if(!qa)return ra;var ta=[],ua=[],va=[],wa=[];m.scry(qa,'li.fbTimelineBalancer').forEach(function(ya){var za=i(ya.firstChild.childNodes);if(ya.getAttribute('data-nonunits')){wa=wa.concat(za);}else if(ga(ya)=='left'){ua=ua.concat(za);}else if(ga(ya)=='right')va=va.concat(za);ta=ta.concat(za);});if((sa==p.FIXED_SIDE_RIGHT&&ua.length)||(sa==p.FIXED_SIDE_LEFT&&va.length))return ra;var xa=document.createDocumentFragment();if(ta)while(ta.length){if(ia(ta[0])!='2')if(ra>=0){ha(ta[0],'l');}else ha(ta[0],'r');ra=ma(ra,ta[0]);xa.appendChild(ta.shift());}qa.appendChild(xa);m.scry(qa,'li.fbTimelineBalancer').forEach(function(ya){if(!ya.firstChild.childNodes.length)l.remove(ya);});k.set(p.DS_TAILBALANCE,qa.id,true);return ra;}};})();e.exports=a.TimelineCapsule||w;});
__d("TimelineComposerUtilities",["event-extensions","Arbiter","Bootloader","CSS","DOM","DOMQuery","Parent","TimelineCapsule","Vector","cx","csx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('DOMQuery'),l=b('Parent'),m=b('TimelineCapsule'),n=b('Vector'),o=b('cx'),p=b('csx'),q=86400*31,r=86400000,s={listenToSetEstimatedDate:function(t,u){return g.subscribe('ComposerXTimelineTagger/init',function(v,w){if(k.contains(t,w.datePickerElement)){s.setEstimatedDate(w.datePickerInstance,u());w.composerTimelineTagger.switchToTagger('date');}});},listenToSetEstimatedDateOld:function(t,u){return g.subscribe('TimelineBackdatedComposerTagger/initialized',function(event,v){if(v.composer===t)v.date_picker.subscribe('initialized',function(w,x){s.setEstimatedDate(x,u());});});},listenToPublish:function(t,u){if(t.root)t=t.root;return g.subscribe('composer/publish',function(event,v){if(v.composer_id===t.id)h.loadModules(['TimelineStoryPublisher'],function(w){w.publish(v);u&&u();});});},listenToAnotherComposerOpen:function(t,u){return g.subscribe('composer/mutate',function(v,w){if(w!==t)u();});},listenToCancel:function(t,u){return Event.listen(t,'click',function(event){if(l.byClass(event.getTarget(),"_306"))u();});},listenToCancelOld:function(t,u){return Event.listen(t,'click',function(event){l.byClass(event.getTarget(),'cancelBtn')&&u();});},hidePlaceIfAttachmentsTooTall:function(t){var u=k.find(t,"._2_3"),v=n.getElementDimensions(u).y;if(v>50)i.hide(k.find(u,"._mg"));},hidePlaceIfAttachmentsTooTallOld:function(t){var u=j.find(t,'ul.fbTimelineComposerAttachments'),v=n.getElementDimensions(u).y;if(v>50){var w=l.byTag(j.scry(u,'span.placeAttachment')[0],'li');w&&i.hide(w);}},setEstimatedDate:function(t,u){var v,w;if(u&&i.hasClass(u,'fbTimelineCapsule')){v=u.getAttribute('data-start');w=u.getAttribute('data-end');if(v&&w){var x=new Date(w*1000);if(w-v>2*q){t.setDate(x.getFullYear());}else t.setDate(x.getFullYear(),x.getMonth()+1);}return;}var y=l.byClass(u,'fbTimelineCapsule');if(y){v=y.getAttribute('data-start');w=y.getAttribute('data-end');var z=n.getElementPosition(u).y,aa=[w,null],ba=[v,null],ca=m.getUnitsWithTime(y);for(var da=0;da<ca.length;da++){var ea=ca[da],fa=j.scry(ea.parentNode,'.spinePointer')[0];if(!fa)continue;var ga=n.getElementPosition(fa).y;if(ga<=z){if(!aa[1]||ga>aa[1])aa=[ea.getAttribute('data-time'),ga];}else if(!ba[1]||ga<ba[1])ba=[ea.getAttribute('data-time'),ga];}if(aa[0]!==null&&ba[0]!==null){var ha=Math.round((parseInt(aa[0],10)+parseInt(ba[0],10))/2)*1000;ha=Math.min(new Date()-r,ha);t.setDateWithTimestamp(ha);}}}};e.exports=s;});
__d("TimelineBackdatedComposer",["Arbiter","Bootloader","CSS","DOM","LayerHideOnBlur","Run","TimelineComposerUtilities","TimelineNavigation"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('LayerHideOnBlur'),l=b('Run'),m=b('TimelineComposerUtilities'),n=b('TimelineNavigation'),o;function p(){q();r();}function q(){o.hide();}function r(){h.loadModules(['TimelineMLE'],function(t){var u=t.getFlyout();if(u&&i.hasClass(u.getContext(),'backdatedDot'))t.hideFlyout();});}var s={init:function(t,u){o=u;var v=[m.listenToPublish(t,p),m.listenToAnotherComposerOpen(t,p),m.listenToSetEstimatedDateOld(t,o.getContext.bind(o)),t.subscribeToMutate(function(){var x=!j.scry(t.root,'.cancelBtn')[0]||j.scry(t.root,'.attachmentLifeEvents')[0];if(x){o.enableBehavior(k);}else o.disableBehavior(k);}),g.subscribe('TimelineMLE/mleFlyoutShown',function(x,y){if(i.hasClass(y.getContext(),'backdatedDot')){q();}else p();}),g.subscribe(n.UPDATE_PAGE,p)],w=m.listenToCancelOld(o.getContent(),p);l.onLeave(function(){v.forEach(g.unsubscribe.bind(g));v=[];w.remove();w=null;});g.inform('TimelineBackdatedComposer/initialized');},getFlyout:function(){return o;}};e.exports=a.TimelineBackdatedComposer||s;});
__d("TimelineSpine",["array-extensions","event-extensions","Arbiter","AsyncRequest","Bootloader","Composer","ComposerXController","CSS","DOM","Layer","LayerHideOnBlur","Parent","Run","TimelineBackdatedComposer","TimelineComposerUtilities","copyProperties"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('Bootloader'),j=b('Composer'),k=b('ComposerXController'),l=b('CSS'),m=b('DOM'),n=b('Layer'),o=b('LayerHideOnBlur'),p=b('Parent'),q=b('Run'),r=b('TimelineBackdatedComposer'),s=b('TimelineComposerUtilities'),t=b('copyProperties');function u(){}t(u,{OFFSET_Y:12,composerFlyout:null,composerRoot:null,mleFlyout:null,dot:null,loadComposerFlyoutCalled:false,showComposerFlyout:function(v){var w=u.composerFlyout;if(!w){u.loadComposerFlyout(v);u.showComposerFlyoutOnLoad=true;return;}if(u.composerRoot){k.reset(u.composerRoot);s.hidePlaceIfAttachmentsTooTall(u.composerRoot);}else{var x=m.scry(w.getContent(),'div.fbTimelineBackdatedComposer')[0],y=j.getInstance(x);if(y){y.reset();l.removeClass(y.root,'uiComposerOpen');}s.hidePlaceIfAttachmentsTooTallOld(x);}w.enableBehavior(o).setContext(u.dot).updatePosition();w.show();},loadComposerFlyout:function(v){if(u.loadComposerFlyoutCalled||u.composerFlyout)return;u.loadComposerFlyoutCalled=true;q.onLeave(function(){u.loadComposerFlyoutCalled=false;u.composerFlyout=null;u.composerRoot=null;}.bind(this));new h().setURI('/ajax/timeline/backdated_composer.php').setData({targetid:v}).setRelativeTo(u.dot||document.body).send();var w=g.subscribe('TimelineBackdatedComposer/initialized',function(x,y){if(y){u.composerFlyout=y.getFlyout();u.composerRoot=y.getComposerRoot();}else u.composerFlyout=r.getFlyout();if(u.showComposerFlyoutOnLoad)u.showComposerFlyout(v);u._handleComposerFlyoutDismissed();w.unsubscribe();});},showMLEFlyout:function(v){u.mleFlyout=v;v.setContext(u.dot).show();u.composerFlyout.hide();},_handleComposerFlyoutDismissed:function(){var v=n.subscribe('hide',function(w,x){if(u.dot&&x.getContext)if(x.getContext()===u.dot&&!u.mleFlyout){u._hideDot();}else if(x===u.mleFlyout){u.mleFlyout=null;u._hideDot();}});q.onLeave(function(){n.unsubscribe(v);}.bind(this));},_hideDot:function(){m.remove(u.dot);u.dot=null;}});t(u.prototype,{init:function(v,w){this._spine=v;this._plus=m.find(v,'.spineHoverPlus');this._capsule=p.byClass(v,'fbTimelineCapsule');this._targetid=w;var x=[Event.listen(v,'mouseenter',function(event){u.loadComposerFlyout(this._targetid);this._spineHeight=v.offsetHeight;}.bind(this)),Event.listen(v,'mousemove',this._mouseMoved.bind(this)),Event.listen(v,'click',this._spineClicked.bind(this))];l.addClass(this._plus,'spineHoverPlusActive');q.onLeave(function(){while(x.length)x.pop().remove();}.bind(this));},_mouseMoved:function(event){var v=event.offsetY||event.layerY,w=event.getTarget();if(w!==this._spine)v=w.offsetTop+v;v=Math.min(Math.max(v-u.OFFSET_Y,0),this._spineHeight);this._plus.style.top=v+'px';},_spineClicked:function(event){if(u.mleFlyout){i.loadModules(['TimelineMLE'],function(v){v.hideFlyout();});return;}u.dot&&m.remove(u.dot);u.dot=m.create('i',{className:'backdatedDot'});u.dot.style.top=(this._plus.offsetTop-1)+'px';m.appendContent(this._spine,u.dot);event.stop();u.showComposerFlyout(this._targetid);}});e.exports=a.TimelineSpine||u;});
__d("legacy:TimelineSpine",["TimelineSpine"],function(a,b,c,d){a.TimelineSpine=b('TimelineSpine');},3);
__d("TimelineComposer",["Arbiter","Bootloader","CSS","DOM","Parent","Run","TimelineCapsule","TimelineComposerUtilities","$","cx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('Run'),m=b('TimelineCapsule'),n=b('TimelineComposerUtilities'),o=b('$'),p=b('cx'),q;function r(w){if(w.isScheduledPost||w.isOGPost)return;if(!w.streamStory){window.location.reload();return;}if(w.backdatedTime){h.loadModules(['TimelineStoryPublisher'],function(aa){aa.publish(w);});return;}var x=k.byClass(q,'fbTimelineCapsule');if(!x)return;var y=k.byClass(q,'timelineUnitContainer').parentNode;if(y.nextSibling.getAttribute('data-spine'))y=y.nextSibling;var z=j.insertAfter(y,w.streamStory)[0];h.loadModules(['Animation'],function(aa){aa(z.firstChild).from('backgroundColor','#fff8dd').to('backgroundColor','#fff').duration(2000).ease(aa.ease.both).go();});m.setFirstUnit(x);m.balanceCapsule(x);}function s(){var w=k.byClass(q,'fbTimelineTwoColumn');return j.find(w,'.spinePointer');}function t(w){var x=u();i.show(x);var y=w.subscribe('hide',function(){i.hide(x);w.unsubscribe(y);});}function u(){var w=k.byClass(q,'fbTimelineTwoColumn'),x=j.scry(w,'div.composerVeil');if(x.length!==1)x=j.appendContent(w,j.create('div',{className:'composerVeil hidden_elem'}));return x[0];}var v={init:function(w){q=o(w);var x=g.subscribe('composer/publish',function(event,y){if(y.composer_id===q.id)r(y);});l.onLeave(x.unsubscribe.bind(x));if(i.hasClass(q,"_mj")){n.hidePlaceIfAttachmentsTooTall(q);}else n.hidePlaceIfAttachmentsTooTallOld(q);},showMLEFlyout:function(w){w.setContext(s()).show();t(w);}};e.exports=a.TimelineComposer||v;});
__d("TimelineStar",["event-extensions","Button","CSS","DOM","Parent","TimelineCapsule","Tooltip","URI"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Button'),h=b('CSS'),i=b('DOM'),j=b('Parent'),k=b('TimelineCapsule'),l=b('Tooltip'),m=b('URI'),n={STAR_CSS_ONLY:1,STAR_ASYNC_REQUIRED:2,ACTION_STAR:7,ACTION_UNSTAR:8,starUnitFromButton:function(o,p,q){var r=j.byClass(o,'timelineUnitContainer');n.starUnit(r,p,q);},starUnit:function(o,p,q){var r=o.parentNode;if(!q)i.setContent(r,p);h.removeClass(r,'fbTimelineTwoColumn');h.addClass(r,'fbTimelineOneColumn');r.removeAttribute('data-side');r.setAttribute('data-size','2');l.hide();k.balanceCapsule.curry(r.parentNode).defer();},unstarUnitFromButton:function(o,p,q){var r=j.byClass(o,'timelineUnitContainer');n.unstarUnit(r,p,q);},unstarUnit:function(o,p,q){var r=o.parentNode;if(!q)i.setContent(r,p);h.removeClass(r,'fbTimelineOneColumn');h.addClass(r,'fbTimelineTwoColumn');r.setAttribute('data-side','l');r.setAttribute('data-size','1');l.hide();k.balanceCapsule.curry(r.parentNode).defer();},listenToButton:function(o,p){if(!o)return;switch(p){case n.STAR_CSS_ONLY:Event.listen(o,'click',function(event){g.setEnabled.curry(o,false).defer();var r=j.byClass(o,'timelineUnitContainer'),s=n.unstarUnit;h.toggleClass(o,'fbTimelineStarButtonSelected');h.toggleClass(o,'selected');if(r.parentNode.getAttribute('data-size')=='1')s=n.starUnit;s(r,null,true);var t=new m(o.getAttribute('ajaxify')),u=t.getQueryData().customize_action==n.ACTION_STAR?n.ACTION_UNSTAR:n.ACTION_STAR;t.addQueryData({customize_action:u});o.setAttribute.bind(o,'ajaxify',t).defer();});var q=j.byClass(o,'stat_elem');q&&h.removeClass(q,'stat_elem');break;case n.STAR_ASYNC_REQUIRED:break;}}};e.exports=n;});
__d("TimelineViewportTracking",["event-extensions","Class","DOM","ViewportTracking","$","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Class'),h=b('DOM'),i=b('ViewportTracking'),j=b('$'),k=b('copyProperties'),l=55;function m(){this.parent.construct(this);}g.extend(m,i);k(m.prototype,{getDataFromConfig:function(n){this.timeout=n.record_delay;},getTimeout:function(){return this.timeout;},getAllStories:function(){return h.scry(j('timeline_tab_content'),'.timelineUnitContainer');},getStoryID:function(n){var o=JSON.parse(n.getAttribute('data-gt'));return o&&o.contentid;},getDataToLog:function(n){var o={evt:l,timelineviewporttracking:true};return {gt:o};}});e.exports.init=function(n){(new m()).init(n);};});
__d("OnlyMeUI",["AudienceSelector","Arbiter","CSS","DOM","Parent","PrivacyConst","Selector","$","tx"],function(a,b,c,d,e,f){var g=b('AudienceSelector'),h=b('Arbiter'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('PrivacyConst'),m=b('Selector'),n=b('$'),o=b('tx');function p(){return [j.create('div',{className:'onlyMeBorder'}),j.create('div',{className:'onlyMeBorder onlyMeBorderBottom'})];}function q(){return j.create('img',{alt:' ',className:'onlyMePrivacyCorner',height:34,src:'/images/profile/timeline/privacy_corner.png',width:34});}function r(x){var y=j.scry(x,'.photoUnit a.photo');return y.filter(function(z){return !j.scry(z,'.onlyMePrivacyCorner').length;});}function s(x,y){if(g.hasTags(u(y)))return;if(i.hasClass(x,'storyContent'))if(!k.byClass(x,'onlyMeWrap')){var z=j.create('div',{className:'onlyMeWrap'});j.appendContent(k.byClass(x,'uiStreamStory'),z);j.appendContent(z,x);x=z;}else x=k.byClass(x,'onlyMeWrap');i.addClass(x,'storyOnlyMe');if(!i.hasClass(x,'timelineRecentActivityStory'))j.setContent(j.find(y,'span.uiButtonText'),"Only Me");if(!i.hasClass(x,'storyContent')){var aa=r(x);for(var ba=0,ca=aa.length;ba<ca;++ba)j.appendContent(aa[ba],q());}if(!j.scry(x,'div.onlyMeBorder').length){var da=p();j.prependContent(x,da[0]);j.appendContent(x,da[1]);}}function t(x){if(!x)return;var y=k.byClass(x,'storyContent')||k.byClass(x,'timelineRecentActivityStory')||k.byClass(x,'timelineUnitContainer')||k.byClass(x,'fbTimelineTwoColumn');if(!y){y=j.scry(x,'^.permalink_stream .storyContent');y=y.length&&y[0];}else if(i.hasClass(y,'fbTimelineComposerUnit'))return null;return y;}function u(x){var y=j.scry(x,'*[data-oid]');if(y.length===0)return '';return y[0].getAttribute('data-oid');}var v=false,w={init:function(){if(v)return;v=true;h.subscribe('AudienceSelector/changed',function(x,y){var z=t(y.selector)||t(y.clone);if(!z)return;if(m.getOptionValue(y.option)==l.BaseValue.SELF){s(z,y.selector);}else{z=i.hasClass(z,'storyContent')?k.byClass(z,'onlyMeWrap'):z;z&&i.removeClass(z,'storyOnlyMe');}});},setOnlyMe:function(x){if(v)return;w.init();x=j.find(k.byClass(n(x),'uiSelector'),'a.uiSelectorButton');var y=t(x);y&&s(y,x);}};e.exports=w;});
__d("CountButtonCount",["ArbiterMixin","copyProperties","DOM"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('copyProperties'),i=b('DOM');function j(k,l,m){this._root=k;this._count=l;this._max=m;}h(j.prototype,g,{getCount:function(){return this._count;},setCount:function(k){this._count=k;var l=this.getDisplayedValue();i.setContent(this._root,l);this.inform('change',{value:this._count,display:l});return this;},addCount:function(k){this.setCount(this.getCount()+k);return this;},getDisplayedValue:function(){return Math.max(0,Math.min(this._count,this._max));}});e.exports=j;});
__d("CountButton",["copyProperties","CSS","cx"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('CSS'),i=b('cx'),j={large:"_9x",small:"_9w",hidden:"_9v"};function k(l,m){this._root=l;this._counter=m;this._initEvents();}g(k.prototype,{_initEvents:function(){this._counter.subscribe('change',this._counterChange.bind(this));},_counterChange:function(l,m){h.removeClass(this._root,j.large);h.removeClass(this._root,j.small);h.removeClass(this._root,j.hidden);if(m.value>9){h.addClass(this._root,j.large);}else if(m.value>0){h.addClass(this._root,j.small);}else h.addClass(this._root,j.hidden);},getCounter:function(){return this._counter;}});e.exports=k;});