/*1347247832,173217057*/

if (window.CavalryLogger) { CavalryLogger.start_js(["S7Sbt"]); }

__d("legacy:data-store",["DataStore"],function(a,b,c,d){a.DataStore=a.DataStore||b('DataStore');},3);
function EmuController(a,b){this.impression=b;this.containerId=a;DataStore.set($(a),'emuController',this);return this;}copyProperties(EmuController,{fromContainer:function(a){var b=ge(a);if(!b)return null;return DataStore.get(b,'emuController');},getEventClass:function(a){return "emuEvent"+String(a).trim();}});copyProperties(EmuController.prototype,{EVENT_HANDLER_PATH:'/ajax/emu/end.php',CLICK:1,FAN:"fad_fan",event:function(a,b,c,d){var e={eid:this.impression,f:0,ui:this.containerId,en:a,a:1};if(b)e.ed=JSON.stringify(b);if(!d)var d=bagofholding;var f=new AsyncRequest().setURI(this.EVENT_HANDLER_PATH).setData(e).setErrorHandler(d);if(c)f.setHandler(c);f.send();},redirect:function(){var a={eid:this.impression,f:0,ui:this.containerId,en:this.CLICK,a:0,sig:Math.floor(Math.random()*65535)+65536},b=new URI(this.EVENT_HANDLER_PATH);b.setQueryData(a);goURI(b);}});
var ShortClickHandlers={EVENT_NAME_CAME_BACK:'cameback',onclicked:function(a){if(this.onsite)return;if(a.button!==0||a.getModifiers().any)return;this.click_ts=(+new Date());if(this.listeners!==undefined)for(var b in this.listeners)this.listeners[b].remove();this.listeners={focus:Event.listen(window,'focus',ShortClickHandlers.oncameback.bind(this))};},oncameback:function(a){var b=(+new Date())-this.click_ts;this.listeners[a.type].remove();var c={click_ts:this.click_ts,length:b,trigger:a.type};this.sendData(ShortClickHandlers.EVENT_NAME_CAME_BACK,c);}};
function EmuTracker(a,b){this.base=EmuController.fromContainer(a);!this.base;this.onsite=b;var c=DOM.scry($(a),"a."+EmuController.getEventClass(EmuTracker.EVENT_CLICK));c.forEach(function(d){Event.listen(d,'click',ShortClickHandlers.onclicked.bind(this));}.bind(this));return this;}copyProperties(EmuTracker,{EVENT_CLICK:1});copyProperties(EmuTracker.prototype,{sendData:function(a,b){this.base.event(a,b);}});
__d("TextInputControl",["event-extensions","function-extensions","Class","DOMControl","Input","copyProperties","debounce"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Class'),h=b('DOMControl'),i=b('Input'),j=b('copyProperties'),k=b('debounce');function l(m){this.parent.construct(this,m);var n=this.getRoot(),o=k(this.update.bind(this),0);Event.listen(n,{input:o,keydown:o,paste:o});}g.extend(l,h);j(l.prototype,{setMaxLength:function(m){i.setMaxLength(this.getRoot(),m);return this;},getValue:function(){return i.getValue(this.getRoot());},isEmpty:function(){return i.isEmpty(this.getRoot());},setValue:function(m){i.setValue(this.getRoot(),m);this.update();return this;},clear:function(){return this.setValue('');},setPlaceholderText:function(m){i.setPlaceholder(this.getRoot(),m);return this;}});e.exports=l;});
__d("TextMetrics",["array-extensions","event-extensions","DOM","Style","UserAgent","debounce"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('DOM'),h=b('Style'),i=b('UserAgent'),j=b('debounce'),k;function l(){if(typeof k==='undefined'){var n=g.create('div',{className:'webkitZoomTest'}),o=function(){g.appendContent(document.body,n);k=100/n.clientHeight;g.remove(n);};Event.listen(window,'resize',j(o,100));o();}return k;}function m(n,o){this._node=n;this._flexible=!!o;var p='textarea',q='textMetrics';if(this._flexible){p='div';q+=' textMetricsInline';}this._shadow=g.create(p,{className:q});var r=['fontSize','fontStyle','fontWeight','fontFamily','wordWrap'];r.forEach(function(t){h.set(this._shadow,t,h.get(n,t));}.bind(this));var s=h.get(n,'lineHeight');if(i.chrome()||i.safari())s=Math.round(parseInt(s,10)*l())+'px';h.set(this._shadow,'lineHeight',s);document.body.appendChild(this._shadow);}m.prototype.measure=function(n){var o=this._node,p=this._shadow;n=(n||o.value)+'...';if(!this._flexible){var q=o.clientWidth-h.getFloat(o,'paddingLeft')-h.getFloat(o,'paddingRight');h.set(p,'width',Math.max(q,0)+'px');}g.setContent(p,n);return {width:p.scrollWidth,height:p.scrollHeight};};m.prototype.destroy=function(){g.remove(this._shadow);};e.exports=m;});
__d("TextAreaControl",["event-extensions","Arbiter","ArbiterMixin","Class","CSS","DOMControl","Style","TextInputControl","TextMetrics","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Class'),j=b('CSS'),k=b('DOMControl'),l=b('Style'),m=b('TextInputControl'),n=b('TextMetrics'),o=b('copyProperties');function p(r,s){return l.getFloat(r,s)||0;}function q(r){this.autogrow=j.hasClass(r,'uiTextareaAutogrow');this.parent.construct(this,r);this.width=null;Event.listen(r,'focus',this._handleFocus.bind(this));}i.extend(q,m);o(q.prototype,h,{setAutogrow:function(r){this.autogrow=r;return this;},onupdate:function(){this.parent.onupdate();if(this.autogrow){var r=this.getRoot();if(!this.metrics)this.metrics=new n(r);if(typeof this.initialHeight==='undefined'){this.isBorderBox=l.get(r,'box-sizing')==='border-box'||l.get(r,'-moz-box-sizing')==='border-box'||l.get(r,'-webkit-box-sizing')==='border-box';this.borderBoxOffset=p(r,'padding-top')+p(r,'padding-bottom')+p(r,'border-top-width')+p(r,'border-bottom-width');this.initialHeight=r.offsetHeight-this.borderBoxOffset;}var s=this.metrics.measure(),t=Math.max(this.initialHeight,s.height);if(this.isBorderBox)t+=this.borderBoxOffset;if(t!==this.height){this.height=t;l.set(r,'height',t+'px');g.inform('reflow');this.inform('resize');}}else if(this.metrics){this.metrics.destroy();this.metrics=null;}},resetHeight:function(){this.height=-1;this.update();},_handleFocus:function(){this.width=null;}});q.getInstance=function(r){return k.getInstance(r)||new q(r);};e.exports=q;});
__d("URLScraper",["event-extensions","ArbiterMixin","Class","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('Class'),i=b('copyProperties');function j(ga){this.input=ga;this.enable();}i(j.prototype,g,{reset:function(){this.lastPermissiveMatch=null;},enable:function(){if(this.events)return;var ga=function(ha){setTimeout(this.check.bind(this,ha),30);};this.events=Event.listen(this.input,{paste:ga.bind(this,false),keydown:ga.bind(this,true)});},disable:function(){if(!this.events)return;for(var event in this.events)this.events[event].remove();this.events=null;},check:function(ga){var ha=this.input.value;if(ga&&j.trigger(ha))return;var ia=j.match(ha),ja=j.permissiveMatch(ha);if(ja&&(ja!=this.lastPermissiveMatch)){this.lastPermissiveMatch=ja;this.inform('match',{url:ia,alt_url:ja});}}});var k='!"#%&\'()*,-./:;<>?@[\\]^_`{|}',l='\u2000-\u206F\u00ab\u00bb',m='(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])',n='(?:(?:ht|f)tps?)://',o='(?:(?:'+m+'[.]){3}'+m+')',p='(?:\\b)www\\d{0,3}[.]',q='[^\\s'+k+l+']',r='(?:(?:[.:\\-_%@]|'+q+')*'+q+')',s='(?:[.][a-z]{2,4})',t='(?::\\d+){0,1}',u='(?=[\/?#])',v='(?:'+'(?:'+n+r+t+')|'+'(?:'+o+t+')|'+'(?:'+p+r+s+t+')|'+'(?:'+r+s+t+u+')'+')',w='[\/#?]',x='\\([^\\s()<>]+\\)',y='[^\\s()<>?#]+',z='[^\\s'+k+l+']',aa='(?:'+'(?:'+w+')'+'(?:'+'(?:'+x+'|'+y+')*'+'(?:'+x+'|'+z+')'+')*'+')*',ba=new RegExp('('+'(?:'+v+')'+'(?:'+aa+')'+')','im'),ca='(?:'+'(?:'+w+')'+'(?:'+'(?:'+x+'|'+y+')*'+')*'+')*',da=new RegExp('('+'(?:'+v+')'+'(?:'+ca+')'+')','im'),ea=new RegExp('('+'(?:'+n+r+t+')|'+'(?:'+p+r+s+t+')'+')'),fa=/[\s'";]/;j.match=function(ga){return j.matchToPattern(ga,ba);};j.permissiveMatch=function(ga){return j.matchToPattern(ga,da);};j.matchToPattern=function(ga,ha){var ia=(ha.exec(ga)||[])[1]||null;if(ia&&ia.indexOf('@')!=-1){return (ea.exec(ia))?ia:null;}else return ia;};j.trigger=function(ga){return !fa.test(ga.charAt(ga.length-1));};e.exports=j;});
__d("ContextualThing",["DOM","ge"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('ge');function i(k){var l;while(k){if(k.getAttribute&&(l=k.getAttribute('data-ownerid')))return h(l);k=k.parentNode;}return null;}var j={register:function(k,l){k.setAttribute('data-ownerid',g.getID(l));},remove:function(k){k.removeAttribute('data-ownerid');},containsIncludingLayers:function(k,l){while(l){if(g.contains(k,l))return true;l=i(l);}return false;}};e.exports=j;});
__d("Toggler",["array-extensions","event-extensions","Arbiter","ArbiterMixin","ContextualThing","CSS","DataStore","Dialog","DOM","copyProperties","createArrayFrom","ge","getObjectValues"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('ContextualThing'),j=b('CSS'),k=b('DataStore'),l=b('Dialog'),m=b('DOM'),n=b('copyProperties'),o=b('createArrayFrom'),p=b('ge'),q=b('getObjectValues'),r=[],s;function t(){t=bagofholding;Event.listen(document.documentElement,'click',function(event){var x=event.getTarget();r.forEach(function(y){y.clickedTarget=x;y.active&&!y.sticky&&!i.containsIncludingLayers(y.getActive(),x)&&!y.inTargetFlyout(x)&&y.inActiveDialog()&&y.hide();});},Event.Priority.URGENT);}var u=function(){this.active=null;this.togglers={};this.setSticky(false);r.push(this);this.subscribe(['show','hide'],u.inform.bind(u));return t();};n(u.prototype,h,{show:function(x){var y=v(this,x),z=y.active;if(x!==z){z&&y.hide();y.active=x;j.addClass(x,'openToggler');var aa=m.scry(x,'a[rel="toggle"]');if(aa.length>0&&aa[0].getAttribute('data-target'))j.removeClass(p(aa[0].getAttribute('data-target')),'toggleTargetClosed');m.appendContent(x,y.getToggler('next'));m.prependContent(x,y.getToggler('prev'));y.inform('show',y);}},hide:function(x){var y=v(this,x),z=y.active;if(z&&(!x||x===z)){j.removeClass(z,'openToggler');var aa=m.scry(z,'a[rel="toggle"]');if(aa.length>0&&aa[0].getAttribute('data-target'))j.addClass(p(aa[0].getAttribute('data-target')),'toggleTargetClosed');q(y.togglers).forEach(m.remove);y.inform('hide',y);y.active=null;}},toggle:function(x){var y=v(this,x);if(y.active===x){y.hide();}else y.show(x);},getActive:function(){return v(this).active;},isShown:function(){return v(this).active&&j.hasClass(v(this).active,'openToggler');},inTargetFlyout:function(x){var y=w(this.getActive());return y&&i.containsIncludingLayers(y,x);},inActiveDialog:function(){var x=l.getCurrent();return !x||m.contains(x.getRoot(),this.getActive());},getToggler:function(x){var y=v(this);if(!y.togglers[x]){y.togglers[x]=m.create('button',{className:'hideToggler',onfocus:function(){var z=m.scry(y.active,'a[rel="toggle"]')[0];z&&z.focus();y.hide();}});y.togglers[x].setAttribute('type','button');}return this.togglers[x];},setSticky:function(x){var y=v(this);x=x!==false;if(x!==y.sticky){y.sticky=x;if(x){y._pt&&y._pt.unsubscribe();}else y._pt=g.subscribe('pre_page_transition',y.hide.bind(y,null));}return y;}});n(u,u.prototype);n(u,{bootstrap:function(x){var y=x.parentNode;u.getInstance(y).toggle(y);},createInstance:function(x){var y=new u().setSticky(true);k.set(x,'toggler',y);return y;},getInstance:function(x){while(x){var y=k.get(x,'toggler');if(y)return y;if(j.hasClass(x,'uiToggleContext'))return u.createInstance(x);x=x.parentNode;}return (s=s||new u());},listen:function(x,y,z){return u.subscribe(o(x),function(aa,ba){if(ba.getActive()===y)return z(aa,ba);});},subscribe:(function(x){return function(y,z){y=o(y);if(y.contains('show'))r.forEach(function(aa){if(aa.getActive())z.curry('show',aa).defer();});return x(y,z);};})(u.subscribe.bind(u))});function v(x,y){if(x instanceof u)return x;return u.getInstance(y);}function w(x){var y=m.scry(x,'a[rel="toggle"]');if(y.length>0&&y[0].getAttribute('data-target'))return p(y[0].getAttribute('data-target'));}e.exports=u;});
__d("Menu",["event-extensions","Arbiter","CSS","DataStore","DOM","HTML","Keys","Parent","Run","Style","UserAgent","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('HTML'),l=b('Keys'),m=b('Parent'),n=b('Run'),o=b('Style'),p=b('UserAgent'),q=b('copyProperties'),r=null,s='menu:mouseover',t=null;function u(ca){if(h.hasClass(ca,'uiMenuContainer'))return ca;return m.byClass(ca,'uiMenu');}function v(ca){return m.byClass(ca,'uiMenuItem');}function w(ca){if(document.activeElement){var da=v(document.activeElement);return ca.indexOf(da);}return -1;}function x(ca){return j.find(ca,'a.itemAnchor');}function y(ca){return h.hasClass(ca,'checked');}function z(ca){return !h.hasClass(ca,'disabled')&&o.get(ca,'display')!=='none';}function aa(event){var ca=document.activeElement;if(!ca||!m.byClass(ca,'uiMenu')||!j.isNodeOfType(ca,['input','textarea'])){var da=v(event.getTarget());da&&r.focusItem(da);}}function ba(ca){p.firefox()&&x(ca).blur();r.inform('select',{menu:u(ca),item:ca});}n.onLoad(function(){var ca={};ca.click=function(event){var da=v(event.getTarget());if(da&&z(da)){ba(da);var ea=x(da),fa=ea.href,ga=ea.getAttribute('rel');return (ga&&ga!=='ignore')||(fa&&fa.charAt(fa.length-1)!=='#');}};ca.keydown=function(event){var da=event.getTarget();if(event.getModifiers().any)return;if(!t||j.isNodeOfType(da,['input','textarea']))return;var ea=Event.getKeyCode(event),fa;switch(ea){case l.UP:case l.DOWN:var ga=r.getEnabledItems(t);fa=w(ga);r.focusItem(ga[fa+(ea===l.UP?-1:1)]);return false;case l.SPACE:var ha=v(da);if(ha){ba(ha);event.prevent();}break;default:var ia=String.fromCharCode(ea).toLowerCase(),ja=r.getEnabledItems(t);fa=w(ja);var ka=fa,la=ja.length;while((~fa&&(ka=++ka%la)!==fa)||(!~fa&&++ka<la)){var ma=r.getItemLabel(ja[ka]);if(ma&&ma.charAt(0).toLowerCase()===ia){r.focusItem(ja[ka]);return false;}}}};Event.listen(document.documentElement,ca);});r=e.exports=q(new g(),{focusItem:function(ca){if(ca&&z(ca)){this._removeSelected(u(ca));h.addClass(ca,'selected');x(ca).focus();}},getEnabledItems:function(ca){return r.getItems(ca).filter(z);},getCheckedItems:function(ca){return r.getItems(ca).filter(y);},getItems:function(ca){return j.scry(ca,'li.uiMenuItem');},getItemLabel:function(ca){return ca.getAttribute('data-label',2)||'';},isItemChecked:function(ca){return h.hasClass(ca,'checked');},register:function(ca,da){ca=u(ca);if(!i.get(ca,s))i.set(ca,s,Event.listen(ca,'mouseover',aa));if(da!==false)t=ca;},setItemEnabled:function(ca,da){if(!da&&!j.scry(ca,'span.disabledAnchor')[0])j.appendContent(ca,j.create('span',{className:j.find(ca,'a').className+' disabledAnchor'},k(x(ca).innerHTML)));h.conditionClass(ca,'disabled',!da);},toggleItem:function(ca){var da=!r.isItemChecked(ca);r.setItemChecked(ca,da);},setItemChecked:function(ca,da){h.conditionClass(ca,'checked',da);x(ca).setAttribute('aria-checked',da);},unregister:function(ca){ca=u(ca);var da=i.remove(ca,s);da&&da.remove();t=null;this._removeSelected(ca);},_removeSelected:function(ca){r.getItems(ca).filter(function(da){return h.hasClass(da,'selected');}).forEach(function(da){h.removeClass(da,'selected');});}});});
__d("csx",[],function(a,b,c,d,e,f){function g(h){throw new Error('csx(...): Unexpected class selector transformation.');}e.exports=g;});
__d("AccessibleLayer",["event-extensions","CSS","DOM","Input","copyProperties","csx","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DOM'),i=b('Input'),j=b('copyProperties'),k=b('csx'),l=b('tx');function m(n){this._layer=n;}j(m.prototype,{enable:function(){var n=this._layer.getRoot();if(n.tabIndex==-1)n.tabIndex=0;var o=h.create('a',{className:'accessible_elem',href:'#'},["Close popup and return"]);h.appendContent(n,o);this._listener=Event.listen(o,'click',this._closeListener.bind(this));this._afterShowSubscription=this._layer.subscribe('aftershow',this._onAfterShow.bind(this));},disable:function(){this._listener.remove();this._afterShowSubscription.unsubscribe();this._listener=this._afterShowSubscription=null;},_closeListener:function(event){var n=this._layer.getCausalElement();if(n){if(n.tabIndex==-1){n.tabIndex=0;g.addClass(n,"_h0");}i.focus(n);}this._layer.hide();},_onAfterShow:function(){var n=document.activeElement,o=this._layer.getRoot();if(!h.isNodeOfType(n,['input','textarea'])&&!h.contains(o,n))i.focus(o);}});e.exports=m;});
__d("ARIA",["DOM","ge"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('ge'),i,j,k=function(){i=h('ariaAssertiveAlert');if(!i){i=g.create('div',{id:'ariaAssertiveAlert',className:'accessible_elem','aria-live':'assertive'});g.appendContent(document.body,i);}j=h('ariaPoliteAlert');if(!j){j=i.cloneNode(false);j.setAttribute('id','ariaPoliteAlert');j.setAttribute('aria-live','polite');g.appendContent(document.body,j);}k=bagofholding;};function l(n,o){k();var p=o?i:j;g.setContent(p,n);}var m={owns:function(n,o){n.setAttribute('aria-owns',g.getID(o));},setPopup:function(n,o){var p=g.getID(o);n.setAttribute('aria-owns',p);n.setAttribute('aria-controls',p);n.setAttribute('aria-haspopup','true');if(n.tabIndex==-1)n.tabIndex=0;},announce:function(n){l(n,true);},notify:function(n){l(n);}};e.exports=m;});
__d("ContextualDialogFooterLink",["event-extensions","copyProperties","CSS","DOM"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('CSS'),i=b('DOM');function j(k){this._layer=k;}g(j.prototype,{_subscriptions:null,enable:function(){var k=this._layer.getRoot(),l=i.scry(k,'.uiContextualDialogFooterLink')[0],m='uiContextualDialogHoverFooterArrow';this._subscriptions=[Event.listen(l,'mouseenter',h.addClass.curry(k,m)),Event.listen(l,'mouseleave',h.removeClass.curry(k,m))];},disable:function(){this._subscriptions.forEach(function(k){k.remove();});this._subscriptions=null;}});e.exports=j;});
__d("BootloadedReact",["Bootloader"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=function(j){g.loadModules(['React'],j);},i={isValidComponent:function(j){return (j&&typeof j.genMarkup==='function'&&typeof j.handleUpdateProps==='function');},initializeTouchEvents:function(j,k){h(function(l){l.initializeTouchEvents(j);k&&k();});},createComponent:function(j,k){h(function(l){var m=l.createComponent(j);k&&k(m);});},renderComponent:function(j,k,l){h(function(m){var n=m.renderComponent(j,k);l&&l(n);});},renderOrUpdateComponent:function(j,k,l){h(function(m){var n=m.renderOrUpdateComponent(j,k);l&&l(n);});},destroyAndReleaseReactRootNode:function(j,k){h(function(l){l.destroyAndReleaseReactRootNode(j);k&&k();});}};e.exports=i;});
__d("KeyEventController",["event-extensions","DOM","Run","copyProperties","isEmpty"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOM'),h=b('Run'),i=b('event-extensions').$E,j=b('copyProperties'),k=b('isEmpty');function l(){this.handlers={};document.onkeyup=this.onkeyevent.bind(this,'onkeyup');document.onkeydown=this.onkeyevent.bind(this,'onkeydown');document.onkeypress=this.onkeyevent.bind(this,'onkeypress');}j(l,{instance:null,getInstance:function(){return l.instance||(l.instance=new l());},defaultFilter:function(event,m){event=i(event);return l.filterEventTypes(event,m)&&l.filterEventTargets(event,m)&&l.filterEventModifiers(event,m);},filterEventTypes:function(event,m){if(m==='onkeydown')return true;return false;},filterEventTargets:function(event,m){var n=event.getTarget();if(n.contentEditable==='true')return false;return !g.isNodeOfType(n,l._interactiveElements)||(n.type in l._uninterestingTypes)||(g.isNodeOfType(n,['input','textarea'])&&n.value.length===0&&event.keyCode in l._controlKeys);},filterEventModifiers:function(event,m){if(event.ctrlKey||event.altKey||event.metaKey||event.repeat)return false;return true;},registerKey:function(m,n,o,p){if(o===undefined)o=l.defaultFilter;var q=l.getInstance(),r=q.mapKey(m);if(k(q.handlers))h.onLeave(q.resetHandlers.bind(q));var s={};for(var t=0;t<r.length;t++){m=r[t];if(!q.handlers[m]||p)q.handlers[m]=[];var u={callback:n,filter:o};s[m]=u;q.handlers[m].push(u);}return {remove:function(){for(var v in s){if(q.handlers[v]&&q.handlers[v].length){var w=q.handlers[v].indexOf(s[v]);w>=0&&q.handlers[v].splice(w,1);}delete s[v];}}};},keyCodeMap:{BACKSPACE:[8],TAB:[9],RETURN:[13],ESCAPE:[27],LEFT:[37,63234],UP:[38,63232],RIGHT:[39,63235],DOWN:[40,63233],DELETE:[46],COMMA:[188],PERIOD:[190],'`':[192],'[':[219],']':[221]},_interactiveElements:['input','select','textarea','object','embed'],_uninterestingTypes:{checkbox:1,radio:1,submit:1},_controlKeys:{8:1,9:1,13:1,27:1,37:1,63234:1,38:1,63232:1,39:1,63235:1,40:1,63233:1,46:1}});j(l.prototype,{mapKey:function(m){if(m>=0&&m<=9){if(typeof(m)!='number')m=m.charCodeAt(0)-48;return [48+m,96+m];}var n=l.keyCodeMap[m.toUpperCase()];if(n)return n;return [m.toUpperCase().charCodeAt(0)];},onkeyevent:function(m,n){n=i(n);var o=this.handlers[n.keyCode]||this.handlers[n.which],p,q,r;if(o)for(var s=0;s<o.length;s++){p=o[s].callback;q=o[s].filter;try{if(!q||q(n,m)){r=p(n,m);if(r===false)return Event.kill(n);}}catch(t){}}return true;},resetHandlers:function(){this.handlers={};}});e.exports=l;});
__d("Layer",["event-extensions","function-extensions","ArbiterMixin","BehaviorsMixin","BootloadedReact","ContextualThing","CSS","DataStore","DOM","HTML","KeyEventController","Parent","Style","copyProperties","ge"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('ArbiterMixin'),h=b('BehaviorsMixin'),i=b('BootloadedReact'),j=b('ContextualThing'),k=b('CSS'),l=b('DataStore'),m=b('DOM'),n=b('HTML'),o=b('KeyEventController'),p=b('Parent'),q=b('Style'),r=b('copyProperties'),s=b('ge'),t=[];function u(v,w){this._config=v||{};if(w){this._configure(this._config,w);var x=this._config.addedBehaviors||[];this.enableBehaviors(this._getDefaultBehaviors().concat(x));}}r(u,g);r(u,{init:function(v,w){v.init(w);},initAndShow:function(v,w){v.init(w).show();},show:function(v){v.show();}});r(u.prototype,g,h,{_initialized:false,_root:null,_shown:false,_hiding:false,_causalElement:null,_reactContainer:null,init:function(v){this._configure(this._config,v);var w=this._config.addedBehaviors||[];this.enableBehaviors(this._getDefaultBehaviors().concat(w));this._initialized=true;return this;},_configure:function(v,w){if(w){var x=m.isNode(w),y=typeof w==='string'||n.isHTML(w);this.containsReactComponent=i.isValidComponent(w);if(y){w=n(w).getRootNode();}else if(this.containsReactComponent){var z=document.createElement('div');i.renderComponent(w,z);w=this._reactContainer=z;}}this._root=this._buildWrapper(v,w);if(v.attributes)m.setAttributes(this._root,v.attributes);if(v.classNames)v.classNames.forEach(k.addClass.curry(this._root));k.addClass(this._root,'uiLayer');if(v.causalElement)this._causalElement=s(v.causalElement);l.set(this._root,'layer',this);},_getDefaultBehaviors:function(){return [];},getCausalElement:function(){return this._causalElement;},setCausalElement:function(v){this._causalElement=v;},getInsertParent:function(){return this._insertParent||document.body;},getRoot:function(){return this._root;},_getContentRoot:function(){return this._root;},_buildWrapper:function(v,w){return w;},setInsertParent:function(v){if(v){if(this._shown&&v!==this.getInsertParent()){m.appendContent(v,this.getRoot());this.updatePosition();}this._insertParent=v;}return this;},show:function(){if(this._shown)return this;var v=this.getRoot();this.inform('beforeshow');q.set(v,'visibility','hidden');q.set(v,'overflow','hidden');k.show(v);m.appendContent(this.getInsertParent(),v);if(this.updatePosition()!==false){t.push(this);this._shown=true;this.inform('show');u.inform('show',this);}else k.hide(v);q.set(v,'visibility','');q.set(v,'overflow','');this.inform('aftershow');return this;},hide:function(){if(this._hiding||!this._shown||this.inform('beforehide')===false)return this;this._hiding=true;if(this.inform('starthide')!==false)this.finishHide();return this;},finishHide:function(){if(this._shown){t.remove(this);this._hiding=false;this._shown=false;k.hide(this.getRoot());this.inform('hide');u.inform('hide',this);}},isShown:function(){return this._shown;},updatePosition:function(){return true;},destroy:function(){if(this.containsReactComponent)i.destroyAndReleaseReactRootNode(this._reactContainer);this.finishHide();var v=this.getRoot();m.remove(v);this.destroyBehaviors();this.inform('destroy');u.inform('destroy',this);l.remove(v,'layer');this._root=this._causalElement=null;}});Event.listen(document.documentElement,'keydown',function(event){if(o.filterEventTargets(event,'keydown'))for(var v=t.length-1;v>=0;v--)if(t[v].inform('key',event)===false)return false;},Event.Priority.URGENT);Event.listen(document.documentElement,'click',function(event){var v=t.length;if(!v)return;var w=event.getTarget();if(!m.contains(document.documentElement,w))return;if(p.byClass(w,'generic_dialog'))return;var x,y;while(v--){x=t[v];y=x.getContentRoot();if(j.containsIncludingLayers(y,w))return;if(x.inform('blur',event)===false)return;}});e.exports=u;});
__d("LayerAutoFocus",["function-extensions","copyProperties","DOMQuery","Input"],function(a,b,c,d,e,f){b('function-extensions');var g=b('copyProperties'),h=b('DOMQuery'),i=b('Input');function j(k){this._layer=k;}g(j.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('aftershow',this._focus.bind(this));},disable:function(){this._subscription.unsubscribe();this._subscription=null;},_focus:function(){var k=h.scry(this._layer.getRoot(),'.autofocus')[0];k&&i.focus(k);}});e.exports=j;});
__d("LayerButtons",["event-extensions","Parent","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Parent'),h=b('copyProperties');function i(j){this._layer=j;}h(i.prototype,{_listener:null,enable:function(){this._listener=Event.listen(this._layer.getRoot(),'click',this._handle.bind(this));},disable:function(){this._listener.remove();this._listener=null;},_handle:function(j){var k=j.getTarget(),l=g.byClass(k,'layerConfirm');if(l){if(this._layer.inform('confirm',l)===false)j.prevent();return;}var m=g.byClass(k,'layerCancel');if(m){if(this._layer.inform('cancel',m)!==false)this._layer.hide();j.prevent();return;}var n=g.byClass(k,'layerButton');if(n)if(this._layer.inform('button',n)===false)j.prevent();}});e.exports=i;});
__d("LayerDestroyOnHide",["function-extensions","copyProperties"],function(a,b,c,d,e,f){b('function-extensions');var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('hide',Function.prototype.defer.shield(this._layer.destroy.bind(this._layer)));},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}}});e.exports=h;});
__d("LayerFadeOnHide",["Animation","Layer","Style","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Layer'),i=b('Style'),j=b('UserAgent'),k=b('copyProperties');function l(m){this._layer=m;}k(l.prototype,{_subscription:null,enable:function(){if(j.ie()<9)return;this._subscription=this._layer.subscribe('starthide',this._handleStartHide.bind(this));},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}},_handleStartHide:function(){var m=true,n=h.subscribe('show',function(){n.unsubscribe();m=false;});(function(){n.unsubscribe();n=null;if(m){this._animate();}else this._layer.finishHide();}).bind(this).defer();return false;},_animate:function(){new g(this._layer.getRoot()).from('opacity',1).to('opacity',0).duration(150).ondone(this._finish.bind(this)).go();},_finish:function(){i.set(this._layer.getRoot(),'opacity','');this._layer.finishHide();}});e.exports=l;});
__d("LayerFadeOnShow",["Animation","Style","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Style'),i=b('UserAgent'),j=b('copyProperties');function k(l){this._layer=l;}j(k.prototype,{_subscriptions:null,enable:function(){if(i.ie()<9)return;this._subscriptions=[this._layer.subscribe('beforeshow',function(){h.set(this._layer.getRoot(),'opacity',0);}.bind(this)),this._layer.subscribe('show',this._animate.bind(this))];},disable:function(){if(this._subscriptions){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;}},_animate:function(){var l=this._layer.getRoot();new g(l).from('opacity',0).to('opacity',1).duration(100).ondone(h.set.curry(l,'opacity','')).go();}});e.exports=k;});
__d("LayerFormHooks",["event-extensions","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscriptions:null,enable:function(){var i=this._layer.getRoot();this._subscriptions=[Event.listen(i,'submit',this._onSubmit.bind(this)),Event.listen(i,'success',this._onSuccess.bind(this)),Event.listen(i,'error',this._onError.bind(this))];},disable:function(){this._subscriptions.forEach(function(i){i.remove();});this._subscriptions=null;},_onSubmit:function(event){if(this._layer.inform('submit',event)===false)event.kill();},_onSuccess:function(event){if(this._layer.inform('success',event)===false)event.kill();},_onError:function(event){var i=event.getData();if(this._layer.inform('error',{response:i.response})===false)event.kill();}});e.exports=h;});
__d("LayerHideOnBlur",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscriptions:null,_onBlur:null,enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attach.bind(this)),this._layer.subscribe('hide',this._detach.bind(this))];if(this._layer.isShown())this._attach();},disable:function(){this._detach();while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;},_detach:function(){this._onBlur&&this._onBlur.unsubscribe();this._onBlur=null;},_attach:function(){(function(){this._onBlur=this._layer.subscribe('blur',this._layer.hide.shield(this._layer));}).bind(this).defer();}});e.exports=h;});
__d("LayerHideOnEscape",["event-extensions","copyProperties","Input","Keys"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('Input'),i=b('Keys');function j(k){this._layer=k;}g(j.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('key',this._handle.bind(this));},disable:function(){this._subscription.unsubscribe();this._subscription=null;},_handle:function(k,event){if(Event.getKeyCode(event)===i.ESC){var l=this._layer.getCausalElement();if(l)if(l.tabIndex!=-1)h.focus(l);this._layer.hide();return false;}}});e.exports=j;});
__d("LayerHideOnSuccess",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('success',this._layer.hide.bind(this._layer));},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}}});e.exports=h;});
__d("LayerHideOnTransition",["Arbiter","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('copyProperties');function i(j){this._layer=j;}h(i.prototype,{_subscription:null,enable:function(){this._subscription=g.subscribe('page_transition',this._layer.hide.shield(this._layer),g.SUBSCRIBE_NEW);},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}}});e.exports=i;});
__d("TabbableElements",["Style","createArrayFrom"],function(a,b,c,d,e,f){var g=b('Style'),h=b('createArrayFrom'),i={find:function(j){function k(n){if(n.tabIndex>0)return true;switch(n.tagName){case "A":return n.href&&n.rel!="ignore";case "INPUT":return n.type!="hidden"&&n.type!="file"&&!n.disabled;case "SELECT":return !n.disabled;case "TEXTAREA":return !n.disabled;default:return false;}}function l(n){if(n.offsetHeight===0&&n.offsetWidth===0)return true;var o=n;while(o&&o!=j&&g.get(o,'visibility')!=='hidden')o=o.parentNode;return o!==j;}var m=h(j.getElementsByTagName("*"));return m.filter(function(n){return k(n)&&!l(n);});}};e.exports=i;});
__d("LayerTabIsolation",["event-extensions","copyProperties","TabbableElements","Keys","Input"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('TabbableElements'),i=b('Keys'),j=b('Input');function k(l){this._layer=l;}g(k.prototype,{_tabHandler:null,_subscriptions:[],enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attachHandler.bind(this)),this._layer.subscribe('hide',this._detachHandler.bind(this))];},disable:function(){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._detachHandler();},_attachHandler:function(){var l=this._layer.getRoot();this._tabHandler=Event.listen(l,'keydown',function(m){if(Event.getKeyCode(m)==i.TAB){var n=m.getTarget();if(n){var o=h.find(l),p=o[0],q=o[o.length-1],r=m.getModifiers().shift;if(r&&n==p){m.preventDefault();j.focus(q);}else if(!r&&n==q){m.preventDefault();j.focus(p);}}}});},_detachHandler:function(){if(this._tabHandler){this._tabHandler.remove();this._tabHandler=null;}}});e.exports=k;});
__d("LayerMouseHooks",["event-extensions","function-extensions","DOM","Layer","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('DOM'),h=b('Layer'),i=b('copyProperties');function j(k){this._layer=k;}i(j.prototype,{_mouseSubscriptions:[],_layerSubscriptions:[],enable:function(){var k=this._layer.getRoot();this._mouseSubscriptions=[Event.listen(k,'mouseenter',this._onMouseEnter.bind(this)),Event.listen(k,'mouseleave',this._onMouseLeave.bind(this))];this._layerSubscriptions=[h.subscribe('show',this._onLayerShow.bind(this)),h.subscribe('hide',this._onLayerHide.bind(this))];},disable:function(){this._mouseSubscriptions.forEach(function(k){k.remove();});this._mouseSubscriptions=[];this._layerSubscriptions.forEach(function(k){h.unsubscribe(k);});this._layerSubscriptions=[];},_onMouseEnter:function(k){this._fireMouseLeaveOnLayerHide=false;if(!this._spawnedLayer)this._layer.inform('mouseenter');},_onMouseLeave:function(k){if(!this._spawnedLayer)this._layer.inform('mouseleave');this._fireMouseLeaveOnLayerHide=!!this._spawnedLayer;},_onLayerShow:function(k,l){var m=l.getContext&&l.getContext();if(m)if(g.contains(this._layer.getRoot(),m))this._spawnedLayer=l;},_onLayerHide:function(k,l){if(l===this._spawnedLayer){this._spawnedLayer=null;if(this._fireMouseLeaveOnLayerHide)this._onMouseLeave.bind(this).defer();}}});e.exports=j;});
__d("Overlay",["Class","CSS","DataStore","DOM","Layer","LayerAutoFocus","LayerButtons","LayerDestroyOnHide","LayerFadeOnHide","LayerFadeOnShow","LayerFormHooks","LayerHideOnBlur","LayerHideOnEscape","LayerHideOnSuccess","LayerHideOnTransition","LayerTabIsolation","LayerMouseHooks","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('Layer'),l=b('LayerAutoFocus'),m=b('LayerButtons'),n=b('LayerDestroyOnHide'),o=b('LayerFadeOnHide'),p=b('LayerFadeOnShow'),q=b('LayerFormHooks'),r=b('LayerHideOnBlur'),s=b('LayerHideOnEscape'),t=b('LayerHideOnSuccess'),u=b('LayerHideOnTransition'),v=b('LayerTabIsolation'),w=b('LayerMouseHooks'),x=b('copyProperties');function y(z,aa){z=x({buildWrapper:true},z||{});this._shouldBuildWrapper=z.buildWrapper;this.parent.construct(this,z,aa);}g.extend(y,k);x(y.prototype,{_configure:function(z,aa){this.parent._configure(z,aa);var ba=this.getRoot();this._overlay=j.scry(ba,'div.uiOverlay')[0]||ba;h.hide(ba);j.appendContent(this.getInsertParent(),ba);i.set(this._overlay,'overlay',this);var ca=i.get(this._overlay,'width');ca&&this.setWidth(ca);if(this.setFixed)this.setFixed(i.get(this._overlay,'fixed')=='true');if(i.get(this._overlay,'fadeonshow')!='false')this.enableBehavior(p);if(i.get(this._overlay,'fadeonhide')!='false')this.enableBehavior(o);if(i.get(this._overlay,'hideonsuccess')!='false')this.enableBehavior(t);if(i.get(this._overlay,'hideonblur')=='true')this.enableBehavior(r);if(i.get(this._overlay,'destroyonhide')!='false')this.enableBehavior(n);return this;},_getDefaultBehaviors:function(){return this.parent._getDefaultBehaviors().concat([l,m,q,w,s,u,v]);},initWithoutBuildingWrapper:function(){this._shouldBuildWrapper=false;return this.init.apply(this,arguments);},_buildWrapper:function(z,aa){aa=this.parent._buildWrapper(z,aa);if(!this._shouldBuildWrapper){this._contentRoot=aa;return aa;}this._contentRoot=j.create('div',{className:'uiOverlayContent'},aa);return j.create('div',{className:'uiOverlay'},this._contentRoot);},getContentRoot:function(){return this._contentRoot;},destroy:function(){i.remove(this.getRoot(),'overlay');this.parent.destroy();}});e.exports=y;});
__d("ContextualDialogX",["event-extensions","ARIA","Arbiter","ArbiterMixin","Bootloader","Class","ContextualDialogFooterLink","ContextualThing","CSS","DataStore","DOM","Locale","Overlay","Parent","Style","Vector","$","copyProperties","getOverlayZIndex"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ARIA'),h=b('Arbiter'),i=b('ArbiterMixin'),j=b('Bootloader'),k=b('Class'),l=b('ContextualDialogFooterLink'),m=b('ContextualThing'),n=b('CSS'),o=b('DataStore'),p=b('DOM'),q=b('Locale'),r=b('Overlay'),s=b('Parent'),t=b('Style'),u=b('Vector'),v=b('$'),w=b('copyProperties'),x=b('getOverlayZIndex');function y(z,aa){this.parent.construct(this,z,aa);}k.extend(y,r);w(y,i,{ARROW_OFFSET:15,ARROW_LENGTH:16,ARROW_INSET:22,TOP_MARGIN:8,BOTTOM_MARGIN:30,LEFT_MARGIN:15,RIGHT_MARGIN:30,POSITION_TO_CLASS:{above:'uiContextualDialogAbove',below:'uiContextualDialogBelow',left:'uiContextualDialogLeft',right:'uiContextualDialogRight'},RIGHT_ALIGNED_CLASS:'uiContextualDialogRightAligned',ARROW_CLASS:{bottom:'uiContextualDialogArrowBottom',top:'uiContextualDialogArrowTop',right:'uiContextualDialogArrowRight',left:'uiContextualDialogArrowLeft'},POSITION_TO_ARROW:{above:'bottom',below:'top',left:'right',right:'left'},getInstance:function(z){var aa=o.get(z,'ContextualDialogX');if(!aa){var ba=s.byClass(z,'uiOverlay');if(ba)aa=o.get(ba,'overlay');}return aa;}});w(y.prototype,{_scrollListener:null,_scrollParent:null,_width:null,_fixed:false,_hasCustomArrow:false,_hasFooter:false,_showSubscription:null,_hideSubscription:null,_hovercardSubscription:null,_setContextSubscription:null,_resizeListener:null,_reflowSubscription:null,_configure:function(z,aa){this.parent._configure(z,aa);var ba=this.getRoot(),ca=o.get.curry(ba);this.setAlignH(ca('alignh','left'));this.setOffsetX(ca('offsetx',0));this.setOffsetY(ca('offsety',0));this.setPosition(ca('position','above'));this._hasCustomArrow=ca('hascustomarrow',false);this._hasFooter=ca('hasfooter',false);if(this._hasFooter){var da=p.scry(ba,'.uiContextualDialogFooterLink')[0];da&&this.enableBehavior(l);}this._setContextSubscription=this.subscribe('beforeshow',function(){this.unsubscribe(this._setContextSubscription);this._setContextSubscription=null;var ea=ca('context');if(ea){this.setContext(v(ea));}else{ea=ca('contextselector');if(ea)this.setContext(p.find(document,ea));}}.bind(this));this._content=p.scry(ba,'.uiContextualDialogContent')[0];this._showSubscription=this.subscribe('show',function(){var ea=this.updatePosition.shield(this);this._resizeListener=Event.listen(window,'resize',ea);this._reflowSubscription=h.subscribe('reflow',ea);this._setupScrollListener(this._scrollParent);m.register(ba,this.context);h.inform('layer_shown',{type:'ContextualDialog'});}.bind(this));this._hideSubscription=this.subscribe('hide',function(){this._teardownResizeAndReflowListeners();this._teardownScrollListener();m.remove(ba);h.inform('layer_hidden',{type:'ContextualDialog'});}.bind(this));this._hovercardSubscription=h.subscribe('Hovercard/hide',function(ea,fa){if(a.Hovercard.contains(this.getContext()))this.hide();}.bind(this));return this;},_buildWrapper:function(z,aa){var ba=this.parent._buildWrapper(z,aa);if(!this._shouldBuildWrapper)return ba;n.addClass(ba,'uiContextualDialog');return p.create('div',{className:'uiContextualDialogPositioner'},ba);},setWidth:function(z){this._width=Math.floor(z);return this;},setFixed:function(z){z=!!z;n.conditionClass(this.getRoot(),'uiContextualDialogFixed',z);this._fixed=z;return this;},setAlignH:function(z){this.alignH=z;this._updateAlignmentClass();this._shown&&this.updatePosition();this.position&&this._updateArrow();return this;},getContent:function(){return this._content;},getContext:function(){return this.context;},setContext:function(z){if(this._setContextSubscription){this.unsubscribe(this._setContextSubscription);this._setContextSubscription=null;}z=v(z);if(this.context&&this.context!=z)o.remove(this.context,'ContextualDialogX');this.context=z;g.setPopup(this.getCausalElement(),this.getRoot());var aa=s.byClass(z,'fbPhotoSnowlift');this.setInsertParent(aa||document.body);if(this._scrollListener&&this._scrollParent!==aa){this._teardownScrollListener();this._setupScrollListener(aa);}this._scrollParent=aa;var ba=x(z,this._insertParent);t.set(this.getRoot(),'z-index',ba>200?ba:'');o.set(this.context,'ContextualDialogX',this);return this;},getCausalElement:function(){return this.parent.getCausalElement()||this.context;},listen:function(z,aa){return Event.listen(this.getRoot(),z,aa);},setOffsetX:function(z){this.offsetX=parseInt(z,10)||0;this._shown&&this.updatePosition();return this;},setOffsetY:function(z){this.offsetY=parseInt(z,10)||0;this._shown&&this.updatePosition();return this;},setPosition:function(z){this.position=z;for(var aa in y.POSITION_TO_CLASS)n.conditionClass(this.getRoot(),y.POSITION_TO_CLASS[aa],z==aa);this._updateAlignmentClass();this._shown&&this.updatePosition();this._updateArrow();return this;},updatePosition:function(){if(!this.context)return false;if(this._width)t.set(this._overlay,'width',this._width+'px');var z=this._fixed?'viewport':'document',aa=u.getElementPosition(this.context,z),ba=this._scrollParent;if(ba)aa=aa.sub(u.getElementPosition(ba,'document')).add(ba.scrollLeft,ba.scrollTop);var ca=u.getElementDimensions(this.context),da=this.position=='above'||this.position=='below',ea=q.isRTL();if((this.position=='right'||(da&&this.alignH=='right'))!=ea)aa=aa.add(ca.x,0);if(this.position=='below')aa=aa.add(0,ca.y);var fa=new u(0,0);if(da&&this.alignH=='center'){fa=fa.add((ca.x-this._width)/2,0);}else{var ga=da?ca.x:ca.y,ha=2*y.ARROW_INSET;if(ga<ha){var ia=ga/2-y.ARROW_INSET;if(da&&(this.alignH=='right'!=ea))ia=-ia;fa=fa.add(da?ia:0,da?0:ia);}}fa=fa.add(this.offsetX,this.offsetY);if(ea)fa=fa.mul(-1,1);aa=aa.add(fa);if(this._fixed)aa=new u(aa.x,aa.y,'document');aa.setElementPosition(this.getRoot());this._adjustVerticalPosition();this._adjustHorizontalPosition();return true;},scrollTo:function(){if(this.context)j.loadModules(['DOMScroll'],function(z){z.scrollTo(this.context,true,true);}.bind(this));},destroy:function(){this.unsubscribe(this._showSubscription);this.unsubscribe(this._hideSubscription);this._hovercardSubscription.unsubscribe();if(this._setContextSubscription){this.unsubscribe(this._setContextSubscription);this._setContextSubscription=null;}this._teardownScrollListener();this._teardownResizeAndReflowListeners();this.context&&o.remove(this.context,'ContextualDialogX');this.parent.destroy();},_adjustVerticalPosition:function(){if(this.position!='left'&&this.position!='right'){t.set(this._overlay,'top','');return;}var z=this.getRoot(),aa=u.getElementPosition(z,'viewport').y,ba=u.getElementDimensions(this._overlay).y,ca=u.getViewportDimensions().y,da=y.TOP_MARGIN,ea=Math.min(Math.max(0,aa+ba+y.BOTTOM_MARGIN-ca),Math.max(-da,aa-da),ba-2*y.ARROW_INSET);t.set(this._overlay,'top',(-1*ea)+'px');t.set(this._arrow,'top',y.ARROW_OFFSET+'px');t.set(this._arrow,'marginTop',ea+'px');},_adjustHorizontalPosition:function(){if((this.position!='above'&&this.position!='below')||this.alignH!='left'){t.set(this._overlay,'left','');t.set(this._overlay,'right','');return;}var z=this.getRoot(),aa=u.getElementPosition(z,'viewport').x,ba=u.getElementDimensions(this._overlay).x,ca=u.getViewportDimensions().x,da=q.isRTL(),ea;if(!da){ea=aa+ba+y.RIGHT_MARGIN-ca;}else ea=y.LEFT_MARGIN+ba-aa;ea=Math.min(Math.max(0,ea),ba-2*y.ARROW_INSET);t.set(this._overlay,da?'right':'left',-1*ea+'px');t.set(this._arrow,da?'right':'left',y.ARROW_OFFSET+'px');t.set(this._arrow,da?'marginRight':'marginLeft',ea+'px');},_updateArrow:function(){var z=0;if(this.position=='above'||this.position=='below')switch(this.alignH){case 'center':z=50;break;case 'right':z=100;break;}this._renderArrow(y.POSITION_TO_ARROW[this.position],z);},_renderArrow:function(z,aa){for(var ba in y.ARROW_CLASS)n.conditionClass(this._overlay,y.ARROW_CLASS[ba],z==ba);n.conditionClass(this._overlay,'uiContextualDialogWithFooterArrowBottom',z=='bottom'&&this._hasFooter);if(z=='none')return;if(!this._arrow){this._arrow=p.create('i',{className:'uiContextualDialogArrow'});p.appendContent(this._overlay,this._arrow);}t.set(this._arrow,'top','');t.set(this._arrow,'left','');t.set(this._arrow,'right','');t.set(this._arrow,'margin','');var ca=z=='top'||z=='bottom',da=ca?(q.isRTL()?'right':'left'):'top';aa=aa||0;t.set(this._arrow,da,aa+'%');var ea=y.ARROW_LENGTH+y.ARROW_OFFSET*2,fa=-(ea*aa/100-y.ARROW_OFFSET);t.set(this._arrow,'margin-'+da,fa+'px');if(this._hasCustomArrow)y.inform('arrow_rendered',{type:'ContextualDialog',root:this._root,position:z,side:da,offset_percent:aa,side_margin:fa});},_updateAlignmentClass:function(){n.conditionClass(this.getRoot(),y.RIGHT_ALIGNED_CLASS,(this.position=='above'||this.position=='below')&&this.alignH=='right');},_setupScrollListener:function(z){this._scrollListener=Event.listen(z||window,'scroll',this._adjustVerticalPosition.shield(this));},_teardownScrollListener:function(){if(this._scrollListener){this._scrollListener.remove();this._scrollListener=null;}},_teardownResizeAndReflowListeners:function(){if(this._resizeListener){this._resizeListener.remove();this._resizeListener=null;}if(this._reflowSubscription){this._reflowSubscription.unsubscribe();this._reflowSubscription=null;}}});e.exports=y;});
__d("Rect",["Vector","$","copyProperties"],function(a,b,c,d,e,f){var g=b('Vector'),h=b('$'),i=b('copyProperties');function j(k,l,m,n,o){if(arguments.length===1){if(k instanceof j)return k;if(k instanceof g)return new j(k.y,k.x,k.y,k.x,k.domain);return j.getElementBounds(h(k));}i(this,{t:k,r:l,b:m,l:n,domain:o||'pure'});}i(j.prototype,{w:function(){return this.r-this.l;},h:function(){return this.b-this.t;},toString:function(){return '(('+this.l+', '+this.t+'), ('+this.r+', '+this.b+'))';},contains:function(k){k=new j(k).convertTo(this.domain);var l=this;return (l.l<=k.l&&l.r>=k.r&&l.t<=k.t&&l.b>=k.b);},add:function(k,l){if(arguments.length==1){if(k.domain!='pure')k=k.convertTo(this.domain);return this.add(k.x,k.y);}var m=parseFloat(k),n=parseFloat(l);return new j(this.t+n,this.r+m,this.b+n,this.l+m,this.domain);},sub:function(k,l){if(arguments.length==1){return this.add(k.mul(-1));}else return this.add(-k,-l);},boundWithin:function(k){var l=0,m=0;if(this.l<k.l){l=k.l-this.l;}else if(this.r>k.r)l=k.r-this.r;if(this.t<k.t){m=k.t-this.t;}else if(this.b>k.b)m=k.b-this.b;return this.add(l,m);},getCenter:function(){return new g(this.l+this.w()/2,this.t+this.h()/2,this.domain);},getPositionVector:function(){return new g(this.l,this.t,this.domain);},getDimensionVector:function(){return new g(this.w(),this.h(),'pure');},convertTo:function(k){if(this.domain==k)return this;if(k=='pure')return new j(this.t,this.r,this.b,this.l,'pure');if(this.domain=='pure')return new j(0,0,0,0);var l=new g(this.l,this.t,this.domain).convertTo(k);return new j(l.y,l.x+this.w(),l.y+this.h(),l.x,k);}});i(j,{deserialize:function(k){var l=k.split(':');return new j(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[0]));},newFromVectors:function(k,l){return new j(k.y,k.x+l.x,k.y+l.y,k.x,k.domain);},getElementBounds:function(k){return j.newFromVectors(g.getElementPosition(k),g.getElementDimensions(k));},getViewportBounds:function(){return j.newFromVectors(g.getScrollPosition(),g.getViewportDimensions());},minimumBoundingBox:function(k){var l=new j(Math.min(),Math.max(),Math.max(),Math.min()),m;for(var n=0;n<k.length;n++){m=k[n];l.t=Math.min(l.t,m.t);l.r=Math.max(l.r,m.r);l.b=Math.max(l.b,m.b);l.l=Math.min(l.l,m.l);}return l;}});e.exports=j;});
__d("Hovercard",["ClickRef","event-extensions","function-extensions","AccessibleLayer","Arbiter","AsyncRequest","AsyncSignal","ContextualDialogX","CSS","DOM","DOMQuery","LayerDestroyOnHide","LayerFadeOnHide","LayerFadeOnShow","Parent","Rect","UserAgent","URI","Vector","ViewportBounds","clickRefAction","tx","userAction"],function(a,b,c,d,e,f){b('ClickRef');b('event-extensions');b('function-extensions');var g=b('AccessibleLayer'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('AsyncSignal'),k=b('ContextualDialogX'),l=b('CSS'),m=b('DOM'),n=b('DOMQuery'),o=b('LayerDestroyOnHide'),p=b('LayerFadeOnHide'),q=b('LayerFadeOnShow'),r=b('Parent'),s=b('Rect'),t=b('UserAgent'),u=b('URI'),v=b('Vector'),w=b('ViewportBounds'),x=b('clickRefAction'),y=b('tx'),z=b('userAction'),aa=450,ba=385,ca={},da={},ea=null,fa=null,ga=null,ha=150,ia=700,ja=1000,ka=250,la=null,ma=null,na=null,oa=null;function pa(){if(t.ie()<7)return;Event.listen(document.documentElement,'mouseover',qa);Event.listen(window,'scroll',function(){lb.hide(true);});h.subscribe('page_transition',function(){wa();lb.dirtyAll();},h.SUBSCRIBE_NEW);h.subscribe('layer_shown',function(mb,nb){if(nb.type!='Hovercard'&&nb.type!='ContextualDialog')wa();},h.SUBSCRIBE_NEW);k.subscribe('arrow_rendered',ya,h.SUBSCRIBE_NEW);}function qa(event){var mb=r.byTag(event.getTarget(),'a');lb.processNode(mb)&&event.stop();}function ra(mb){fa=mb;if(!sa(mb)){var nb;if(!mb||!(nb=ta(mb))){da.moveToken&&da.moveToken.remove();da={};return false;}if(da.node!=mb){da.moveToken&&da.moveToken.remove();da={node:mb,endpoint:nb,pos:null};}}return true;}function sa(mb){return mb&&ea&&da.node==mb;}function ta(mb){return mb.getAttribute('data-hovercard');}function ua(mb){var nb=Event.listen(mb,'mouseout',function(){clearTimeout(la);clearTimeout(ma);nb.remove();fa=null;lb.hide();});if(!da.moveToken)da.moveToken=Event.listen(mb,'mousemove',function(event){da.pos=v.getEventPosition(event);});clearTimeout(la);clearTimeout(ma);clearTimeout(oa);var ob=ha,pb=ea?ka:ia;if(mb.getAttribute('data-hovercard-instant'))ob=pb=50;la=setTimeout(hb.curry(mb),ob);ma=setTimeout(va.curry(mb),pb);}function va(mb,nb){if(da.node!=mb)return;var ob=ca[ta(mb)];if(ob){xa(ob);}else if(nb){xa(jb());}else{var pb=ea?ka:ia;na=setTimeout(va.curry(mb,true),ja-pb);}}function wa(){lb.hide(true);clearTimeout(ma);}function xa(mb){var nb=da.node,ob=ea,pb=ob!=nb;if(ea){var qb=k.getInstance(ea);qb&&qb.hide();}if(!m.contains(document.body,nb)){lb.hide(true);return;}ea=nb;ga=mb;db();mb.setContext(nb).show();if(pb){(function(){new j('/ajax/hovercard/shown.php').send();x('himp',ea,null,'FORCE',{ft:{evt:39}});z('hovercard',ea).uai('show');}).defer();if(ob){h.inform('Hovercard/hide',{node:ob});}else h.inform('layer_shown',{type:'Hovercard'});h.inform('Hovercard/show',{node:nb});}}function ya(mb,nb){var ob=ca[da.endpoint];if(nb.type!=='ContextualDialog'||!ob||!nb.root||nb.position!=='top')return;var pb=n.scry(nb.root,'.CustomArrow')[0];if(!pb)return;var qb=n.scry(pb,'.ArrowShadow')[0];if(!qb)return;var rb=null;if(pb.style.webkitMaskPosition!==undefined){rb=bb;}else if(za(pb))rb=cb;if(rb){l.addClass(nb.root,'withCustomArrow');setTimeout(function(){rb(pb,qb,nb);},0);}}function za(mb){if(!mb)mb=document.body;var nb=['transform','WebkitTransform','msTransform','MozTransform','OTransform'],ob;while(ob=nb.shift())if(mb.style[ob]!==undefined)return ob;return null;}function ab(mb,nb,ob){var pb=mb.parentNode.offsetWidth,qb=Math.round(pb*ob.offset_percent/100);if(ob.side==='left'){qb=qb+ob.side_margin;}else if(ob.side==='right')qb=pb-qb-ob.side_margin-18;return qb;}function bb(mb,nb,ob){l.addClass(ob.root,'usingMask');var pb=ab(mb,nb,ob);mb.style.webkitMaskPositionX=pb+'px';nb.style.left=pb+'px';}function cb(mb,nb,ob){var pb=n.scry(mb,'.CoverPhoto')[0];if(!pb)return;var qb=za(mb);if(!qb)return;l.addClass(ob.root,'usingRotate');var rb=ab(mb,nb,ob)+9,sb=Math.ceil(rb/Math.SQRT2);pb.style[qb]='translate('+(-sb)+'px, '+sb+'px) rotate(-45deg)';mb.style[qb]='translate('+rb+'px, 0) rotate(45deg)';}function db(){var mb=v.getViewportDimensions(),nb=v.getElementPosition(ea,'viewport'),ob=nb.convertTo('document'),pb=gb(ea),qb='above',rb='left',sb=fb(ob,pb,'above');if(nb.y+sb<=ba){var tb=fb(ob,pb,'below');if(nb.y+tb+ea.offsetHeight+ba<mb.y){qb='below';sb=tb;}}var ub=mb.x-w.getRight(),vb=eb(ob,pb,'left');if(nb.x+vb+aa>=ub){var wb=eb(ob,pb,'right');if(nb.x+wb+ea.offsetWidth>aa){rb='right';vb=wb;}}ga.setPosition(qb).setAlignH(rb).setOffsetX(vb).setOffsetY(sb);}function eb(mb,nb,ob){if(ob=='left')return nb.l-mb.x;return nb.r-(mb.x+ea.offsetWidth);}function fb(mb,nb,ob){if(ob=='above')return nb.t-mb.y;return nb.b-(mb.y+ea.offsetHeight);}function gb(mb){var nb=da.pos,ob=mb.getClientRects();if(!nb||ob.length===0)return s.getElementBounds(mb);var pb,qb=false;for(var rb=0;rb<ob.length;rb++){var sb=new s(Math.round(ob[rb].top),Math.round(ob[rb].right),Math.round(ob[rb].bottom),Math.round(ob[rb].left),'viewport').convertTo('document'),tb=sb.getPositionVector(),ub=tb.add(sb.getDimensionVector());if(!pb||(tb.x<=pb.l&&tb.y>pb.t)){if(qb)break;pb=new s(tb.y,ub.x,ub.y,tb.x,'document');}else{pb.t=Math.min(pb.t,tb.y);pb.b=Math.max(pb.b,ub.y);pb.r=ub.x;}if(sb.contains(nb))qb=true;}return pb;}function hb(mb){if(mb.id&&ca[mb.id]!=null)return;var nb=ta(mb);if(ca[nb]!=null)return;ib(nb);var ob=function(){lb.dirty(nb);wa();};new i(nb).setData({endpoint:nb}).setMethod('GET').setReadOnly(true).setErrorHandler(ob).setTransportErrorHandler(ob).send();}function ib(mb){ca[mb]=false;}var jb=function(){var mb=new k({},m.create('div',{className:'HovercardLoading'},"Loading..."));mb.disableBehavior(g).disableBehavior(o).disableBehavior(q).disableBehavior(p);kb(mb);jb=bagof(mb);return mb;};function kb(mb){mb.subscribe('mouseenter',function(){clearTimeout(oa);fa=da.node;});mb.subscribe('mouseleave',function(){lb.hide(false);fa=null;});}var lb={hide:function(mb){if(!ea)return;if(mb){if(ga){h.inform('layer_hidden',{type:'Hovercard'});h.inform('Hovercard/hide',{node:ea});ga.hide();}fa=null;ea=null;ga=null;}else oa=setTimeout(lb.hide.curry(true),ka);},setDialog:function(mb,nb){nb.disableBehavior(g);ca[mb]=nb;kb(nb);if(da.endpoint==mb&&fa==da.node)xa(nb);},getDialog:function(mb){return ca[mb];},contains:function(mb){if(ga)return m.contains(ga.getRoot(),mb);return false;},dirty:function(mb){var nb=ca[mb];if(nb){nb.destroy();delete ca[mb];}},dirtyAll:function(){for(var mb in ca){var nb=ca[mb];nb&&lb.dirty(mb);}h.inform('Hovercard/dirty');},processNode:function(mb){if(mb&&ra(mb)){ua(mb);return true;}return false;}};if(!a.Hovercard){pa();}else lb=a.Hovercard;e.exports=lb;a.Hovercard=e.exports;});
__d("HoverFlyout",["event-extensions","ArbiterMixin","Class","DataStore","LayerDestroyOnHide","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('Class'),i=b('DataStore'),j=b('LayerDestroyOnHide'),k=b('copyProperties');function l(m,n,o,p){if(m){this._showDelay=o;this._hideDelay=p;this.init(m);if(n)this.initNode(n);}}k(l.prototype,g,{init:function(m){this._flyout=m;this._showDelay=this._showDelay||0;this._hideDelay=this._hideDelay||100;this._showTimeout=null;this._hideTimeout=null;this._flyoutSubscriptions=[this._flyout.subscribe('mouseenter',this._onFlyoutMouseEnter.bind(this)),this._flyout.subscribe('mouseleave',this.hideFlyout.shield(this))];this._nodes=[];this._dataStoreUnique='HoverFlyout_'+Date.now()+'_listeners';this._flyout.disableBehavior(j);return this;},initNode:function(m){if(this._nodes.contains(m))return this;this._nodes.push(m);i.set(m,this._dataStoreUnique,[Event.listen(m,'mouseenter',this._onNodeMouseEnter.bind(this,m)),Event.listen(m,'mouseleave',this.hideFlyout.shield(this))]);return this;},deactivateNode:function(m){var n=i.get(m,this._dataStoreUnique);if(n)while(n.length)n.pop().remove();this._nodes.remove(m);},setShowDelay:function(m){this._showDelay=m;return this;},setHideDelay:function(m){this._hideDelay=m;return this;},showFlyout:function(m,n){this.setActiveNode(m);if(n){this._flyout.setContext(m).show();this.inform('show',m);}else this._showTimeout=this.showFlyout.bind(this,m,true).defer(this._showDelay);return this;},hideFlyout:function(m){clearTimeout(this._showTimeout);if(m){this._flyout.hide();this._activeNode&&this.inform('hide',this._activeNode);this._activeNode=null;}else this._hideTimeout=this.hideFlyout.bind(this,true).defer(this._hideDelay);},hideFlyoutDelayed:function(m){clearTimeout(this._showTimeout);clearTimeout(this._hideTimeout);this._hideTimeout=this.hideFlyout.bind(this,true).defer(m);},getActiveNode:function(){return this._activeNode;},setActiveNode:function(m){clearTimeout(this._hideTimeout);if(this._activeNode&&this._activeNode!==m)this.hideFlyout(true);this._activeNode=m;return this;},clearNodes:function(){for(var m=this._nodes.length;m>0;m--)this.deactivateNode(this._nodes[m-1]);},destroy:function(){while(this._flyoutSubscriptions.length)this._flyout.unsubscribe(this._flyoutSubscriptions.pop());this.clearNodes();},_onNodeMouseEnter:function(m){if(this._activeNode===m){clearTimeout(this._hideTimeout);}else this.showFlyout(m);},_onFlyoutMouseEnter:function(){clearTimeout(this._hideTimeout);}});e.exports=a.HoverFlyout||l;});
__d("SimpleDrag",["event-extensions","ArbiterMixin","Class","UserAgent","Vector","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('Class'),i=b('UserAgent'),j=b('Vector'),k=b('copyProperties');function l(m){this.minDragDistance=0;Event.listen(m,'mousedown',this._start.bind(this));}k(l.prototype,g,{setMinDragDistance:function(m){this.minDragDistance=m;},_start:function(event){var m=false,n=true,o=null;if(this.inform('mousedown',event))n=false;if(this.minDragDistance){o=j.getEventPosition(event);}else{m=true;if(this.inform('start',event))n=false;}var p=i.ie()<9?document.documentElement:window,q=Event.listen(p,{selectstart:n?Event.prevent:bagofholding,mousemove:function(event){if(!m){var r=j.getEventPosition(event);if(o.distanceTo(r)<this.minDragDistance)return;m=true;this.inform('start',event);}this.inform('update',event);}.bind(this),mouseup:function(event){for(var r in q)q[r].remove();if(m){this.inform('end',event);}else this.inform('click',event);}.bind(this)});return !n;}});e.exports=l;});
__d("legacy:bind",["bind"],function(a,b,c,d){a.bind=b('bind');},3);
__d("ScrollAwareDOM",["ArbiterMixin","CSS","DOM","DOMDimensions","DOMPosition","DOMQuery","HTML","Vector","ViewportBounds","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('CSS'),i=b('DOM'),j=b('DOMDimensions'),k=b('DOMPosition'),l=b('DOMQuery'),m=b('HTML'),n=b('Vector'),o=b('ViewportBounds'),p=b('copyProperties');function q(v,w){return function(){u.monitor(arguments[v],w.curry.apply(w,arguments));};}function r(v){if(!(v instanceof Array))v=[v];for(var w=0;w<v.length;w++){var x=m.replaceJSONWrapper(v[w]);if(x instanceof m){return x.getRootNode();}else if(i.isNode(x))return x;}return null;}function s(v){return k.getElementPosition(v).y>=o.getTop();}function t(v){var w=k.getElementPosition(v).y+j.getElementDimensions(v).height,x=j.getViewportDimensions().height-o.getBottom();return w>=x;}var u=p({monitor:function(v,w){var x=r(v);if(x){var y=!!x.offsetParent;if(y&&(s(x)||t(x)))return w();var z=n.getDocumentDimensions(),aa=w();if(y||(x.offsetParent&&!s(x))){var ba=n.getDocumentDimensions().sub(z),ca={delta:ba,target:x};if(u.inform('scroll',ca)!==false)ba.scrollElementBy(l.getDocumentScrollElement());}return aa;}else return w();},replace:function(v,w){var x=r(w);if(!x||h.hasClass(x,'hidden_elem'))x=v;return u.monitor(x,function(){i.replace(v,w);});},prependContent:q(1,i.prependContent),insertAfter:q(1,i.insertAfter),insertBefore:q(1,i.insertBefore),setContent:q(0,i.setContent),appendContent:q(1,i.appendContent),remove:q(0,i.remove),empty:q(0,i.empty)},g);e.exports=u;});
__d("legacy:link-controller",["LinkController"],function(a,b,c,d){a.LinkController=b('LinkController');},3);
__d("ContextualLayer",["array-extensions","event-extensions","Arbiter","ARIA","Class","ContextualThing","CSS","DataStore","DOM","Layer","LayerHideOnTransition","Locale","Parent","Style","Vector","copyProperties","getOverlayZIndex"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('Arbiter'),h=b('ARIA'),i=b('Class'),j=b('ContextualThing'),k=b('CSS'),l=b('DataStore'),m=b('DOM'),n=b('Layer'),o=b('LayerHideOnTransition'),p=b('Locale'),q=b('Parent'),r=b('Style'),s=b('Vector'),t=b('copyProperties'),u=b('getOverlayZIndex');function v(aa){return aa.getPosition()==='left'||(aa.isVertical()&&aa.getAlignment()==='right');}function w(aa){var ba=aa.parentNode;if(ba){var ca=r.get(ba,'position');if(ca==='static'){if(ba===document.body){ba=document.documentElement;}else ba=w(ba);}else return ba;}else ba=document.documentElement;return ba;}function x(aa,ba){this.parent.construct(this,aa,ba);}var y=[];g.subscribe('reflow',function(){y.forEach(function(aa){if(aa.updatePosition()===false)aa.hide();});});i.extend(x,n);t(x.prototype,{_contentWrapper:null,_content:null,_contextNode:null,_contextSelector:null,_parentLayer:null,_parentSubscription:null,_orientation:null,_orientationClass:null,_configure:function(aa,ba){this.parent._configure(aa,ba);if(aa.context){this.setContext(aa.context);}else if(aa.contextID){this._setContextID(aa.contextID);}else if(aa.contextSelector)this._setContextSelector(aa.contextSelector);aa.position&&this.setPosition(aa.position);aa.alignment&&this.setAlignment(aa.alignment);aa.offsetX&&this.setOffsetX(aa.offsetX);aa.offsetY&&this.setOffsetY(aa.offsetY);this._content=ba;},_getDefaultBehaviors:function(){return this.parent._getDefaultBehaviors().concat([o]);},_buildWrapper:function(aa,ba){this._contentWrapper=m.create('div',{className:'uiContextualLayer'},ba);return m.create('div',{className:'uiContextualLayerPositioner'},this._contentWrapper);},getInsertParent:function(){var aa=this._insertParent;if(!aa){var ba=this.getContext();if(ba)aa=q.byClass(ba,'uiContextualLayerParent');}return aa||this.parent.getInsertParent();},setContent:function(aa){this._content=aa;m.setContent(this._contentWrapper,this._content);this._shown&&this.updatePosition();return this;},setContext:function(aa){this._contextNode=aa;this._contextSelector=this._contextScrollParent=null;if(this._shown){j.register(this.getRoot(),this._contextNode);this.updatePosition();}this._setParentSubscription();h.setPopup(this.getCausalElement(),this.getRoot());return this;},_setContextID:function(aa){this._contextSelector='#'+aa;this._contextNode=null;},_setContextSelector:function(aa){this._contextSelector=aa;this._contextNode=null;},getCausalElement:function(){return this.parent.getCausalElement()||this.getContext();},_setParentSubscription:function(){var aa=this.getContext(),ba=null;while(aa!==null){ba=l.get(aa,'layer');if(ba)break;aa=aa.parentNode;}if(ba===this._parentLayer)return;if(this._parentLayer&&this._parentSubscription){this._parentLayer.unsubscribe(this._parentSubscription);this._parentSubscription=null;}if(ba)this._parentSubscription=ba.subscribe('hide',this.hide.bind(this));this._parentLayer=ba;},setPosition:function(aa){this._getOrientation().setDefaultPosition(aa);this._shown&&this.updatePosition();return this;},setAlignment:function(aa){this._getOrientation().setDefaultAlignment(aa);this._shown&&this.updatePosition();return this;},setOffsetX:function(aa){this._getOrientation().setDefaultOffsetX(aa);this._shown&&this.updatePosition();return this;},setOffsetY:function(aa){this._getOrientation().setDefaultOffsetY(aa);this._shown&&this.updatePosition();return this;},_getOrientation:function(){if(!this._orientation)this._orientation=new z();return this._orientation;},getContentRoot:function(){return this._contentWrapper;},getContent:function(){return this._content;},getContext:function(){if(!this._contextNode)this._contextNode=m.find(document,this._contextSelector);return this._contextNode;},getContextScrollParent:function(){if(!this._contextScrollParent)this._contextScrollParent=r.getScrollParent(this.getContext());return this._contextScrollParent;},setInsertParent:function(aa){this._insertScrollParent=null;return this.parent.setInsertParent(aa);},getInsertScrollParent:function(){if(!this._insertScrollParent)this._insertScrollParent=r.getScrollParent(this.getInsertParent());return this._insertScrollParent;},show:function(){this.parent.show();if(this._shown){j.register(this.getRoot(),this.getContext());y.push(this);this._resizeListener=this._resizeListener||Event.listen(window,'resize',this.updatePosition.bind(this));}return this;},hide:function(){j.remove(this.getRoot());y.remove(this);this._resizeListener&&this._resizeListener.remove();this._resizeListener=null;return this.parent.hide();},updatePosition:function(){var aa=this.getContext();if(!aa)return false;var ba=r.isFixed(aa)&&!r.isFixed(this.getInsertParent());if(!ba&&!aa.offsetParent)return false;var ca=this._getOrientation();this.inform('adjust',ca.reset());if(!ca.isValid())return false;this._updateWrapperPosition(ca);this._updateWrapperClass(ca);var da=this.getRoot();k.conditionClass(da,'uiContextualLayerPositionerFixed',ba);var ea,fa,ga=ba?'viewport':'document',ha=ba?document.documentElement:w(da);if(ha===document.documentElement){ea=new s(0,0);fa=document.documentElement.clientWidth;}else if(!da.offsetParent){return false;}else{ea=s.getElementPosition(ha,ga);fa=ha.offsetWidth;if(ha!==document.body)ea=ea.sub(new s(ha.scrollLeft,ha.scrollTop));}var ia=s.getElementPosition(aa,ga),ja=ia.x-ea.x,ka=ia.y-ea.y,la=p.isRTL();if(ca.getPosition()==='below')ka+=aa.offsetHeight;if((ca.getPosition()==='right'||(ca.isVertical()&&ca.getAlignment()==='right'))!=la)ja+=aa.offsetWidth;var ma=ca.getOffsetX();if(ca.isVertical()&&ca.getAlignment()==='center')ma+=(aa.offsetWidth-this._content.offsetWidth)/2;if(la)ma*=-1;var na='left',oa=ja+ma;if(v(ca)!==la){na='right';oa=fa-oa;}r.set(da,na,oa+'px');r.set(da,na==='left'?'right':'left','');var pa=this.getInsertScrollParent(),qa;if(pa!==window){qa=pa.clientWidth;}else qa=document.documentElement.clientWidth;var ra=s.getElementPosition(da).x;if(na==='left'){if(qa-ra>0){r.set(da,'width',(qa-ra)+'px');}else r.set(da,'width','');}else r.set(da,'width',ra+da.offsetWidth+'px');r.set(da,'top',(ka+ca.getOffsetY())+'px');var sa=u(aa,this.getInsertParent());r.set(da,'z-index',sa>200?sa:'');this.inform('reposition',ca);return true;},_updateWrapperPosition:function(aa){var ba=aa.getPosition()==='above';r.set(this._contentWrapper,'bottom',ba?'0':null);var ca=p.isRTL()?'left':'right',da=v(aa);r.set(this._contentWrapper,ca,da?'0':null);},_updateWrapperClass:function(aa){var ba=aa.getClassName();if(ba===this._orientationClass)return;if(this._orientationClass)k.removeClass(this._contentWrapper,this._orientationClass);this._orientationClass=ba;k.addClass(this._contentWrapper,ba);},simulateOrientation:function(aa,ba){var ca=aa.getClassName();if(ca===this._orientationClass){return ba();}else{if(this._orientationClass)k.removeClass(this._contentWrapper,this._orientationClass);k.addClass(this._contentWrapper,ca);var da=ba();k.removeClass(this._contentWrapper,ca);if(this._orientationClass)k.addClass(this._contentWrapper,this._orientationClass);return da;}},destroy:function(){this.parent.destroy();this._contentWrapper=null;this._content=null;return this;}});function z(){this._default={_position:'above',_alignment:'left',_offsetX:0,_offsetY:0,_valid:true};this.reset();}z.OPPOSITE={above:'below',below:'above',left:'right',right:'left'};t(z.prototype,{setPosition:function(aa){this._position=aa;return this;},setAlignment:function(aa){this._alignment=aa;return this;},getOppositePosition:function(){return z.OPPOSITE[this.getPosition()];},invalidate:function(){this._valid=false;return this;},getPosition:function(){return this._position||'above';},getAlignment:function(){return this._alignment||'left';},getOffsetX:function(){var aa=this._offsetX||0;if(!this.isVertical()){if(this._default._position!==this._position)aa*=-1;}else if(this._default._alignment!==this._alignment)aa*=-1;return aa;},getOffsetY:function(){var aa=this._offsetY||0;if(this.isVertical()&&this._default._position!==this._position)aa*=-1;return aa;},getClassName:function(){var aa=this.getAlignment(),ba=this.getPosition();if(ba==='below'){if(aa==='left'){return 'uiContextualLayerBelowLeft';}else if(aa==='right'){return 'uiContextualLayerBelowRight';}else return 'uiContextualLayerBelowCenter';}else if(ba==='above'){if(aa==='left'){return 'uiContextualLayerAboveLeft';}else if(aa==='right'){return 'uiContextualLayerAboveRight';}else return 'uiContextualLayerAboveCenter';}else if(ba==='left'){return 'uiContextualLayerLeft';}else return 'uiContextualLayerRight';},isValid:function(){return this._valid;},isVertical:function(){return this.getPosition()==='above'||this.getPosition()==='below';},reset:function(aa,ba){t(this,this._default);return this;},setDefaultPosition:function(aa){this._default._position=aa;return this;},setDefaultAlignment:function(aa){this._default._alignment=aa;return this;},setDefaultOffsetX:function(aa){this._default._offsetX=aa;return this;},setDefaultOffsetY:function(aa){this._default._offsetY=aa;return this;}});e.exports=x;});
__d("KeyStatus",["event-extensions"],function(a,b,c,d,e,f){b('event-extensions');var g=null,h=null;function i(){if(!h)h=Event.listen(window,'blur',function(){g=null;j();});}function j(){if(h){h.remove();h=null;}}Event.listen(document.documentElement,'keydown',function(l){g=Event.getKeyCode(l);i();},Event.Priority.URGENT);Event.listen(document.documentElement,'keyup',function(l){g=null;j();},Event.Priority.URGENT);var k={isKeyDown:function(){return !!g;},getKeyDownCode:function(){return g;}};e.exports=k;});
__d("ContextualLayerDimensions",["DOM","Locale","Rect","Vector","ViewportBounds","ge","getOverlayZIndex"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('Locale'),i=b('Rect'),j=b('Vector'),k=b('ViewportBounds'),l=b('ge'),m=b('getOverlayZIndex'),n={getViewportRect:function(o){var p=l('globalContainer'),q=o.getContext(),r=(p&&g.contains(p,q))||m(q)<300,s=i.getViewportBounds();if(r){s.t+=k.getTop();if(h.isRTL()){s.l+=k.getRight();}else s.r-=k.getRight();}return s;},getLayerRect:function(o,p){var q=o.getContext(),r=j.getElementPosition(q,'viewport'),s=o.simulateOrientation(p,function(){return j.getElementDimensions(o.getContent());}),t=r.y+p.getOffsetY();if(p.getPosition()==='above'){t-=s.y;}else if(p.getPosition()==='below')t+=q.offsetHeight;var u=r.x+p.getOffsetX();if(p.isVertical()){var v=p.getAlignment();if(v==='center'){u+=(q.offsetWidth-s.x)/2;}else if((v==='right')!==h.isRTL())u+=q.offsetWidth-s.x;}else if((p.getPosition()==='right')!==h.isRTL()){u+=q.offsetWidth;}else u-=s.x;return new i(t,u+s.x,t+s.y,u,'viewport');}};e.exports=n;});
__d("ContextualLayerAutoFlip",["array-extensions","event-extensions","ContextualLayerDimensions","DOM","Vector","copyProperties"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('ContextualLayerDimensions'),h=b('DOM'),i=b('Vector'),j=b('copyProperties');function k(l){this._layer=l;}j(k.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('adjust',this._adjustOrientation.bind(this));if(this._layer.isShown())this._layer.updatePosition();},disable:function(){this._subscription.unsubscribe();this._subscription=null;if(this._layer.isShown())this._layer.updatePosition();},_adjustOrientation:function(l,m){var n=this._getValidPositions(m);if(!n.length){m.invalidate();return;}var o=g.getViewportRect(this._layer),p=this._getValidAlignments(m);for(var q=0;q<p.length;q++){m.setAlignment(p[q]);for(var r=0;r<n.length;r++){m.setPosition(n[r]);var s=g.getLayerRect(this._layer,m);if(o.contains(s))return;}}m.setPosition(n.contains('below')?'below':n[0]).setAlignment(p[0]);},_getValidPositions:function(l){var m=[l.getPosition(),l.getOppositePosition()],n=this._layer.getContextScrollParent();if(n===window||n===h.getDocumentScrollElement())return m;var o=this._layer.getContext(),p=i.getElementPosition(n,'viewport').y,q=i.getElementPosition(o,'viewport').y;if(l.isVertical()){return m.filter(function(s){if(s==='above'){return q>=p;}else{var t=p+n.offsetHeight,u=q+o.offsetHeight;return u<=t;}});}else{var r=p+n.offsetHeight;if(q>=p&&q+o.offsetHeight<=r){return m;}else return [];}},_getValidAlignments:function(l){var m=['left','center','right'],n=l.getAlignment(),o=m.indexOf(n);if(o>0){m.splice(o,1);m.unshift(n);}return m;}});e.exports=k;});
__d("Tooltip",["event-extensions","ARIA","AsyncRequest","copyProperties","ContextualLayer","ContextualLayerAutoFlip","CSS","DataStore","DOM","Style","URI","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ARIA'),h=b('AsyncRequest'),i=b('copyProperties'),j=b('ContextualLayer'),k=b('ContextualLayerAutoFlip'),l=b('CSS'),m=b('DataStore'),n=b('DOM'),o=b('Style'),p=b('URI'),q=b('tx'),r=null,s=null,t=null,u=[];function v(){if(!s){t=n.create('div',{className:'tooltipContent'});var ca=n.create('i',{className:'arrow'}),da=n.create('div',{className:'uiTooltipX'},[t,ca]);s=new j({},da);s.enableBehavior(k);}}function w(ca){return i({position:ca.getAttribute('data-tooltip-position')||'above',alignH:ca.getAttribute('data-tooltip-alignh')||'left'},m.get(ca,'tooltip'));}function x(ca,da){var ea=w(ca);m.set(ca,'tooltip',{content:da.content||ea.content,position:da.position||ea.position,alignH:da.alignH||ea.alignH});ca.setAttribute('data-hover','tooltip');}function y(ca,da){ba.set(ca,"Loading...");new h(da).setHandler(function(ea){ba.set(ca,ea.getPayload());}).setErrorHandler(bagofholding).send();}var z=/(\r\n|[\r\n])/;function aa(ca){return ca.split(z).map(function(da){return z.test(da)?n.create('br'):da;});}var ba={process:function(ca,da){if(!n.contains(ca,da))return;if(ca!==r){var ea=ca.getAttribute('data-tooltip-uri');if(ea){ca.removeAttribute('data-tooltip-uri');y(ca,ea);}var fa=ca.getAttribute('title');if(fa){ca.setAttribute('title','');var ga=w(ca);!ga.content&&ba.set(ca,fa);}ba.show(ca);}},remove:function(ca){m.remove(ca,'tooltip');ca.removeAttribute('data-hover');ca.removeAttribute('data-tooltip-position');ca.removeAttribute('data-tooltip-alignh');ca===r&&ba.hide();},hide:function(){if(r){s.hide();r=null;while(u.length)u.pop().remove();}},set:function(ca,da,ea,fa){if(ea||fa)x(ca,{position:ea,alignH:fa});if(da instanceof p){if(ca===r){y(ca,da);}else ca.setAttribute('data-tooltip-uri',da);}else{if(typeof da!=='string')da=n.create('div',{},da);x(ca,{content:da});ca===r&&ba.show(ca);}},show:function(ca){v();ba.hide();var da=w(ca);if(!da.content)return;var ea=0,fa=0;if(da.position==='left'||da.position==='right'){fa=(ca.offsetHeight-20)/2;}else if(da.alignH!=='center'){var ga=ca.offsetWidth;if(ga<18)ea=(ga-18)/2*(da.alignH==='right'?-1:1);}s.setContext(ca).setOffsetX(ea).setOffsetY(fa).setPosition(da.position).setAlignment(da.alignH);if(typeof da.content==='string'){l.addClass(s,'invisible_elem');var ha=n.create('span',{},aa(da.content)),ia=n.create('div',{className:'tooltipText'},ha);n.setContent(t,ia);s.show();g.notify(da.content);if(ia.offsetWidth<ha.offsetWidth){l.addClass(ia,'tooltipWrap');s.updatePosition();}l.removeClass(s,'invisible_elem');}else{n.setContent(t,da.content);s.show();g.notify(n.getText(t));}var ja=function(la){if(!n.contains(r,la.getTarget()))ba.hide();};u.push(Event.listen(document.documentElement,'mouseover',ja));u.push(Event.listen(document.documentElement,'focusin',ja));var ka=o.getScrollParent(ca);if(ka!==window)u.push(Event.listen(ka,'scroll',ba.hide));u.push(Event.listen(ca,'click',ba.hide));r=ca;}};Event.listen(window,'scroll',ba.hide);e.exports=ba;});
__d("Selector",["event-extensions","Arbiter","Button","ContextualLayer","copyProperties","CSS","DataStore","DOM","HTML","Input","Keys","KeyStatus","Menu","Parent","Style","Toggler","Tooltip","Vector"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('Button'),i=b('ContextualLayer'),j=b('copyProperties'),k=b('CSS'),l=b('DataStore'),m=b('DOM'),n=b('HTML'),o=b('Input'),p=b('Keys'),q=b('KeyStatus'),r=b('Menu'),s=b('Parent'),t=b('Style'),u=b('Toggler'),v=b('Tooltip'),w=b('Vector'),x,y,z=[],aa;function ba(ma){return s.byClass(ma,'uiSelector');}function ca(ma){return s.byClass(ma,'uiSelectorButton');}function da(){if(!y){y=new i({position:'below'},m.create('div'));k.addClass(y.getRoot(),'uiSelectorContextualLayer');}return y;}function ea(ma){return m.scry(ma,'select')[0];}function fa(ma){return m.find(ma,'div.uiSelectorMenuWrapper');}function ga(){ga=bagofholding;r.subscribe('select',function(ma,na){if(!x||!na||na.menu!==la.getSelectorMenu(x))return;var oa=ha(x),pa=ia(na.item);if(pa){var qa=x,ra=la.isOptionSelected(na.item),sa=la.inform('select',{selector:qa,option:na.item,clone:aa});if(sa===false)return;if(oa||!ra){la.setSelected(qa,la.getOptionValue(na.item),!ra);la.inform('toggle',{selector:qa,option:na.item});la.inform('change',{selector:qa});g.inform('Form/change',{node:qa});if(ja(qa))l.set(qa,'dirty',true);}}if(!oa||!pa)x&&la.toggle(x);});}function ha(ma){return !!ma.getAttribute('data-multiple');}function ia(ma){return k.hasClass(ma,'uiSelectorOption');}function ja(ma){return !!ma.getAttribute('data-autosubmit');}var ka={keydown:function(event){var ma=event.getTarget();if(m.isNodeOfType(ma,['input','textarea']))return;switch(Event.getKeyCode(event)){case p.DOWN:case p.SPACE:case p.UP:if(ca(ma)){var na=ba(ma);la.toggle(na);return false;}break;case p.ESC:if(x){la.toggle(x);return false;}break;}},mouseover:function(event){var ma=s.byAttribute(event.getTarget(),'ajaxify');if(ma&&k.hasClass(ma,'uiSelectorButton'))la.loadMenu(ba(ma));}};Event.listen(document.documentElement,ka);u.subscribe(['show','hide'],function(ma,na){var oa=ba(na.getActive());if(oa){ga();var pa=la.getSelectorButton(oa),qa=la.getSelectorMenu(oa),ra=ma==='show';pa.setAttribute('aria-expanded',ra?'true':'false');if(ra){x=oa;if(k.hasClass(pa,'uiButtonDisabled')){la.setEnabled(oa,false);return false;}qa=qa||la.loadMenu(oa);var sa=t.getScrollParent(oa),ta=sa!==window&&sa!==m.getDocumentScrollElement();if(ta||k.hasClass(oa,'uiSelectorUseLayer')){if(ta)z.push(Event.listen(sa,'scroll',function(){na.hide();}));aa=m.create('div',{className:oa.className});k.addClass(aa,'invisible_elem');w.getElementDimensions(oa).setElementDimensions(aa);m.replace(oa,aa);var ua=k.hasClass(oa,'uiSelectorRight'),va=k.hasClass(oa,'uiSelectorBottomUp');da().setContext(aa).setContent(oa).setPosition(va?'above':'below').setAlignment(ua?'right':'left').show();}r.register(qa);if(q.isKeyDown()){var wa=r.getCheckedItems(qa);if(!wa.length)wa=r.getEnabledItems(qa);r.focusItem(wa[0]);}}else{x=null;if(aa){while(z.length)z.pop().remove();m.replace(aa,oa);da().hide();aa=null;}qa&&r.unregister(qa);if(ja(oa)&&l.get(oa,'dirty')){var xa=m.scry(oa,'input.submitButton')[0];xa&&xa.click();l.remove(oa,'dirty');}}k.conditionClass(la.getSelectorButton(oa),'selected',ra);la.inform(ra?'open':'close',{selector:oa,clone:aa});}});var la=j(new g(),{attachMenu:function(ma,na,oa){ma=ba(ma);if(ma){x&&r.unregister(la.getSelectorMenu(x));m.setContent(fa(ma),na);x&&r.register(la.getSelectorMenu(ma));aa&&da().updatePosition();if(oa){var pa=ma.getAttribute('data-name');pa&&oa.setAttribute('name',pa);if(!ha(ma))oa.setAttribute('multiple',false);var qa=ea(ma);if(qa){m.replace(qa,oa);}else m.insertAfter(ma.firstChild,oa);}return true;}},getOption:function(ma,na){var oa=la.getOptions(ma),pa=oa.length;while(pa--)if(na===la.getOptionValue(oa[pa]))return oa[pa];return null;},getOptions:function(ma){var na=r.getItems(la.getSelectorMenu(ma));return na.filter(ia);},getEnabledOptions:function(ma){var na=r.getEnabledItems(la.getSelectorMenu(ma));return na.filter(ia);},getSelectedOptions:function(ma){return r.getCheckedItems(la.getSelectorMenu(ma));},getOptionText:function(ma){return r.getItemLabel(ma);},getOptionValue:function(ma){var na=ba(ma),oa=ea(na),pa=la.getOptions(na).indexOf(ma);return pa>=0?oa.options[pa+1].value:'';},getSelectorButton:function(ma){return m.find(ma,'a.uiSelectorButton');},getSelectorMenu:function(ma){return m.scry(ma,'div.uiSelectorMenu')[0];},getValue:function(ma){var na=ea(ma);if(!na)return null;if(!ha(ma))return na.value;var oa=[],pa=na.options;for(var qa=1,ra=pa.length;qa<ra;qa++)if(pa[qa].selected)oa.push(pa[qa].value);return oa;},isOptionSelected:function(ma){return r.isItemChecked(ma);},listen:function(ma,na,oa){return this.subscribe(na,function(pa,qa){if(qa.selector===ma)return oa(qa,pa);});},loadMenu:function(ma){var na=la.getSelectorMenu(ma);if(!na){var oa=la.getSelectorButton(ma),pa=oa.getAttribute('ajaxify');if(pa){d(['AsyncRequest'],function(ra){ra.bootstrap(pa,oa);});var qa=n('<div class="uiSelectorMenuWrapper uiToggleFlyout">'+'<div class="uiMenu uiSelectorMenu loading">'+'<ul class="uiMenuInner">'+'<li><span></span></li>'+'</ul>'+'</div>'+'</div>');m.appendContent(oa.parentNode,qa);na=la.getSelectorMenu(ma);oa.removeAttribute('onmouseover');}}return na;},setButtonLabel:function(ma,na){var oa=la.getSelectorButton(ma),pa=parseInt(oa.getAttribute('data-length'),10);na=na||oa.getAttribute('data-label')||'';h.setLabel(oa,na);if(typeof na==='string'){k.conditionClass(oa,'uiSelectorBigButtonLabel',na.length>pa);if(pa&&na.length>pa){oa.setAttribute('title',na);}else oa.removeAttribute('title');}},setButtonTooltip:function(ma,na){var oa=la.getSelectorButton(ma),pa=s.byTag(oa,'a');pa&&v.set(pa,na||oa.getAttribute('data-tooltip')||'');},updateButtonARIALabel:function(ma,na){var oa=la.getSelectorButton(ma),pa=s.byTag(oa,'a');if(pa){var qa=oa.getAttribute('data-ariaprefix');if(qa)oa.setAttribute('aria-label',qa+': '+na);}},setEnabled:function(ma,na){if(!na&&x&&ba(ma)===x)la.toggle(ma);h.setEnabled(la.getSelectorButton(ma),na);},setOptionEnabled:function(ma,na){r.setItemEnabled(ma,na);},setSelected:function(ma,na,oa){oa=oa!==false;var pa=la.getOption(ma,na);if(!pa)return;var qa=la.isOptionSelected(pa);if(oa!==qa){if(!ha(ma)&&!qa){var ra=la.getSelectedOptions(ma)[0];ra&&r.toggleItem(ra);}r.toggleItem(pa);}la.updateSelector(ma);},toggle:function(ma){u.toggle(m.scry(ba(ma),'div.wrap')[0]);},updateSelector:function(ma){var na=la.getOptions(ma),oa=la.getSelectedOptions(ma),pa=ea(ma).options,qa=[],ra=[];for(var sa=0,ta=na.length;sa<ta;sa++){var ua=oa.contains(na[sa]);pa[sa+1].selected=ua;if(ua){var va=la.getOptionText(na[sa]);qa.push(va);ra.push(na[sa].getAttribute('data-tooltip')||va);}}pa[0].selected=!oa.length;var wa=k.hasClass(ma,'uiSelectorDynamicLabel'),xa=k.hasClass(ma,'uiSelectorDynamicTooltip');if(wa||xa){var ya='';if(ha(ma)){var za=la.getSelectorButton(ma);ya=za.getAttribute('data-delimiter')||', ';}qa=qa.join(ya);ra=ra.join(ya);if(wa){la.setButtonLabel(ma,qa);la.updateButtonARIALabel(ma,qa);}xa&&la.setButtonTooltip(ma,ra);}}});e.exports=la;});
__d("DynamicIconSelector",["Button","CSS","DOM","Selector"],function(a,b,c,d,e,f){var g=b('Button'),h=b('CSS'),i=b('DOM'),j=b('Selector'),k={swapIcon:function(l){var m=j.getSelectedOptions(l)[0],n=m&&i.scry(m,'.itemIcon')[0],o=j.getSelectorButton(l);if(n){g.setIcon(o,n.cloneNode(true));}else{var p=i.scry(o,'.img')[0];p&&i.remove(p);}h.conditionClass(o,'uiSelectorChevronOnly',!n);}};j.subscribe('change',function(l,m){var n=m.selector;if(h.hasClass(n,'dynamicIconSelector'))k.swapIcon(n);});e.exports=k;});
__d("PrivacyConst",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties'),h={FRIENDS_MINUS_ACQUAINTANCES:127,FACEBOOK_EMPLOYEES:112,CUSTOM:111,EVERYONE:80,NETWORKS_FRIENDS_OF_FRIENDS:60,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SELF:10,NOBODY:0},i={EVERYONE:80,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SOME_FRIENDS:30,SELF:10,NO_FRIENDS:0},j={BaseValue:h,FriendsValue:i};e.exports=j;});
__d("AudienceSelector",["Arbiter","CSS","DOM","DynamicIconSelector","PrivacyConst","Selector","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('DynamicIconSelector'),k=b('PrivacyConst'),l=b('Selector'),m=b('copyProperties');l.subscribe('select',function(p,q){if(!h.hasClass(q.selector,'audienceSelector'))return;var r=l.getOptionValue(q.option);g.inform('AudienceSelector/changed',q);if(r==k.BaseValue.CUSTOM&&!h.hasClass(q.option,'noDialog')){l.toggle(q.selector);return false;}if(h.hasClass(q.selector,'dataTooltip')){var s=i.find(q.option,'.itemAnchor').getAttribute('data-tooltip');l.setButtonTooltip(q.selector,s||null);}if(!h.hasClass(q.option,'specialOption'))return;var t=i.find(q.option,'a').getAttribute('data-type');if(h.hasClass(q.option,'moreOption')){h.addClass(q.selector,t);h.addClass(q.selector,'showSecondaryOptions');return false;}else if(h.hasClass(q.option,'returnOption')){h.removeClass(q.selector,'showSecondaryOptions');h.removeClass(q.selector,'friendList');return false;}});var n={},o={hasTags:function(p){return n.hasOwnProperty(p);},setHasTags:function(p){if(!p)return;n[p]=true;}};g.subscribe('CustomPrivacyOption/update',function(p,q){if(!h.hasClass(q.selector,'audienceSelector'))return;l.setSelected(q.selector,l.getOptionValue(q.option));j.swapIcon(q.selector);l.setButtonTooltip(q.selector,q.tooltip);g.inform('AudienceSelector/update',q.selector);});e.exports=o;});
__d("ContextualLayerHideOnScroll",["event-extensions","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscriptions:[],enable:function(){this._subscriptions=[this._layer.subscribe('contextchange',this._handleContextChange.bind(this)),this._layer.subscribe('show',this.attach.bind(this)),this._layer.subscribe('hide',this.detach.bind(this))];},disable:function(){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this.detach();},attach:function(){if(this._listener)return;var i=this._layer.getContextScrollParent();if(i===window)return;this._listener=Event.listen(i,'scroll',this._layer.hide.bind(this._layer));},detach:function(){this._listener&&this._listener.remove();this._listener=null;},_handleContextChange:function(){this.detach();if(this._layer.isShown())this.attach();}});e.exports=h;});
__d("BasicTypeaheadRenderer",["DOM"],function(a,b,c,d,e,f){var g=b('DOM');function h(i,j){var k=[];if(i.icon)k.push(g.create('img',{alt:'',src:i.icon}));if(i.text)k.push(g.create('span',{className:'text'},[i.text]));if(i.subtext)k.push(g.create('span',{className:'subtext'},[i.subtext]));var l=g.create('li',{className:i.type||''},k);if(i.text)l.setAttribute('aria-label',i.text);return l;}h.className='basic';e.exports=h;});
__d("TypeaheadView",["event-extensions","ArbiterMixin","ARIA","BasicTypeaheadRenderer","CSS","DOM","Parent","$","copyProperties","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('ARIA'),i=b('BasicTypeaheadRenderer'),j=b('CSS'),k=b('DOM'),l=b('Parent'),m=b('$'),n=b('copyProperties'),o=b('tx');function p(q,r){this.element=this.content=m(q);n(this,r);}n(p.prototype,g,{events:['highlight','render','reset','select','beforeRender','next','prev'],renderer:i,autoSelect:false,accessibleResultsText:"Autocomplete results are available. Use the up and down arrow keys to navigate the results.",accessibleEmptyText:"No autocomplete results are available.",ignoreMouseover:false,init:function(){this.init=bagofholding;this.initializeEvents();this.reset();},initializeEvents:function(){Event.listen(this.element,{mouseup:this.mouseup.bind(this),mouseover:this.mouseover.bind(this)});},setTypeahead:function(q){this.typeahead=q;},getElement:function(){return this.element;},mouseup:function(event){if(event.button!=2){this.select(true);event.kill();}},mouseover:function(event){if(this.ignoreMouseover){this.ignoreMouseover=false;return;}if(this.visible)this.highlight(this.getIndex(event));},reset:function(q){if(!q)this.disableAutoSelect=false;this.justRendered=false;this.justShown=false;this.index=-1;this.items=[];this.results=[];this.value='';this.content.innerHTML='';this.inform('reset');return this;},getIndex:function(event){return this.items.indexOf(l.byTag(event.getTarget(),'li'));},getSelection:function(){var q=this.results[this.index]||null;return this.visible?q:null;},isEmpty:function(){return !this.results.length;},isVisible:function(){return this.visible;},show:function(){j.show(this.element);if(this.results&&this.results.length)if(this.autoSelect){h.notify(o._("{name} is auto-selected. Use the up and down arrow keys to navigate more results.",{name:this.getItemText(this.selected)}));}else h.notify(this.accessibleResultsText);this.typeahead&&this.element.setAttribute('aria-expanded','true');this.visible=true;return this;},hide:function(){j.hide(this.element);h.notify('');this.typeahead&&this.typeahead.setAttribute('aria-expanded','false');this.visible=false;return this;},render:function(q,r,s){this.value=q;if(!r.length){if(this.results.length&&q)h.notify(this.accessibleEmptyText);this.reset(true);return;}this.justRendered=true;if(!this.results.length){this.justShown=true;if(!this.autoSelect&&this.isVisible()&&r.length)h.notify(this.accessibleResultsText);}var t={results:r,value:q};this.inform('beforeRender',t);r=t.results;var u=this.getDefaultIndex(r);if(this.index>0&&this.index!==this.getDefaultIndex(this.results)){var v=this.results[this.index];for(var w=0,x=r.length;w<x;++w)if(v.uid==r[w].uid){u=w;break;}}this.results=r;k.setContent(this.content,this.buildResults(r));this.items=this.getItems();this.highlight(u,false);this.inform('render',r);},getItems:function(){return k.scry(this.content,'li');},buildResults:function(q){var r,s=null;if(typeof this.renderer=='function'){r=this.renderer;s=this.renderer.className||'';}else{r=a.TypeaheadRenderers[this.renderer];s=this.renderer;}r=r.bind(this);var t=q.map(function(v,w){var x=v.node||r(v,w);x.setAttribute('role','option');return x;}),u=k.create('ul',{className:s,id:'typeahead_list_'+(this.typeahead?k.getID(this.typeahead):k.getID(this.element))},t);u.setAttribute('role','listbox');return u;},getDefaultIndex:function(q){var r=(this.autoSelect&&!this.disableAutoSelect);return this.index<0&&!r?-1:0;},next:function(){this.highlight(this.index+1);this.inform('next',this.selected);},prev:function(){this.highlight(this.index-1);this.inform('prev',this.selected);},getItemText:function(q){var r='';if(q){r=q.getAttribute('aria-label');if(!r){r=k.getText(q);q.setAttribute('aria-label',r);}}return r;},setIsViewingSelectedItems:function(q){this.viewingSelected=q;return this;},getIsViewingSelectedItems:function(){return this.viewingSelected;},highlight:function(q,r){var s=true;if(this.selected){j.removeClass(this.selected,'selected');this.selected.setAttribute('aria-selected','false');}if(q>this.items.length-1){q=-1;}else if(q<-1)q=this.items.length-1;if(q>=0&&q<this.items.length){if(this.selected&&this.getItemText(this.items[q])===this.getItemText(this.selected))s=false;this.selected=this.items[q];j.addClass(this.selected,'selected');this.selected.setAttribute('aria-selected','true');}this.index=q;this.disableAutoSelect=(q==-1);var t=(q!==-1),u=this.getItemText(this.selected);if(q!==-1&&this.isVisible()&&u&&this.autoSelect)if(this.justShown){h.notify(o._("{name} is auto-selected. Use the up and down arrow keys to navigate more results.",{name:u}));this.justRendered=false;this.justShown=false;t=false;}else if(s&&this.justRendered){h.notify(o._("{name} is auto-selected.",{name:u}));this.justRendered=false;t=false;}if(s&&t)h.announce(u);if(r!==false)this.inform('highlight',{index:q,selected:this.results[q],element:this.selected});},select:function(q){var r=this.index,s=this.results[r];if(s){this.inform('select',{index:r,clicked:!!q,selected:s});this.inform('afterSelect');}}});e.exports=p;});
__d("BucketedTypeaheadView",["Class","DOM","TypeaheadView","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('DOM'),i=b('TypeaheadView'),j=b('copyProperties');function k(l,m){this.parent.construct(this,l,m);}g.extend(k,i);j(k.prototype,{render:function(l,m,n){m=this.buildBuckets(l,m);return this.parent.render(l,m,n);},highlight:function(l,m){if(l==-1&&this.index!==0)l=this.index;if(l>=0&&l<this.items.length&&this.results[l].type=='header')l=l+1;this.parent.highlight(l,m);},buildBuckets:function(l,m){if(!this.typeObjects)return m;var n=[],o={};for(var p=0;p<m.length;++p){var q=m[p],r=q.render_type||q.type;if(!o.hasOwnProperty(r)){o[r]=n.length;n.push([this.buildBucketHeader(r)]);}q.classNames=r;q.groupIndex=o[r];q.indexInGroup=n[q.groupIndex].length-1;n[q.groupIndex].push(q);}var s=[];for(var t=0;t<n.length;++t)s=s.concat(n[t]);return s;},buildBucketHeader:function(l){var m=this.typeObjects[l];if(m.markup){m.text=m.markup;delete m.markup;}return this.typeObjects[l];},buildResults:function(l){var m=this.parent.buildResults(l);if(this.typeObjects){return h.create('div',{className:'bucketed'},[m]);}else return m;},select:function(l){var m=this.results[this.index];if(m&&m.type!='header')this.parent.select(l);},getDefaultIndex:function(l){var m=(this.autoSelect&&!this.disableAutoSelect),n=l.length===0?-1:(l[0].type=='header'?1:0);return this.index<0&&!m?-1:n;},prev:function(){var l=this.results[this.index-1];if(l&&l.type=='header')this.index--;return this.parent.prev();},next:function(){var l=this.results[this.index+1];if(l&&l.type=='header')this.index++;return this.parent.next();}});e.exports=k;});
__d("ContextualTypeaheadView",["event-extensions","Class","ContextualLayer","ContextualLayerAutoFlip","ContextualLayerHideOnScroll","CSS","DOM","Style","BucketedTypeaheadView","Vector","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Class'),h=b('ContextualLayer'),i=b('ContextualLayerAutoFlip'),j=b('ContextualLayerHideOnScroll'),k=b('CSS'),l=b('DOM'),m=b('Style'),n=b('BucketedTypeaheadView'),o=b('Vector'),p=b('copyProperties');function q(r,s){this.parent.construct(this,r,s);}g.extend(q,n);p(q.prototype,{init:function(){this.initializeLayer();this.parent.init();},initializeLayer:function(){this.context=this.getContext();this.wrapper=l.create('div');l.appendContent(this.wrapper,this.element);k.addClass(this.element,'uiContextualTypeaheadView');this.layer=new h({context:this.context,position:'below',causalElement:this.causalElement},this.wrapper);this.layer.enableBehavior(j);if(m.isFixed(this.context))this.layer.enableBehavior(i);this.subscribe('render',this.renderLayer.bind(this));},show:function(){this.layer.show();o.getElementDimensions(this.context).setElementWidth(this.wrapper);return this.parent.show();},hide:function(){this.layer.hide();return this.parent.hide();},renderLayer:function(){if(!this.isVisible())return;if(this.layer.isShown()){this.layer.updatePosition();}else this.layer.show();},getContext:function(){return this.element.parentNode;}});e.exports=q;});
__d("flattenArray",[],function(a,b,c,d,e,f){function g(h){var i=[];while(h.length){var j=h.pop();if(Array.isArray(j)){Array.prototype.push.apply(h,j);}else i.push(j);}return i.reverse();}e.exports=g;});
__d("JSXDOM",["DOM","flattenArray"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('flattenArray'),i=['a','br','button','checkbox','dd','div','dl','dt','form','h1','h2','h3','h4','h5','h6','hr','i','iframe','img','input','label','li','option','p','pre','select','span','strong','table','td','textarea','th','tr','ul'],j={};i.forEach(function(k){var l=function(m){var n;if(m.children){n=Array.isArray(m.children)?h(m.children):h([m.children]);delete m.children;}return g.create(k,m,n);};j[k]=l;});e.exports=j;});
__d("ScrollableArea",["array-extensions","event-extensions","throttle","Animation","ArbiterMixin","CSS","DataStore","DOM","Parent","Run","SimpleDrag","Style","UserAgent","Vector","copyProperties"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('throttle'),h=b('Animation'),i=b('ArbiterMixin'),j=b('CSS'),k=b('DataStore'),l=b('DOM'),m=b('Parent'),n=b('Run'),o=b('SimpleDrag'),p=b('Style'),q=b('UserAgent'),r=b('Vector'),s=b('copyProperties');function t(u,v){if(!u)return;v=v||{};this._elem=u;this._wrap=l.find(u,'div.uiScrollableAreaWrap');this._body=l.find(this._wrap,'div.uiScrollableAreaBody');this._content=l.find(this._body,'div.uiScrollableAreaContent');this._track=l.find(u,'div.uiScrollableAreaTrack');this._gripper=l.find(this._track,'div.uiScrollableAreaGripper');this._options=v;this._throttledComputeHeights=g(this._computeHeights,250,this);this.throttledAdjustGripper=g(this.adjustGripper,250,this);this._throttledShowGripperAndShadows=g(this._showGripperAndShadows,250,this);this.adjustGripper.bind(this).defer();this._listeners=[Event.listen(u,'mousemove',this._handleMousemove.bind(this)),Event.listen(this._wrap,'scroll',this._handleScroll.bind(this)),Event.listen(this._track,'click',this._handleClickOnTrack.bind(this))];if(v.fade!==false)this._listeners.push(Event.listen(u,'mouseenter',this.showScrollbar.shield(this)),Event.listen(u,'mouseout',this.hideScrollbar.shield(this)));if(q.safari()||q.chrome()){this._listeners.push(Event.listen(u,'mousedown',function(){var w=Event.listen(window,'mouseup',function(){if(u.scrollLeft)u.scrollLeft=0;w.remove();});}));}else if(q.firefox())this._wrap.addEventListener('DOMMouseScroll',function(event){event.axis===event.HORIZONTAL_AXIS&&event.preventDefault();},false);this.initDrag();k.set(this._elem,'ScrollableArea',this);if(!v.persistent)n.onLeave(this.destroy.bind(this));}s(t,{renderDOM:function(){var u=l.create('div',{className:'uiScrollableAreaContent'}),v=l.create('div',{className:'uiScrollableAreaBody'},u),w=l.create('div',{className:'uiScrollableAreaWrap'},v),x=l.create('div',{className:'uiScrollableArea native'},w);return {root:x,wrap:w,body:v,content:u};},fromNative:function(u,v){if(!j.hasClass(u,'uiScrollableArea')||!j.hasClass(u,'native'))return;v=v||{};j.removeClass(u,'native');var w=l.create('div',{className:'uiScrollableAreaTrack'},l.create('div',{className:'uiScrollableAreaGripper'}));if(v.fade!==false){j.addClass(u,'fade');j.addClass(w,'invisible_elem');}else j.addClass(u,'nofade');l.appendContent(u,w);var x=new t(u,v);x.resize();return x;},getInstance:function(u){var v=m.byClass(u,'uiScrollableArea');return v?k.get(v,'ScrollableArea'):null;},poke:function(u){var v=t.getInstance(u);v&&v.poke();}});s(t.prototype,i,{initDrag:function(){var u=new o(this._gripper);u.subscribe('start',function(v,event){if(!((event.which&&event.which===1)||(event.button&&event.button===1)))return;var w=r.getEventPosition(event).y,x=this._gripper.offsetTop;j.addClass(this._track,'uiScrollableAreaDragging');var y=u.subscribe('update',function(aa,event){var ba=r.getEventPosition(event).y-w;this._throttledComputeHeights();var ca=this._bodyHeight-this._wrap.offsetHeight,da=x+ba,ea=this._trackHeight-this._gripperHeight;da=Math.max(Math.min(da,ea),0);var fa=da/ea*ca;this._wrap.scrollTop=fa;}.bind(this)),z=u.subscribe('end',function(){u.unsubscribe(y);u.unsubscribe(z);j.removeClass(this._track,'uiScrollableAreaDragging');}.bind(this));}.bind(this));},adjustGripper:function(){if(this._needsGripper()){p.set(this._gripper,'height',this._gripperHeight+'px');this._slideGripper();}this._throttledShowGripperAndShadows();return this;},_computeHeights:function(){this._containerHeight=this._elem.clientHeight;this._bodyHeight=this._content.offsetHeight;this._trackHeight=this._track.offsetHeight;this._gripperHeight=this._containerHeight/this._bodyHeight*this._trackHeight;},_needsGripper:function(){this._throttledComputeHeights();return this._gripperHeight<this._trackHeight;},_slideGripper:function(){var u=this._wrap.scrollTop/this._bodyHeight*this._trackHeight;p.set(this._gripper,'top',u+'px');},_showGripperAndShadows:function(){j.conditionShow(this._gripper,this._needsGripper());j.conditionClass(this._elem,'contentBefore',this._wrap.scrollTop>0);j.conditionClass(this._elem,'contentAfter',!this.isScrolledToBottom());},destroy:function(){this._listeners.forEach(function(u){u.remove();});this._listeners.length=0;},_handleClickOnTrack:function(event){if(!this.lastMousePosition)return;var u=this._gripper.getBoundingClientRect();if(this.lastMousePosition.y<u.top){this.setScrollTop(this.getScrollTop()-this._elem.clientHeight);}else if(this.lastMousePosition.y>u.bottom)this.setScrollTop(this.getScrollTop()+this._elem.clientHeight);},_handleMousemove:function(event){var u=r.getEventPosition(event);if(this._options.fade!==false){var v=r.getElementPosition(this._track).x,w=r.getElementDimensions(this._track).x;if(Math.abs(v+w/2-u.x)<25){this.showScrollbar(false);}else this.hideScrollbar();}this.lastMousePosition=u.convertTo('viewport');},_handleScroll:function(event){if(this._needsGripper())this._slideGripper();this.throttledAdjustGripper();if(this._options.fade!==false)this.showScrollbar();this.inform('scroll');},hideScrollbar:function(u){if(!this._scrollbarVisible)return this;this._scrollbarVisible=false;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null;}if(u){p.set(this._track,'opacity',0);j.addClass.curry(this._track,'invisible_elem');}else this._hideTimeout=function(){if(this._hideAnimation){this._hideAnimation.stop();this._hideAnimation=null;}this._hideAnimation=(new h(this._track)).from('opacity',1).to('opacity',0).duration(250).ondone(j.addClass.curry(this._track,'invisible_elem')).go();}.bind(this).defer(750);return this;},resize:function(){var u=r.getElementDimensions(this._elem).x;if(!this._options.fade)u-=10;u=Math.max(0,u);p.set(this._body,'width',u+'px');return this;},showScrollbar:function(u){this.throttledAdjustGripper();if(this._scrollbarVisible)return this;this._scrollbarVisible=true;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null;}if(this._hideAnimation){this._hideAnimation.stop();this._hideAnimation=null;}p.set(this._track,'opacity',1);j.removeClass(this._track,'invisible_elem');if(u!==false)this.hideScrollbar();return this;},isScrolledToBottom:function(){return this._wrap.scrollTop>=this._bodyHeight-this._containerHeight;},scrollToBottom:function(u){this.setScrollTop(this._wrap.scrollHeight,u);},scrollToTop:function(u){this.setScrollTop(0,u);},scrollIntoView:function(u,v){var w=this._wrap.clientHeight,x=u.offsetHeight,y=this._wrap.scrollTop,z=y+w,aa=u.offsetTop,ba=aa+x;if(aa<y||w<x){this.setScrollTop(aa,v);}else if(ba>z)this.setScrollTop(y+(ba-z),v);},poke:function(){var u=this._wrap.scrollTop;this._wrap.scrollTop+=1;this._wrap.scrollTop-=1;this._wrap.scrollTop=u;return this.showScrollbar(false);},getScrollTop:function(){return this._wrap.scrollTop;},getScrollHeight:function(){return this._wrap.scrollHeight;},setScrollTop:function(u,v){if(v!==false){if(this._scrollTopAnimation)this._scrollTopAnimation.stop();this._scrollTopAnimation=(new h(this._wrap)).to('scrollTop',u).ease(h.ease.end).duration(250).go();}else this._wrap.scrollTop=u;}});e.exports=t;});
__d("OnVisible",["event-extensions","Arbiter","DOM","Run","Vector","copyProperties","throttle"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('DOM'),i=b('Run'),j=b('Vector'),k=b('copyProperties'),l=b('throttle');function m(n,o,p,q){this.element=n;this.handler=o;this.strict=p;this.buffer=q||300;this.scrollHandler=null;this.reset();i.onLeave(this.remove.bind(this));}k(m.prototype,{reset:function(){if(this.scrollListener)return;this.removed=false;this.scrollHandler=l(function(n){var o=j.getElementPosition(this.element);if(!o||this.removed){this.remove();return;}this.targetY=o.y;var p=j.getScrollPosition().y,q=j.getViewportDimensions().y,r=p+q+this.buffer;if(r>this.targetY){var s=!this.strict||(p-this.buffer<(this.targetY+j.getElementDimensions(this.element).y));if(s){this.remove();this.handler(!n);}}return true;},100,this);(function(){this.scrollListener=Event.listen(window,'scroll',this.scrollHandler);this.resizeListener=Event.listen(window,'resize',this.scrollHandler);this.domScrollListener=g.subscribe('dom-scroll',this.scrollHandler);this.scrollHandler.defer();}).bind(this).defer();},remove:function(){this.removed=true;if(this.scrollListener){this.scrollListener.remove();this.resizeListener.remove();this.domScrollListener.unsubscribe();this.scrollListener=this.resizeListener=this.domScrollListener=null;}},setBuffer:function(n){this.buffer=n;this.scrollHandler&&this.scrollHandler.defer();}});e.exports=m;});
__d("Typeahead",["array-extensions","event-extensions","ArbiterMixin","BehaviorsMixin","Class","DataStore","DOM","Parent","Run","copyProperties","ge"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('ArbiterMixin'),h=b('BehaviorsMixin'),i=b('Class'),j=b('DataStore'),k=b('DOM'),l=b('Parent'),m=b('Run'),n=b('copyProperties'),o=b('ge');function p(q,r,s,t){this.args={data:q,view:r,core:s};j.set(t,'Typeahead',this);this.element=t;}p.getInstance=function(q){var r=l.byClass(q,'uiTypeahead');return r?j.get(r,'Typeahead'):null;};n(p.prototype,g,h,{init:function(q){this.init=bagofholding;this.getCore();this.proxyEvents();this.initBehaviors(q||[]);this.inform('init',this);this.data.bootstrap();this.core.focus();},getData:function(){if(!this.data){var q=this.args.data;this.data=q;this.data.init();}return this.data;},getView:function(){if(!this.view){var q=this.args.view,r=o(q.node_id);if(!r){r=k.create('div',{className:'uiTypeaheadView'});k.appendContent(this.element,r);}if(typeof q.ctor==='string'){this.view=new window[q.ctor](r,q.options||{});}else this.view=new q.ctor(r,q.options||{});this.view.init();this.view.setTypeahead(this.element);}return this.view;},getCore:function(){if(!this.core){var q=this.args.core;if(typeof q.ctor==='string'){this.core=new window[q.ctor](q.options||{});}else this.core=new q.ctor(q.options||{});this.core.init(this.getData(),this.getView(),this.getElement());}return this.core;},getElement:function(){return this.element;},swapData:function(q){var r=this.core;this.data=this.args.data=q;q.init();if(r){r.data=q;r.initData();r.reset();}q.bootstrap();return q;},proxyEvents:function(){[this.data,this.view,this.core].forEach(function(q){q.subscribe(q.events,this.inform.bind(this));},this);},initBehaviors:function(q){q.forEach(function(r){if(typeof r==='string'){if(a.TypeaheadBehaviors&&a.TypeaheadBehaviors[r]){a.TypeaheadBehaviors[r](this);}else m.onLoad(function(){if(a.TypeaheadBehaviors)(a.TypeaheadBehaviors[r]||bagofholding)(this);}.bind(this));}else this.enableBehavior(r);},this);}});p.initNow=function(q,r,s){if(s)s.init(q);q.init(r);};p.init=function(q,r,s,t){if(!k.isNodeOfType(q,['input','textarea']))q=k.scry(q,'input')[0]||k.scry(q,'textarea')[0];var u=false;try{u=document.activeElement===q;}catch(v){}if(u){p.initNow(r,s,t);}else var w=Event.listen(q,'focus',function(){p.initNow(r,s,t);w.remove();});};e.exports=p;});
__d("TypeaheadCore",["event-extensions","Arbiter","ArbiterMixin","CSS","DOM","Input","InputSelection","Keys","UserAgent","bind","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('CSS'),j=b('DOM'),k=b('Input'),l=b('InputSelection'),m=b('Keys'),n=b('UserAgent'),o=b('bind'),p=b('copyProperties');function q(r){p(this,r);}p(q.prototype,h,{events:['blur','focus','click','unselect','loading'],keepFocused:true,resetOnSelect:false,resetOnKeyup:true,setValueOnSelect:false,queryTimeout:250,preventFocusChangeOnTab:false,init:function(r,s,t){this.init=bagofholding;this.data=r;this.view=s;this.root=t;this.initInput();this.inputWrap=j.find(t,'div.wrap');this.hiddenInput=j.find(t,'input.hiddenInput');this.value='';this.nextQuery=null;this.selectedText=null;if(this.setValueOnSelect&&i.hasClass(this.inputWrap,'selected'))this.selectedText=this.getValue();this.initView();this.initData();this.initEvents();this.initToggle();this._exclusions=[];},initInput:function(){this.element=j.find(this.root,'.textInput');var r=j.scry(this.element,'input')[0];if(r)this.element=r;},initView:function(){this.view.subscribe('highlight',function(r,s){this.element.focus();this.element.setAttribute('aria-activedescendant',(s.index!==-1)?j.getID(s.element):'');}.bind(this));this.view.subscribe('select',function(r,s){this.select(s.selected);}.bind(this));this.view.subscribe('afterSelect',function(){this.afterSelect();}.bind(this));},initData:function(){this.data.subscribe('respond',function(r,s){if(s.forceDisplay||s.value==this.getValue()&&!this.element.disabled)this.view.render(s.value,s.results,s.isAsync);}.bind(this));this.data.subscribe('activity',function(r,s){this.fetching=s.activity;if(!this.fetching)this.nextQuery&&this.performQuery();if(this.loading!=this.fetching){this.loading=this.fetching;this.inform('loading',{loading:this.loading});}}.bind(this));},initEvents:function(){Event.listen(this.view.getElement(),{mouseup:this.viewMouseup.bind(this),mousedown:this.viewMousedown.bind(this)});var r={blur:o(this,'blur'),focus:o(this,'focus'),click:o(this,'click'),keyup:o(this,'keyup'),keydown:o(this,'keydown')};if(n.firefox())r.text=r.keyup;if(n.firefox()<4){r.keypress=r.keydown;delete r.keydown;}Event.listen(this.element,r);Event.listen(this.element,'keypress',o(this,'keypress'));},initToggle:function(){this.subscribe('blur',this.view.hide.bind(this.view));this.subscribe('focus',this.view.show.bind(this.view));},viewMousedown:function(){this.selecting=true;},viewMouseup:function(){this.selecting=false;},blur:function(){if(this.selecting){this.selecting=false;return;}this.inform('blur');},click:function(){var r=l.get(this.element);if(r.start==r.end)this.element.select();this.inform('click');},focus:function(){this.checkValue();this.inform('focus');},keyup:function(){if(this.resetOnKeyup&&!this.getValue())this.view.reset();this.checkValue();},keydown:function(event){if(!this.view.isVisible()||this.view.isEmpty()){this.checkValue.bind(this).defer();return;}switch(Event.getKeyCode(event)){case m.TAB:this.handleTab(event);return;case m.UP:this.view.prev();break;case m.DOWN:this.view.next();break;case m.ESC:this.view.reset();break;default:this.checkValue.bind(this).defer();return;}event.kill();},keypress:function(event){if(this.view.getSelection()&&Event.getKeyCode(event)==m.RETURN){this.view.select();event.kill();}},handleTab:function(event){if(this.preventFocusChangeOnTab)if(this.view.getSelection()){event.kill();}else event.prevent();this.view.select();},select:function(r){if(r&&this.setValueOnSelect){this.setValue(r.text);this.setHiddenValue(r.uid);this.selectedText=r.text;i.addClass(this.inputWrap,'selected');}},afterSelect:function(){this.keepFocused?this.element.focus():this.element.blur();this.resetOnSelect?this.reset():this.view.reset();},unselect:function(){if(this.setValueOnSelect){this.selectedText=null;i.removeClass(this.inputWrap,'selected');}this.setHiddenValue();this.inform('unselect',this);},setEnabled:function(r){var s=r===false;this.element.disabled=s;i.conditionClass(this.root,'uiTypeaheadDisabled',s);},reset:function(){this.unselect();this.setValue();!this.keepFocused&&k.reset(this.element);this.view.reset();this.inform('reset');},getElement:function(){return this.element;},setExclusions:function(r){this._exclusions=r;},getExclusions:function(){return this._exclusions;},setValue:function(r){this.value=this.nextQuery=r||'';k.setValue(this.element,this.value);},setHiddenValue:function(r){this.hiddenInput.value=(r||r===0)?r:'';g.inform('Form/change',{node:this.hiddenInput});},getValue:function(){return k.getValue(this.element);},getHiddenValue:function(){return this.hiddenInput.value||'';},checkValue:function(){var r=this.getValue();if(r==this.value)return;if(this.selectedText&&this.selectedText!=r)this.unselect();var s=Date.now(),t=s-this.time;this.time=s;this.value=this.nextQuery=r;this.performQuery(t);},performQuery:function(r){if(this.selectedText)return;r=r||0;if(this.fetching&&r<this.queryTimeout){this.data.query(this.nextQuery,true,this._exclusions);}else{this.data.query(this.nextQuery,false,this._exclusions);this.nextQuery=null;}}});e.exports=q;});
__d("UIIntentionalStreamMessage",[],function(a,b,c,d,e,f){var g={SET_AUTO_INSERT:'UIIntentionalStream/setAutoInsert',UPDATE_STREAM:'UIIntentionalStreamRefresh/updateStream',REFRESH_STREAM:'UIIntentionalStreamRefresh/refreshStream',UPDATE_AUTOREFRESH_CONFIG:'UIIntentionalStream/updateAutoRefreshConfig',UPDATE_HTML_CONTENT:'UIIntentionalStream/updateHtmlContent',UPDATE_LAST_REFRESH_TIME:'UIIntentionalStream/updateLastRefreshTime',INSERT_STORIES:'UIIntentionalStream/updateLastRefreshTime',UNLOAD:'UIIntentionalStream/unload'};e.exports=g;});
__d("coalesce",[],function(a,b,c,d,e,f){function g(){for(var h=0;h<arguments.length;++h)if(arguments[h]!=null)return arguments[h];return null;}e.exports=g;});
__d("reportData",["EagleEye","userAction"],function(a,b,c,d,e,f){var g=b('EagleEye'),h=b('userAction');function i(j,k){k=k||{};var l={ft:(k.ft||{}),gt:(k.gt||{})},m='-',n=a.ArbiterMonitor,o=(!!n)?n.getActFields():[],p=(!n)?'r':'a',q=[Date.now(),h.getCurrentUECount(),m,j,m,m,p,a.URI?a.URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,l,0,0,0,0].concat(o);g.log('act',q);}e.exports=i;});
__d("legacy:onvisible",["OnVisible"],function(a,b,c,d){a.OnVisible=b('OnVisible');},3);
__d("UIPagelet",["AjaxPipeRequest","AsyncRequest","DOM","HTML","ScriptPathState","URI","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('AjaxPipeRequest'),h=b('AsyncRequest'),i=b('DOM'),j=b('HTML'),k=b('ScriptPathState'),l=b('URI'),m=b('copyProperties'),n=b('ge');function o(p,q,r,s){this._id=p||null;this._element=n(p||i.create('div'));this._src=q||null;this._context_data=r||{};this._data=s||{};this._handler=bagofholding;this._request=null;this._use_ajaxpipe=false;this._is_bundle=true;this._allow_cross_page_transition=false;this._append=false;return this;}o.loadFromEndpoint=function(p,q,r,s){s=s||{};var t='/ajax/pagelet/generic.php/';if(s.intern)t='/intern'+t;var u=(t+p).replace(/\/+/g,'/');if(s.subdomain)u=l(u).setSubdomain(s.subdomain);var v=new o(q,u,r).setUseAjaxPipe(s.usePipe).setPageletCacheMiss(s.pageletCacheMiss).setBundleOption(p.substring(0,8)!='/intern/'&&s.bundle!==false).setAppend(s.append).setJSNonBlock(s.jsNonblock).setForceFinish(s.forceFinish).setAutomatic(s.automatic).setDisplayCallback(s.displayCallback).setConstHeight(s.constHeight).setAllowCrossPageTransition(s.crossPage);s.handler&&v.setHandler(s.handler);v.go();return v;};m(o.prototype,{getElement:function(p){p=p||false;if(p)this._element=n(this._id);return this._element;},setHandler:function(p){this._handler=p;return this;},go:function(p,q){if(arguments.length>=2||typeof p=='string'){this._src=p;this._data=q||{};}else if(arguments.length==1)this._data=p;this.refresh();return this;},setAllowCrossPageTransition:function(p){this._allow_cross_page_transition=p;return this;},setBundleOption:function(p){this._is_bundle=p;return this;},refresh:function(p){var q=function(t){this._request=null;if(p&&this._id)this._element=n(this._id);var u=j(t.getPayload());if(this._append){i.appendContent(this._element,u);}else i.setContent(this._element,u);this._handler();}.bind(this);if(this._use_ajaxpipe){k.setIsUIPageletRequest(true);this._request=new g();this._request.setCanvasId(this._id).setAppend(this._append).setConstHeight(this._constHeight).setJSNonBlock(this._jsNonblock).setForceFinish(this._forceFinish).setAutomatic(this._automatic).setPageletCacheMiss(this._pageletCacheMiss).setDisplayCallback(this._displayCallback);}else{var r=this._displayCallback;this._request=new h().setMethod('GET').setReadOnly(true).setOption('bundle',this._is_bundle).setHandler(function(t){if(r){r(q.curry(t));}else q(t);});}var s={};m(s,this._context_data);m(s,this._data);this._request.setURI(this._src).setAllowCrossPageTransition(this._allow_cross_page_transition).setData({data:JSON.stringify(s)}).send();return this;},cancel:function(){if(this._request)this._request.abort();},setUseAjaxPipe:function(p){this._use_ajaxpipe=!!p;return this;},setPageletCacheMiss:function(p){this._pageletCacheMiss=p;return this;},setAppend:function(p){this._append=!!p;return this;},setJSNonBlock:function(p){this._jsNonblock=!!p;return this;},setForceFinish:function(p){this._forceFinish=!!p;return this;},setAutomatic:function(p){this._automatic=!!p;return this;},setDisplayCallback:function(p){this._displayCallback=p;return this;},setConstHeight:function(p){this._constHeight=!!p;return this;}});e.exports=o;});
__d("ModalLayer",["event-extensions","function-extensions","Arbiter","CSS","DataStore","DOM","DOMDimensions","DOMQuery","ScrollAwareDOM","Style","URI","UserAgent","Vector","copyProperties","csx","cx","debounceAcrossTransitions"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('DOMDimensions'),l=b('DOMQuery'),m=b('ScrollAwareDOM'),n=b('Style'),o=b('URI'),p=b('UserAgent'),q=b('Vector'),r=b('copyProperties'),s=b('csx'),t=b('cx'),u=b('debounceAcrossTransitions'),v=[],w=null,x=null;function y(){if(!x)x=l.scry(document.body,"._li")[0];return x;}function z(ea){var fa={position:q.getScrollPosition()},ga=ea.offsetTop-fa.position.y;h.addClass(ea,"_31e");n.set(ea,'top',ga+'px');g.inform('reflow');fa.listener=m.subscribe('scroll',function(ha,ia){if(l.contains(ea,ia.target)){var ja=ea.offsetTop-ia.delta.y;n.set(ea,'top',ja+'px');fa.position=fa.position.add(ia.delta);return false;}});i.set(ea,'ModalLayerData',fa);if(p.firefox()<13)aa.curry(ea).defer();}function aa(ea){l.scry(ea,'div.swfObject').forEach(function(fa){var ga=fa.getAttribute('data-swfid');if(ga&&window[ga]){var ha=window[ga];ha.addParam('autostart','false');ha.addParam('autoplay','false');ha.addParam('play','false');ha.addVariable('video_autoplay','0');ha.addVariable('autoplay','0');ha.addVariable('play','0');var ia=o(ha.getAttribute('swf'));ia.addQueryData({autoplay:'0'});ia.setPath(ia.getPath().replace('autoplay=1','autoplay=0'));ha.setAttribute('swf',ia.toString());ha.write(fa);}});}function ba(ea,fa){var ga=i.get(ea,'ModalLayerData');if(ga){var ha=function(){h.removeClass(ea,"_31e");n.set(ea,'top','');if(fa){var ka=l.getDocumentScrollElement();ka.scrollTop=ga.position.y;}g.inform('reflow');ga.listener.unsubscribe();ga.listener=null;i.remove(ea,'ModalLayerData');};if(fa&&p.osx()>=10.8&&p.safari()>=536.25&&!p.chrome()){var ia=j.create('div',{className:"_42w"});n.set(ia,'height',ea.offsetHeight+'px');j.appendContent(document.body,ia);var ja=l.getDocumentScrollElement();ja.scrollTop=ga.position.y;fa=false;!function(){ha();j.remove(ia);}.defer();}else ha();}if(p.ie()<7)n.set(ea,'height','');}function ca(){var ea;if(p.ie()<7){var fa=v[v.length-1].getLayerRoot(),ga=Math.max(fa.offsetHeight,fa.scrollHeight);ea=function(ma){n.set(ma,'height',(-ma.offsetTop+ga)+'px');};}var ha=v.length;while(ha--){var ia=v[ha],ja=ia.getLayerRoot(),ka=ia.getLayerContentRoot(),la=ka.offsetWidth+k.measureElementBox(ka,'width',0,0,1);if(p.ie()<7){n.set(ja,'width',la>document.body.clientWidth?la+'px':'');}else n.set(ja,'min-width',la+'px');if(ea&&ha<v.length-1)ea(ja);}ea&&ea(y());}function da(ea){this._layer=ea;}r(da.prototype,{_subscription:null,enable:function(){if(!y())return;this._subscription=this._layer.subscribe(['show','hide'],function(ea){ea=='show'?this._addModal():this._removeModal();}.bind(this));if(this._layer.isShown())this._addModal();},disable:function(){if(!y())return;this._subscription.unsubscribe();this._subscription=null;if(this._layer.isShown())this._removeModal();},_addModal:function(){h.addClass(this.getLayerRoot(),"_3qw");var ea=v[v.length-1],fa=ea?ea.getLayerRoot():y();z(fa);var ga=l.getDocumentScrollElement();ga.scrollTop=0;if(!v.length){if(p.ie()<7)h.addClass(document.documentElement,"_31d");w=Event.listen(window,'resize',u(ca,100));}v.push(this);ca.defer();},_removeModal:function(){h.removeClass(this.getLayerRoot(),"_3qw");var ea=this===v[v.length-1];v.remove(this);var fa=v[v.length-1];if(!fa){w.remove();w=null;}!function(){ba(fa?fa.getLayerRoot():y(),ea);if(v.length){ca.defer();}else if(p.ie()<7)h.removeClass(document.documentElement,"_31d");}.defer(200,false);},getLayerRoot:function(){return this._layer.getRoot();},getLayerContentRoot:function(){return this._layer.getContentRoot();}});e.exports=da;});
__d("DialogX",["event-extensions","function-extensions","AccessibleLayer","Arbiter","ArbiterMixin","Class","DOM","Layer","LayerButtons","LayerFormHooks","LayerTabIsolation","ModalLayer","Style","UserAgent","Vector","copyProperties","cx","debounce","getOverlayZIndex"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('AccessibleLayer'),h=b('Arbiter'),i=b('ArbiterMixin'),j=b('Class'),k=b('DOM'),l=b('Layer'),m=b('LayerButtons'),n=b('LayerFormHooks'),o=b('LayerTabIsolation'),p=b('ModalLayer'),q=b('Style'),r=b('UserAgent'),s=b('Vector'),t=b('copyProperties'),u=b('cx'),v=b('debounce'),w=b('getOverlayZIndex');function x(z,aa){this.parent.construct(this,z,aa);}j.extend(x,l);t(x,i);t(x.prototype,{_modal:false,_ie:null,_wrapper:null,_configure:function(z,aa){this.parent._configure(z,aa);if(z.modal){this._modal=true;this.enableBehaviors([p,o]);}if(z.autohide)var ba=this.subscribe('show',function(){ba.unsubscribe();this.hide.shield(this).defer(z.autohide);}.bind(this));},_getDefaultBehaviors:function(){return this.parent._getDefaultBehaviors().concat([y,g,m,n]);},_buildWrapper:function(z,aa){var ba=k.create('div',{className:"_t"},aa),ca;this._ie=r.ie();if(this._ie>6&&this._ie<9){ca=[k.create('div',{className:"_u"}),k.create('div',{className:"_v"}),k.create('div',{className:"_w"}),k.create('div',{className:"_x"}),k.create('div',{className:"_y"}),k.create('div',{className:"_z"}),ba];}else ca=k.create('div',{className:"_1yu"},ba);this._wrapper=k.create('div',{className:"_1yv"},ca);this.setWidth(z.width);var da=k.create('div',{className:"_10",role:'dialog'},this._wrapper);if(z.titleID)da.setAttribute('aria-labelledby',z.titleID);return da;},getContentRoot:function(){return this._wrapper;},updatePosition:function(){var z=s.getViewportDimensions().y-s.getElementDimensions(this._wrapper).y,aa;if(z<250){if(z>80){aa=z/2;}else aa=40;}else aa=125;if(!this._modal&&(!this._ie||this._ie<7))if(aa<=40){this.enableBehavior(p);}else this.disableBehavior(p);if(this._ie<7){var ba=s.getScrollPosition().y;q.set(this._wrapper,'top',aa+ba+'px');}else q.set(this._wrapper,'margin-top',aa+'px');if(this._causalElement){var ca=w(this._causalElement,this.getInsertParent());q.set(this.getRoot(),'z-index',ca>200?ca:'');}},setWidth:function(z){z=Math.floor(z);if(this._ie>6&&this._ie<9)z-=20;q.set(this._wrapper,'width',z+'px');}});function y(z){this._layer=z;}t(y.prototype,{_subscription:null,_resize:null,enable:function(){this._subscription=this._layer.subscribe(['show','hide'],function(z){if(z==='show'){this._attach();h.inform('layer_shown',{type:'DialogX'});}else{this._detach();h.inform('layer_hidden',{type:'DialogX'});}}.bind(this));},disable:function(){this._subscription.unsubscribe();this._subscription=null;this._resize&&this._detach();},_attach:function(){this._layer.updatePosition();this._resize=Event.listen(window,'resize',v(this._layer.updatePosition.bind(this._layer)));},_detach:function(){this._resize.remove();this._resize=null;}});e.exports=x;});
__d("AsyncDialog",["AsyncRequest","Bootloader","copyProperties","CSS","cx","DialogX","DOM","Env","Parent","tx","URI"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Bootloader'),i=b('copyProperties'),j=b('CSS'),k=b('cx'),l=b('DialogX'),m=b('DOM'),n=b('Env'),o=b('Parent'),p=b('tx'),q=b('URI'),r=new l({width:465,className:"_q"},m.create('div',{className:"_r"},"Loading...")),s=1,t=[],u=0;function v(){u--;if(!u)r.hide();}function w(y,z){var aa=s++;t[aa]=z;i(y.getData(),{__asyncDialog:aa});var ba=false;u++;r.show();function ca(){if(!ba)v();}y.setInterceptHandler(function(da){ba=true;v();});y.setFinallyHandler(function(da){var ea=da.getPayload();if(ea&&ea.asyncURL)x.send(new g(ea.asyncURL));ca();});y.setAbortHandler(ca);y.send();}var x={send:function(y,z){w(y,z||bagofholding);},bootstrap:function(y,z,aa){if(!y)return;var ba=o.byClass(z,'stat_elem')||z;if(ba&&j.hasClass(ba,'async_saving'))return false;var ca=new q(y).getQueryData();ca.causal_element=z?m.getID(z):null;var da=aa==='dialog',ea=new g().setURI(y).setData(ca).setMethod(da?'GET':'POST').setReadOnly(da).setRelativeTo(z).setStatusElement(ba).setNectarModuleDataSafe(z);if(n.is_desktop){h.loadModules(['FbdDialogProvider'],function(fa){fa.sendDialog(ea,x.send);});return;}x.send(ea);},respond:function(y,z){var aa=t[y];if(aa){aa(z);delete t[y];}},getLoadingDialog:function(){return r;}};e.exports=x;});
__d("legacy:AudienceSelector",["AudienceSelector"],function(a,b,c,d){b('AudienceSelector');},3);
__d("TypeaheadBestName",["TypeaheadUtil","copyProperties"],function(a,b,c,d,e,f){var g=b('TypeaheadUtil'),h=b('copyProperties');function i(j){this._typeahead=j;}h(i.prototype,{_subscription:null,enable:function(){var j=this._typeahead.getView();this._subscription=j.subscribe('beforeRender',function(k,l){var m=l.value;for(var n=0;n<l.results.length;++n){var o=l.results[n];if(o.alternate_names==null)continue;if(g.isQueryMatch(m,o.default_name)){o.text=o.default_name;return;}for(var p=0;p<o.alternate_names.length;p++)if(g.isQueryMatch(m,o.alternate_names[p])){o.text=o.alternate_names[p];return;}o.text=o.default_name;}});},disable:function(){this._typeahead.getView().unsubscribe(this._subscription);this._subscription=null;}});e.exports=i;});
__d("legacy:BestNameTypeaheadBehavior",["TypeaheadBestName"],function(a,b,c,d){var e=b('TypeaheadBestName');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.buildBestAvailableNames=function(f){f.enableBehavior(e);};},3);
__d("Scrollable",["event-extensions","Parent","UserAgent"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Parent'),h=b('UserAgent'),i=function(event){var k=g.byClass(event.getTarget(),'scrollable');if(!k)return;if((typeof event.axis!=='undefined'&&event.axis===event.HORIZONTAL_AXIS)||(event.wheelDeltaX&&!event.wheelDeltaY))return;var l=event.wheelDelta?event.wheelDelta:-event.detail,m=k.scrollHeight,n=k.clientHeight;if(m>n){var o=k.scrollTop;if((l>0&&o===0)||(l<0&&o>=m-n)){event.prevent();}else if(h.ie()<9)if(k.currentStyle){var p=k.currentStyle.fontSize;if(p.indexOf('px')<0){var q=document.createElement('div');q.style.fontSize=p;q.style.height='1em';p=q.style.pixelHeight;}else p=parseInt(p,10);k.scrollTop=o-Math.round(l/120*p);event.prevent();}}},j=document.documentElement;if(h.firefox()){j.addEventListener('DOMMouseScroll',i,false);}else Event.listen(j,'mousewheel',i);});
__d("ContextualLayerUpdateOnScroll",["event-extensions","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscriptions:[],enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attachScrollListener.bind(this)),this._layer.subscribe('hide',this._removeScrollListener.bind(this))];},disable:function(){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this.detach();},_attachScrollListener:function(){if(this._listener)return;var i=this._layer.getContextScrollParent();this._listener=Event.listen(i,'scroll',this._layer.updatePosition.bind(this._layer));},_removeScrollListener:function(){this._listener&&this._listener.remove();this._listener=null;}});e.exports=h;});
__d("LayerStopBlur",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscriptions:null,_onBlur:null,enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attach.bind(this)),this._layer.subscribe('hide',this._detach.bind(this))];if(this._layer.isShown())this._attach();},disable:function(){this._detach();while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;},_detach:function(){this._onBlur&&this._onBlur.unsubscribe();this._onBlur=null;},_attach:function(){(function(){this._onBlur=this._layer.subscribe('blur',function(){return false;});}).bind(this).defer();}});e.exports=h;});
__d("legacy:ContextualDialogX",["ContextualDialogX"],function(a,b,c,d){a.ContextualDialogX=b('ContextualDialogX');},3);
__d("legacy:Tooltip",["Tooltip"],function(a,b,c,d){a.Tooltip=b('Tooltip');},3);
__d("ClearableTypeahead",["event-extensions"],function(a,b,c,d,e,f){b('event-extensions');var g={resetOnCloseButtonClick:function(h,i){Event.listen(i,'click',function(){var j=h.getCore();j.reset();j.getElement().focus();});}};e.exports=g;});
__d("TypeaheadShowLoadingIndicator",["CSS","copyProperties"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('copyProperties');function i(j){this._typeahead=j;}h(i.prototype,{_subscription:null,enable:function(){this._subscription=this._typeahead.subscribe('loading',function(j,k){g.conditionClass(this._typeahead.getElement(),'typeaheadLoading',k.loading);g.conditionClass(this._typeahead.getView().getElement(),'typeaheadViewLoading',k.loading);}.bind(this));},disable:function(){this._typeahead.unsubscribe(this._subscription);this._subscription=null;}});e.exports=i;});
__d("legacy:ShowLoadingIndicatorTypeaheadBehavior",["TypeaheadShowLoadingIndicator"],function(a,b,c,d){var e=b('TypeaheadShowLoadingIndicator');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.showLoadingIndicator=function(f){f.enableBehavior(e);};},3);
__d("CompactTypeaheadRenderer",["DOM"],function(a,b,c,d,e,f){var g=b('DOM');function h(i,j){var k=[],l=i.photo;if(l){if(l instanceof Array){var m=[g.create('span',{className:'splitpic leftpic'},[g.create('img',{alt:'',src:l[0]})]),g.create('span',{className:'splitpic'+(l[2]?' toppic':'')},[g.create('img',{alt:'',src:l[1]})])];if(l[2])m.push(g.create('span',{className:'splitpic bottompic'},[g.create('img',{alt:'',src:l[2]})]));l=g.create('span',{className:'splitpics clearfix'},m);}else l=g.create('img',{alt:'',src:l});k.push(l);}if(i.text)k.push(g.create('span',{className:'text'},[i.text]));var n=i.subtext,o=i.category;if(n||o){var p=[];n&&p.push(n);n&&o&&p.push(" \u00b7 ");o&&p.push(o);k.push(g.create('span',{className:'subtext'},p));}var q=g.create('li',{className:i.type||''},k);if(i.text)q.setAttribute('aria-label',i.text);return q;}h.className='compact';e.exports=h;});
__d("MenuXItemInterface",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(){}g(h.prototype,{_root:null,getRoot:function(){if(!this._root)this._root=this.render();return this._root;},render:bagofholding,getAccessKey:bagofholding,hasAction:bagof(false),focus:bagof(false),blur:bagof(false),handleClick:bagof(false)});e.exports=h;});
__d("MenuXItemBase",["Class","copyProperties","CSS","DOM","HTML","MenuXItemInterface"],function(a,b,c,d,e,f){var g=b('Class'),h=b('copyProperties'),i=b('CSS'),j=b('DOM'),k=b('HTML'),l=b('MenuXItemInterface');function m(n){this.parent.construct(this);this._data=n;}g.extend(m,l);h(m.prototype,{render:function(){var n='uiMenuXItem';if(this._data.className)n+=' '+this._data.className;var o={className:n,'aria-selected':'false'};for(var p in this._data)if(p.indexOf('data-')===0)o[p]=this._data[p];return j.create('li',o,this._renderItemContent());},_renderItemContent:function(){return k(this._data.markup).getNodes();}});e.exports=m;});
__d("MenuXItem",["event-extensions","Class","copyProperties","CSS","DOM","KeyStatus","MenuXItemBase"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Class'),h=b('copyProperties'),i=b('CSS'),j=b('DOM'),k=b('KeyStatus'),l=b('MenuXItemBase');function m(n){this.parent.construct(this,n);}g.extend(m,l);h(m.prototype,{getValue:function(){return this._data.value;},getAccessKey:function(){return this._data.label&&this._data.label.charAt(0);},hasAction:bagof(true),focus:function(){if(!this._root.offsetParent)return false;i.addClass(this._anchor,'highlighted');i.addClass(this._root,'selected');this._root.setAttribute('aria-selected','true');if(k.isKeyDown())this._anchor.focus();},blur:function(){i.removeClass(this._anchor,'highlighted');i.removeClass(this._root,'selected');this._root.setAttribute('aria-selected','false');},handleClick:function(){if(typeof this._onclickHandler==='function')return this._onclickHandler();return !!((this._data.rel&&this._data.rel!=='ignore')||this._data.href);},setOnClickHandler:function(n){this._onclickHandler=n;},_renderItemContent:function(){this._anchor=j.create('a',{className:'itemAnchor'},j.create('span',{className:'itemLabel'},this._data.markup||this._data.label));if(this._data.icon){j.prependContent(this._anchor,this._data.icon);i.addClass(this._anchor,'hasIcon');}this._anchor.setAttribute('href',this._data.href||'#');if(this._data.rel){this._anchor.setAttribute('rel',this._data.rel);}else if(!this._data.href)this._anchor.setAttribute('rel','ignore');if(this._data.ajaxify)this._anchor.setAttribute('ajaxify',this._data.ajaxify);if(this._data.target)this._anchor.setAttribute('target',this._data.target);this._anchor.setAttribute('role','menuitem');this._anchor.setAttribute('title',this._data.title);return this._anchor;}});e.exports=m;});
__d("ChatConfig",["copyProperties","ChatConfigInitialData"],function(a,b,c,d,e,f){var g=c('ChatConfigInitialData'),h=b('copyProperties'),i={},j={get:function(k,l){return k in i?i[k]:l;},set:function(k){if(arguments.length>1){var l={};l[k]=arguments[1];k=l;}h(i,k);},getDebugInfo:function(){return i;}};j.set(g);e.exports=j;});
__d("ScrollingPager",["Arbiter","copyProperties","CSS","OnVisible","UIPagelet","$","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('copyProperties'),i=b('CSS'),j=b('OnVisible'),k=b('UIPagelet'),l=b('$'),m=b('ge'),n={};function o(p,q,r,s){this.scroll_loader_id=p;this.pagelet_src=q;this.data=r;this.options=s||{};if(this.options.target_id){this.target_id=this.options.target_id;this.options.append=true;}else this.target_id=p;this.handler=null;}h(o,{REGISTERED:'ScrollingPager/registered',getInstance:function(p){return n[p];}});h(o.prototype,{setBuffer:function(p){this.options.buffer=p;this.onvisible&&this.onvisible.setBuffer(p);},getBuffer:function(){return this.options.buffer;},register:function(){this.onvisible=new j(l(this.scroll_loader_id),this.getHandler(),false,this.options.buffer,this.options);n[this.scroll_loader_id]=this;g.inform(o.REGISTERED,{id:this.scroll_loader_id});},getInstance:function(p){return n[p];},getHandler:function(){if(this.handler)return this.handler;function p(q){var r=m(this.scroll_loader_id);if(!r){this.onvisible.remove();return;}i.addClass(r.firstChild,'async_saving');var s=this.options.handler;this.options.handler=function(){g.inform('ScrollingPager/loadingComplete');s&&s.apply(null,arguments);};if(q)this.data.pager_fired_on_init=true;k.loadFromEndpoint(this.pagelet_src,this.target_id,this.data,this.options);}return p.bind(this);},setHandler:function(p){this.handler=p;},removeOnVisible:function(){this.onvisible.remove();}});e.exports=o;});
__d("TimelineConstants",[],function(a,b,c,d,e,f){var g={DS_HEIGHT:'timeline-unit-height',DS_LOADED:'timeline-capsule-loaded',DS_SIDEORG:'timeline-unit-sideorg',DS_TAILBALANCE:'timeline-capsule-tailbalance',DS_COLUMN_HEIGHT_DIFFERENTIAL:'timeline-column-diff-height',FIXED_SIDE_LEFT:'left',FIXED_SIDE_RIGHT:'right',FIXED_SIDE_BOTH:'both',SCROLL_TO_OFFSET:30,SUBSECTION_SCROLL_TO_OFFSET:90};e.exports=g;});
__d("TimelineURI",["URI"],function(a,b,c,d,e,f){var g=b('URI'),h={TIMELINE_KEY:'timeline',WALL_KEY:'wall',parseURI:function(i){i=g(i);var j=i.getQueryData(),k=i.getPath(),l=k.split('/').slice(1);if(l[0]=='people'||l[0]=='pages')l=l.slice(2);var m=j.sk||l[1]||h.TIMELINE_KEY;if(m==h.WALL_KEY)m=h.TIMELINE_KEY;var n=null,o=null;if(m==h.TIMELINE_KEY){o=parseInt(l[2],10)||null;n=parseInt(l[3],10)||null;}return {path:k,id:j.id||l[0],key:m,viewas:j.viewas?j.viewas:0,filter:j.filter?j.filter:null,year:o,month:n,friendship:!!j.and};}};e.exports=h;});
__d("TimelineController",["event-extensions","Arbiter","CSS","DataStore","DOM","Run","ScrollingPager","Style","TimelineConstants","TimelineURI","Vector","ViewportBounds","$","ge","throttle"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('Run'),l=b('ScrollingPager'),m=b('Style'),n=b('TimelineConstants'),o=b('TimelineURI'),p=b('Vector'),q=b('ViewportBounds'),r=b('$'),s=b('ge'),t=b('throttle'),u=484,v=48,w=740,x=1285,y=null,z=false,aa,ba,ca,da,ea={},fa={},ga=[],ha=null,ia=0,ja=false,ka=false,la=false,ma={allactivity:true,approve:true,games:true,map:true,music:true,video:true};ma[o.TIMELINE_KEY]=true;var na=[],oa=false;function pa(){ha&&ha.remove();ha=null;}function qa(za,ab,bb){bb=bb||[];if(ea[za])return ea[za][ab].apply(ea[za],bb);fa[za]=fa[za]||{};fa[za][ab]=bb;return false;}function ra(){if(!(ja||la||ka)){pa();return;}var za=p.getScrollPosition();ja=ja&&ta(s('rightCol'),za,'paddingTop',true);ka=ka&&ta(r('pagelet_above_header_timeline'),za,'top');la=la&&ta(r('blueBar'),za,'paddingTop');}function sa(){var za=p.getScrollPosition(),ab=ia===0||za.y>=ia;qa(ya.STICKY_HEADER,'toggle',[ab]);qa(ya.CONTENT,'checkCurrentSectionChange');}function ta(za,ab,bb,cb){if(!za){pa();return;}if(ab.y<=0){ua(za,bb);return false;}else{var db=cb&&ya.getCurrentScrubber();if((db&&h.hasClass(db.getRoot(),'fixed_elem'))||m.isFixed(s('pagelet_timeline_friends'))){ua(za,bb);return false;}else{var eb=parseInt(za.style[bb],10)||0;if(ab.y<eb){h.addClass(za,'timeline_fixed');za.style[bb]=ab.y+'px';}else h.removeClass(za,'timeline_fixed');}}return true;}function ua(za,ab){za.style[ab]='0px';h.removeClass(za,'timeline_fixed');}function va(){qa(ya.ADS,'adjustAdsType',[ya.shouldShowWideAds()]);qa(ya.ADS,'adjustAdsToFit');qa(ya.CONTENT,'adjustContentPadding');qa(ya.STICKY_HEADER_NAV,'adjustMenuHeights');}function wa(za,ab){if(za=='sidebar/initialized')oa=true;qa(ya.ADS,'adjustAdsType',[ya.shouldShowWideAds()]);}function xa(){while(ga.length)ga.pop().remove();for(var za in ea)ea[za].reset&&ea[za].reset();pa();da.unsubscribe();da=null;y=null;aa=null;ea={};fa={};ia=0;ka=false;if(ja){var ab=s('rightCol');if(ab){ab.style.paddingTop='';h.removeClass(ab,'timeline_fixed');}}ja=false;if(la){r('blueBar').style.paddingTop='';h.removeClass(r('blueBar'),'timeline_fixed');}la=false;na=[];oa=false;z=false;i.purge(n.DS_HEIGHT);i.purge(n.DS_LOADED);i.purge(n.DS_SIDEORG);i.purge(n.DS_TAILBALANCE);i.purge(n.DS_COLUMN_HEIGHT_DIFFERENTIAL);}var ya={NAV:'nav',STICKY_HEADER:'sticky_header',STICKY_HEADER_NAV:'sticky_header_nav',SCRUBBER:'scrubber',CONTENT:'content',ADS:'ads',COVER:'cover',LOGGING:'logging',SECTION_LOADING:'TimelineController/sectionLoading',SECTION_LOADED:'TimelineController/sectionLoaded',SECTION_FULLY_LOADED:'TimelineController/sectionFullyLoaded',SECTION_REGISTERED:'TimelineController/sectionRegistered',SCRUBBER_DEFAULT_OFFSET:38,init:function(za,ab,bb){if(z)return;if(ab==o.WALL_KEY)ab=o.TIMELINE_KEY;z=true;aa=za;ba=bb.has_fixed_ads;ca=bb.force_wide_ads;qa(ya.CONTENT,'adjustContentPadding');ga.push(Event.listen(window,'scroll',t(sa,100)),Event.listen(window,'resize',t(va,100)));da=g.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide'],wa);k.onLeave(xa);ya.registerCurrentKey(ab);},setAdsTracking:function(za){qa(ya.ADS,'start',[za]);},coverHasExpanded:function(za){var ab=s('rightCol');if(ab){ab.style.paddingTop=za+'px';ja=true;}var bb=r('pagelet_above_header_timeline');if(bb.firstChild){r('above_header_timeline_placeholder').style.height=bb.offsetHeight+'px';bb.style.top=za+'px';ka=true;}var cb=document.documentElement;la=cb.clientHeight<400||cb.clientWidth<cb.scrollWidth;if(la)r('blueBar').style.paddingTop=za+'px';ha=Event.listen(window,'scroll',ra);g.inform('reflow');},pageHasScrubber:function(za){return !za||za.match(/^(og_)?app_/)||(za in ma);},fixedAds:function(){return ba;},registerCurrentKey:function(za){y=za;var ab=p.getViewportDimensions().y<w;qa(ya.ADS,'setShortMode',[ab,za]);qa(ya.ADS,'updateCurrentKey',[za]);ia=za==o.TIMELINE_KEY?u-v:0;},getCurrentKey:function(){return y;},getSectionKeys:function(){return na;},getCurrentScrubber:function(){return ea[ya.SCRUBBER];},getCurrentStickyHeaderNav:function(){return ea[ya.STICKY_HEADER_NAV];},getSection:function(za){return qa(ya.CONTENT,'getSection',[za]);},scrubberHasLoaded:function(za){qa(ya.STICKY_HEADER_NAV,'addTimePeriods',[na]);qa(ya.ADS,'registerScrubber',[za]);},registerSectionKey:function(za,ab){if(ea[ya.STICKY_HEADER_NAV]){qa(ya.STICKY_HEADER_NAV,'addTimePeriod',[za]);}else na[ab]=za;},scrubberHasChangedState:function(){qa(ya.ADS,'adjustAdsToFit');},scrubberWasClicked:function(za){qa(ya.LOGGING,'logScrubberClick',[za]);},sectionHasChanged:function(za,ab){qa(ya.STICKY_HEADER_NAV,'updateSection',[za,ab]);qa(ya.SCRUBBER,'updateSection',[za,ab]);qa(ya.ADS,'loadAdsIfEnoughTimePassed');qa(ya.LOGGING,'logSectionChange',[za,ab]);},navigateToSection:function(za){qa(ya.CONTENT,'navigateToSection',[za]);},shouldShowWideAds:function(){if(ca)return true;if(!oa)return false;var za=x+q.getRight();return p.getViewportDimensions().x>=za;},sidebarInitialized:function(){return oa;},adjustStickyHeaderWidth:function(){qa(ya.STICKY_HEADER,'adjustWidth');},register:function(za,ab){ea[za]=ab;if(fa[za]){for(var bb in fa[za])qa(za,bb,fa[za][bb]);delete fa[za];}},adjustScrollingPagerBuffer:function(za,ab){var bb=i.get(n.DS_COLUMN_HEIGHT_DIFFERENTIAL,ab);if(!bb)return;var cb=l.getInstance(za);cb&&cb.setBuffer(cb.getBuffer()+Math.abs(bb));},runOnceWhenSectionFullyLoaded:function(za,ab,bb){if(qa(ya.CONTENT,'getSection',[ab])){var cb=false;j.scry(ea[ya.CONTENT].getSection(ab).node,'ol.fbTimelineCapsule').forEach(function(eb){if(!cb&&parseInt(i.get(n.DS_LOADED,eb.id),10)>=parseInt(bb,10)){za();cb=true;}});if(cb)return;}var db=g.subscribe(ya.SECTION_FULLY_LOADED,function(eb,fb){if(fb.scrubberKey===ab&&fb.pageIndex===bb){za();db.unsubscribe();}});}};e.exports=ya;});
__d("TimelineStickyHeader",["Arbiter","CSS","DOM","TimelineController","ViewportBounds"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('TimelineController'),k=b('ViewportBounds'),l=false,m=false,n,o,p,q,r={VISIBLE:'TimelineStickyHeader/visible',ADJUST_WIDTH:'TimelineStickyHeader/adjustWidth',init:function(s){if(l)return;l=true;n=s;o=i.find(s,'div.name');p=i.find(s,'div.actions');m=h.hasClass(s,'fbTimelineStickyHeaderVisible');q=k.addTop(function(){return m?s.offsetTop+s.scrollHeight:0;});j.register(j.STICKY_HEADER,r);},reset:function(){l=false;m=false;n=null;o=null;p=null;q.remove();q=null;},toggle:function(s){h.conditionClass(n,'fbTimelineStickyHeaderHidden',!s);if(s!==m){m=s;g.inform(r.VISIBLE,s);}},adjustWidth:function(){g.inform(r.ADJUST_WIDTH,o,g.BEHAVIOR_STATE);},getRoot:function(){return n;},setActions:function(s){if(l&&s){i.setContent(p,s);p=s;}}};e.exports=a.TimelineStickyHeader||r;});
__d("legacy:ui-scrolling-pager-js",["ScrollingPager"],function(a,b,c,d){a.ScrollingPager=b('ScrollingPager');},3);
__d("FBDesktopDetect",["UserAgent"],function(a,b,c,d,e,f){var g=b('UserAgent'),h='facebook.desktopplugin',i={mimeType:'application/x-facebook-desktop-1',isPluginInstalled:function(){if(g.osx())return false;var j=null;if(a.ActiveXObject){try{j=new a.ActiveXObject(h);if(j)return true;}catch(k){}}else if(a.navigator&&a.navigator.plugins){a.navigator.plugins.refresh(false);for(var l=0,m=a.navigator.plugins.length;l<m;l++){j=a.navigator.plugins[l];if(j.length&&j[0].type===this.mimeType)return true;}}return false;}};e.exports=i;});
__d("NavigationMessage",[],function(a,b,c,d,e,f){var g={NAVIGATION_BEGIN:'NavigationMessage/navigationBegin',NAVIGATION_SELECT:'NavigationMessage/navigationSelect',NAVIGATION_FIRST_RESPONSE:'NavigationMessage/navigationFirstResponse',NAVIGATION_COMPLETED:'NavigationMessage/navigationCompleted',NAVIGATION_FAILED:'NavigationMessage/navigationFailed',NAVIGATION_COUNT_UPDATE:'NavigationMessage/navigationCount',NAVIGATION_FAVORITE_UPDATE:'NavigationMessage/navigationFavoriteUpdate',NAVIGATION_ITEM_REMOVED:'NavigationMessage/navigationItemRemoved',NAVIGATION_ITEM_HIDDEN:'NavigationMessage/navigationItemHidden',INTERNAL_LOADING_BEGIN:'NavigationMessage/internalLoadingBegin',INTERNAL_LOADING_COMPLETED:'NavigationMessage/internalLoadingCompleted'};e.exports=g;});
__d("legacy:ui-side-nav-message",["NavigationMessage"],function(a,b,c,d){a.NavigationMessage=b('NavigationMessage');},3);
__d("legacy:Style",["Style"],function(a,b,c,d){a.Style=b('Style');},3);
__d("LinkshimAsyncLink",["$","AsyncSignal"],function(a,b,c,d,e,f){var g=b('$'),h=b('AsyncSignal'),i={swap:function(j,k){j.href=k;},referrer_log:function(j,k,l){var m=g('meta_referrer');m.content="origin";i.swap(j,k);(function(){m.content="default";new h(l,{}).send();}).defer(100);}};e.exports=i;});
__d("legacy:dom-asynclinkshim",["LinkshimAsyncLink"],function(a,b,c,d){a.LinkshimAsyncLink=b('LinkshimAsyncLink');},3);
__d("legacy:css",["CSS"],function(a,b,c,d){a.CSS=b('CSS');},3);
__d("DOMPosition",["DOMQuery"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h={getScrollPosition:function(){var i=g.getDocumentScrollElement();return {x:i.scrollLeft,y:i.scrollTop};},getElementPosition:function(i){if(!i)return;if(!('getBoundingClientRect' in i))return {x:0,y:0};var j=i.getBoundingClientRect(),k=document.documentElement,l=Math.round(j.left)-k.clientLeft,m=Math.round(j.top)-k.clientTop;return {x:l,y:m};}};e.exports=h;});
__d("DOMControl",["DataStore","$","copyProperties"],function(a,b,c,d,e,f){var g=b('DataStore'),h=b('$'),i=b('copyProperties');function j(k){this.root=h(k);this.updating=false;g.set(k,'DOMControl',this);}i(j.prototype,{getRoot:function(){return this.root;},beginUpdate:function(){if(this.updating)return false;this.updating=true;return true;},endUpdate:function(){this.updating=false;},update:function(k){if(!this.beginUpdate())return this;this.onupdate(k);this.endUpdate();},onupdate:function(k){}});j.getInstance=function(k){return g.get(k,'DOMControl');};e.exports=j;});
__d("Input",["CSS","DOMQuery","DOMControl"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOMQuery'),i=b('DOMControl'),j=function(l){var m=l.getAttribute('maxlength');if(m&&m>0)d(['enforceMaxLength'],function(n){n(l,m);});},k={focus:function(l){try{l.focus();}catch(m){}},isEmpty:function(l){return !(/\S/).test(l.value||'')||g.hasClass(l,'DOMControl_placeholder');},getValue:function(l){return k.isEmpty(l)?'':l.value;},setValue:function(l,m){g.removeClass(l,'DOMControl_placeholder');l.value=m||'';j(l);var n=i.getInstance(l);n&&n.resetHeight&&n.resetHeight();},setPlaceholder:function(l,m){l.setAttribute('aria-label',m);l.setAttribute('placeholder',m);if(l==document.activeElement)return;if(k.isEmpty(l)){g.conditionClass(l,'DOMControl_placeholder',m);l.value=m||'';}},reset:function(l){var m=l!==document.activeElement?(l.getAttribute('placeholder')||''):'';l.value=m;g.conditionClass(l,'DOMControl_placeholder',m);l.style.height='';},setSubmitOnEnter:function(l,m){g.conditionClass(l,'enter_submit',m);},getSubmitOnEnter:function(l){return g.hasClass(l,'enter_submit');},setMaxLength:function(l,m){if(m>0){l.setAttribute('maxlength',m);j(l);}else l.removeAttribute('maxlength');}};e.exports=k;});
__d("Form",["event-extensions","AsyncRequest","AsyncResponse","CSS","DOM","DOMPosition","DOMQuery","DataStore","Env","Input","Parent","URI","createArrayFrom","trackReferrer"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('AsyncResponse'),i=b('CSS'),j=b('DOM'),k=b('DOMPosition'),l=b('DOMQuery'),m=b('DataStore'),n=b('Env'),o=b('Input'),p=b('Parent'),q=b('URI'),r=b('createArrayFrom'),s=b('trackReferrer'),t='FileList' in window,u='FormData' in window;function v(x){var y={};q.implodeQuery(x).split('&').forEach(function(z){if(z){var aa=/^([^=]*)(?:=(.*))?$/.exec(z),ba=q.decodeComponent(aa[1]),ca=aa[2]?q.decodeComponent(aa[2]):null;y[ba]=ca;}});return y;}var w={getInputs:function(x){x=x||document;return [].concat(r(l.scry(x,'input')),r(l.scry(x,'select')),r(l.scry(x,'textarea')),r(l.scry(x,'button')));},getSelectValue:function(x){return x.options[x.selectedIndex].value;},setSelectValue:function(x,y){for(var z=0;z<x.options.length;++z)if(x.options[z].value==y){x.selectedIndex=z;break;}},getRadioValue:function(x){for(var y=0;y<x.length;y++)if(x[y].checked)return x[y].value;return null;},getElements:function(x){return r(x.tagName=='FORM'?x.elements:w.getInputs(x));},getAttribute:function(x,y){return (x.getAttributeNode(y)||{}).value||null;},setDisabled:function(x,y){w.getElements(x).forEach(function(z){if(z.disabled!==undefined){var aa=m.get(z,'origDisabledState');if(y){if(aa===undefined)m.set(z,'origDisabledState',z.disabled);z.disabled=y;}else if(aa!==true)z.disabled=false;}});},bootstrap:function(x,y){var z=(w.getAttribute(x,'method')||'GET').toUpperCase();y=p.byTag(y,'button')||y;var aa=p.byClass(y,'stat_elem')||x;if(i.hasClass(aa,'async_saving'))return;if(y&&(y.form!==x||(y.nodeName!='INPUT'&&y.nodeName!='BUTTON')||y.type!='submit')){var ba=l.scry(x,'.enter_submit_target')[0];ba&&(y=ba);}var ca=w.serialize(x,y);w.setDisabled(x,true);var da=w.getAttribute(x,'ajaxify')||w.getAttribute(x,'action');s(x,da);var ea=new g(da);ea.setData(ca).setNectarModuleDataSafe(x).setReadOnly(z=='GET').setMethod(z).setRelativeTo(x).setStatusElement(aa).setInitialHandler(w.setDisabled.curry(x,false)).setHandler(function(fa){Event.fire(x,'success',{response:fa});}).setErrorHandler(function(fa){if(Event.fire(x,'error',{response:fa})!==false)h.defaultErrorHandler(fa);}).setFinallyHandler(w.setDisabled.curry(x,false)).send();},forEachValue:function(x,y,z){w.getElements(x).forEach(function(aa){if(aa.name&&!aa.disabled&&aa.type!=='submit')if(!aa.type||((aa.type==='radio'||aa.type==='checkbox')&&aa.checked)||aa.type==='text'||aa.type==='password'||aa.type==='hidden'||aa.nodeName==='TEXTAREA'){z(aa.type,aa.name,o.getValue(aa));}else if(aa.nodeName==='SELECT'){for(var ba=0,ca=aa.options.length;ba<ca;ba++){var da=aa.options[ba];if(da.selected)z('select',aa.name,da.value);}}else if(t&&aa.type==='file'){var ea=aa.files;for(var fa=0;fa<ea.length;fa++)z('file',aa.name,ea.item(fa));}});if(y&&y.name&&y.type==='submit'&&l.contains(x,y)&&l.isNodeOfType(y,['input','button']))z('submit',y.name,y.value);},createFormData:function(x,y){if(!u)return null;var z=new FormData();if(x)if(l.isNode(x)){w.forEachValue(x,y,function(ca,da,ea){z.append(da,ea);});}else{var aa=v(x);for(var ba in aa)z.append(ba,aa[ba]);}return z;},serialize:function(x,y){var z={};w.forEachValue(x,y,function(aa,ba,ca){if(aa==='file')return;w._serializeHelper(z,ba,ca);});return w._serializeFix(z);},_serializeHelper:function(x,y,z){var aa=Object.prototype.hasOwnProperty,ba=/([^\]]+)\[([^\]]*)\](.*)/.exec(y);if(ba){if(!x[ba[1]]||!aa.call(x,ba[1])){var ca;x[ba[1]]=ca={};if(x[ba[1]]!==ca)return;}var da=0;if(ba[2]===''){while(x[ba[1]][da]!==undefined)da++;}else da=ba[2];if(ba[3]===''){x[ba[1]][da]=z;}else w._serializeHelper(x[ba[1]],da.concat(ba[3]),z);}else x[y]=z;},_serializeFix:function(x){var y=[];for(var z in x){if(x[z] instanceof Object)x[z]=w._serializeFix(x[z]);y.push(z);}if(y.length>0){var aa=0,ba=true;y.sort().forEach(function(da){if(da!=aa++)ba=false;});if(ba){var ca=[];y.forEach(function(da){ca[da]=x[da];});return ca;}}return x;},post:function(x,y,z){var aa=document.createElement('form');aa.action=x.toString();aa.method='POST';aa.style.display='none';if(z)aa.target=z;y.fb_dtsg=n.fb_dtsg;w.createHiddenInputs(y,aa);l.getRootElement().appendChild(aa);aa.submit();return false;},createHiddenInputs:function(x,y,z,aa){z=z||{};var ba=v(x);for(var ca in ba){if(ba[ca]===null)continue;if(z[ca]&&aa){z[ca].value=ba[ca];}else{var da=j.create('input',{type:'hidden',name:ca,value:ba[ca]});z[ca]=da;y.appendChild(da);}}return z;},getFirstElement:function(x,y){y=y||['input[type="text"]','textarea','input[type="password"]','input[type="button"]','input[type="submit"]'];var z=[];for(var aa=0;aa<y.length;aa++){z=l.scry(x,y[aa]);for(var ba=0;ba<z.length;ba++){var ca=z[ba];try{var ea=k.getElementPosition(ca);if(ea.y>0&&ea.x>0)return ca;}catch(da){}}}return null;},focusFirst:function(x){var y=w.getFirstElement(x);if(y){y.focus();return true;}return false;}};e.exports=w;});
__d("legacy:dom-form",["Form"],function(a,b,c,d){a.Form=b('Form');},3);
__d("legacy:dom-html",["HTML"],function(a,b,c,d){a.HTML=b('HTML');},3);
function show(){for(var a=0;a<arguments.length;a++){var b=ge(arguments[a]);if(b&&b.style)b.style.display='';}return false;}function hide(){for(var a=0;a<arguments.length;a++){var b=ge(arguments[a]);if(b&&b.style)b.style.display='none';}return false;}function shown(a){a=ge(a);return (a.style.display!='none'&&!(a.style.display==''&&a.offsetWidth==0));}function toggle(){for(var a=0;a<arguments.length;a++){var b=$(arguments[a]);b.style.display=Style.get(b,"display")=='block'?'none':'block';}return false;}function toggleDisplayNone(){for(var a=0;a<arguments.length;a++){var b=$(arguments[a]);if(shown(b)){hide(b);}else show(b);}return false;}
__d("legacy:event-extensions",["event-extensions"],function(a,b,c,d){b('event-extensions');},3);
__d("OnloadHooks",["Arbiter","ErrorUtils","InitialJSLoader","OnloadEvent"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ErrorUtils'),i=b('InitialJSLoader'),j=b('OnloadEvent');function k(){var r=a.CavalryLogger;if(!window.loaded&&r)r.getInstance().setTimeStamp('t_prehooks');n('onloadhooks');if(!window.loaded&&r)r.getInstance().setTimeStamp('t_hooks');window.loaded=true;g.inform('uipage_onload',true,g.BEHAVIOR_STATE);}function l(){n('onafterloadhooks');window.afterloaded=true;}function m(r,s){return h.applyWithGuard(r,null,null,function(t){t.event_type=s;t.category='runhook';});}function n(r){var s=(r=='onbeforeleavehooks')||(r=='onbeforeunloadhooks');do{var t=window[r];if(!t)break;if(!s)window[r]=null;for(var u=0;u<t.length;u++){var v=m(t[u],r);if(s&&v)return v;}}while(!s&&window[r]);}function o(){if(!window.loaded){window.loaded=true;n('onloadhooks');}if(!window.afterloaded){window.afterloaded=true;n('onafterloadhooks');}}function p(){g.registerCallback(k,[j.ONLOAD_DOMCONTENT_CALLBACK,i.INITIAL_JS_READY]);g.registerCallback(l,[j.ONLOAD_DOMCONTENT_CALLBACK,j.ONLOAD_CALLBACK,i.INITIAL_JS_READY]);g.subscribe(j.ONBEFOREUNLOAD,function(r,s){s.warn=n('onbeforeleavehooks')||n('onbeforeunloadhooks');if(!s.warn){window.loaded=false;window.afterloaded=false;}},g.SUBSCRIBE_NEW);g.subscribe(j.ONUNLOAD,function(r,s){n('onunloadhooks');},g.SUBSCRIBE_NEW);}var q={_onloadHook:k,_onafterloadHook:l,runHook:m,runHooks:n,keepWindowSetAsLoaded:o};p();a.OnloadHooks=e.exports=q;});
__d("legacy:onload-action",["OnloadHooks"],function(a,b,c,d){var e=b('OnloadHooks');a._onloadHook=e._onloadHook;a._onafterloadHook=e._onafterloadHook;a.runHook=e.runHook;a.runHooks=e.runHooks;a.keep_window_set_as_loaded=e.keepWindowSetAsLoaded;},3);
__d("legacy:input-methods",["Input","copyProperties"],function(a,b,c,d){var e=b('Input'),f=b('copyProperties');f(a.Input||(a.Input={}),e);},3);
__d("Vector",["event-extensions","DOMDimensions","DOMPosition","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOMDimensions'),h=b('DOMPosition'),i=b('copyProperties');function j(k,l,m){i(this,{x:parseFloat(k),y:parseFloat(l),domain:m||'pure'});}i(j.prototype,{toString:function(){return '('+this.x+', '+this.y+')';},add:function(k,l){if(arguments.length==1){if(k.domain!='pure')k=k.convertTo(this.domain);return this.add(k.x,k.y);}var m=parseFloat(k),n=parseFloat(l);return new j(this.x+m,this.y+n,this.domain);},mul:function(k,l){if(typeof l=="undefined")l=k;return new j(this.x*k,this.y*l,this.domain);},sub:function(k,l){if(arguments.length==1){return this.add(k.mul(-1));}else return this.add(-k,-l);},distanceTo:function(k){return this.sub(k).magnitude();},magnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y));},convertTo:function(k){if(k!='pure'&&k!='viewport'&&k!='document')return new j(0,0);if(k==this.domain)return new j(this.x,this.y,this.domain);if(k=='pure')return new j(this.x,this.y);if(this.domain=='pure')return new j(0,0);var l=j.getScrollPosition('document'),m=this.x,n=this.y;if(this.domain=='document'){m-=l.x;n-=l.y;}else{m+=l.x;n+=l.y;}return new j(m,n,k);},setElementPosition:function(k){var l=this.convertTo('document');k.style.left=parseInt(l.x)+'px';k.style.top=parseInt(l.y)+'px';return this;},setElementDimensions:function(k){return this.setElementWidth(k).setElementHeight(k);},setElementWidth:function(k){k.style.width=parseInt(this.x,10)+'px';return this;},setElementHeight:function(k){k.style.height=parseInt(this.y,10)+'px';return this;},scrollElementBy:function(k){if(k==document.body){window.scrollBy(this.x,this.y);}else{k.scrollLeft+=this.x;k.scrollTop+=this.y;}return this;}});i(j,{getEventPosition:function(k,l){l=l||'document';var m=Event.getPosition(k),n=new j(m.x,m.y,'document');return n.convertTo(l);},getScrollPosition:function(k){k=k||'document';var l=h.getScrollPosition();return new j(l.x,l.y,'document').convertTo(k);},getElementPosition:function(k,l){l=l||'document';var m=h.getElementPosition(k);return new j(m.x,m.y,'viewport').convertTo(l);},getElementDimensions:function(k){var l=g.getElementDimensions(k);return new j(l.width,l.height);},getViewportDimensions:function(){var k=g.getViewportDimensions();return new j(k.width,k.height,'viewport');},getDocumentDimensions:function(k){var l=g.getDocumentDimensions(k);return new j(l.width,l.height,'document');},deserialize:function(k){var l=k.split(',');return new j(l[0],l[1]);}});e.exports=j;});
__d("legacy:vector",["Vector"],function(a,b,c,d){a.Vector2=b('Vector');},3);
__d("startsWith",[],function(a,b,c,d,e,f){function g(h,i,j){var k=String(h);j=Math.min(Math.max(j||0,0),k.length);return k.lastIndexOf(String(i),j)===j;}e.exports=g;});
__d("AsyncRequestNectarLogging",["AsyncRequest","Env","copyProperties","startsWith"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Env'),i=b('copyProperties'),j=b('startsWith');i(g.prototype,{setNectarModuleData:function(k){if(this.method=='POST'){var l=h.module;if(k&&l===undefined){var m={fbpage_fan_confirm:1},n=null;for(var o=k;o&&o!=document.body;o=o.parentNode){if(!o.id||typeof o.id!=='string')continue;if(j(o.id,'pagelet_')){l=o.id;break;}if(!n&&m[o.id])n=o.id;}if(l===undefined&&n)l=n;}if(l!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._mod=l;}}},setNectarImpressionId:function(){if(this.method=='POST'){var k=h.impid;if(k!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._impid=k;}}}});});
__d("legacy:async-postlude",["AsyncRequestNectarLogging"],function(a,b,c,d){b('AsyncRequestNectarLogging');},3);
__d("legacy:ua",["UserAgent"],function(a,b,c,d){a.ua=b('UserAgent');},3);
__d("Animation",["CSS","DOM","Style","UserAgent"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Style'),j=b('UserAgent');function k(l){if(a==this){return new k(l);}else{this.obj=l;this._reset_state();this.queue=[];this.last_attr=null;}}k.resolution=20;k.offset=0;k.prototype._reset_state=function(){this.state={attrs:{},duration:500};};k.prototype.stop=function(){this._reset_state();this.queue=[];return this;};k.prototype._build_container=function(){if(this.container_div){this._refresh_container();return;}if(this.obj.firstChild&&this.obj.firstChild.__animation_refs){this.container_div=this.obj.firstChild;this.container_div.__animation_refs++;this._refresh_container();return;}var l=document.createElement('div');l.style.padding='0px';l.style.margin='0px';l.style.border='0px';l.__animation_refs=1;var m=this.obj.childNodes;while(m.length)l.appendChild(m[0]);this.obj.appendChild(l);this._orig_overflow=this.obj.style.overflow;this.obj.style.overflow='hidden';this.container_div=l;this._refresh_container();};k.prototype._refresh_container=function(){this.container_div.style.height='auto';this.container_div.style.width='auto';this.container_div.style.height=this.container_div.offsetHeight+'px';this.container_div.style.width=this.container_div.offsetWidth+'px';};k.prototype._destroy_container=function(){if(!this.container_div)return;if(!--this.container_div.__animation_refs){var l=this.container_div.childNodes;while(l.length)this.obj.appendChild(l[0]);this.obj.removeChild(this.container_div);}this.container_div=null;this.obj.style.overflow=this._orig_overflow;};k.ATTR_TO=1;k.ATTR_BY=2;k.ATTR_FROM=3;k.prototype._attr=function(l,m,n){l=l.replace(/-[a-z]/gi,function(p){return p.substring(1).toUpperCase();});var o=false;switch(l){case 'background':this._attr('backgroundColor',m,n);return this;case 'margin':m=k.parse_group(m);this._attr('marginBottom',m[0],n);this._attr('marginLeft',m[1],n);this._attr('marginRight',m[2],n);this._attr('marginTop',m[3],n);return this;case 'padding':m=k.parse_group(m);this._attr('paddingBottom',m[0],n);this._attr('paddingLeft',m[1],n);this._attr('paddingRight',m[2],n);this._attr('paddingTop',m[3],n);return this;case 'backgroundColor':case 'borderColor':case 'color':m=k.parse_color(m);break;case 'opacity':m=parseFloat(m,10);break;case 'height':case 'width':if(m=='auto'){o=true;}else m=parseInt(m,10);break;case 'borderWidth':case 'lineHeight':case 'fontSize':case 'marginBottom':case 'marginLeft':case 'marginRight':case 'marginTop':case 'paddingBottom':case 'paddingLeft':case 'paddingRight':case 'paddingTop':case 'bottom':case 'left':case 'right':case 'top':case 'scrollTop':case 'scrollLeft':m=parseInt(m,10);break;default:throw new Error(l+' is not a supported attribute!');}if(this.state.attrs[l]===undefined)this.state.attrs[l]={};if(o)this.state.attrs[l].auto=true;switch(n){case k.ATTR_FROM:this.state.attrs[l].start=m;break;case k.ATTR_BY:this.state.attrs[l].by=true;case k.ATTR_TO:this.state.attrs[l].value=m;break;}};k._get_box_width=function(l){var m=parseInt(i.get(l,'paddingLeft'),10),n=parseInt(i.get(l,'paddingRight'),10),o=parseInt(i.get(l,'borderLeftWidth'),10),p=parseInt(i.get(l,'borderRightWidth'),10);return l.offsetWidth-(m?m:0)-(n?n:0)-(o?o:0)-(p?p:0);};k._get_box_height=function(l){var m=parseInt(i.get(l,'paddingTop'),10),n=parseInt(i.get(l,'paddingBottom'),10),o=parseInt(i.get(l,'borderTopWidth'),10),p=parseInt(i.get(l,'borderBottomWidth'),10);return l.offsetHeight-(m?m:0)-(n?n:0)-(o?o:0)-(p?p:0);};k.prototype.to=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_TO);}else{this._attr(l,m,k.ATTR_TO);this.last_attr=l;}return this;};k.prototype.by=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_BY);}else{this._attr(l,m,k.ATTR_BY);this.last_attr=l;}return this;};k.prototype.from=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_FROM);}else{this._attr(l,m,k.ATTR_FROM);this.last_attr=l;}return this;};k.prototype.duration=function(l){this.state.duration=l?l:0;return this;};k.prototype.checkpoint=function(l,m){if(l===undefined)l=1;this.state.checkpoint=l;this.queue.push(this.state);this._reset_state();this.state.checkpointcb=m;return this;};k.prototype.blind=function(){this.state.blind=true;return this;};k.prototype.hide=function(){this.state.hide=true;return this;};k.prototype.show=function(){this.state.show=true;return this;};k.prototype.ease=function(l){this.state.ease=l;return this;};k.prototype.go=function(){var l=(new Date()).getTime();this.queue.push(this.state);for(var m=0;m<this.queue.length;m++){this.queue[m].start=l-k.offset;if(this.queue[m].checkpoint)l+=this.queue[m].checkpoint*this.queue[m].duration;}k.push(this);return this;};k.prototype._show=function(){g.show(this.obj);};k.prototype._hide=function(){g.hide(this.obj);};k.prototype._frame=function(l){var m=true,n=false,o=false,p;function q(aa){return document.documentElement[aa]||document.body[aa];}for(var r=0;r<this.queue.length;r++){var s=this.queue[r];if(s.start>l){m=false;continue;}if(s.checkpointcb){this._callback(s.checkpointcb,l-s.start);s.checkpointcb=null;}if(s.started===undefined){if(s.show)this._show();for(var t in s.attrs){if(s.attrs[t].start!==undefined)continue;switch(t){case 'backgroundColor':case 'borderColor':case 'color':p=k.parse_color(i.get(this.obj,t=='borderColor'?'borderLeftColor':t));if(s.attrs[t].by){s.attrs[t].value[0]=Math.min(255,Math.max(0,s.attrs[t].value[0]+p[0]));s.attrs[t].value[1]=Math.min(255,Math.max(0,s.attrs[t].value[1]+p[1]));s.attrs[t].value[2]=Math.min(255,Math.max(0,s.attrs[t].value[2]+p[2]));}break;case 'opacity':p=i.getOpacity(this.obj);if(s.attrs[t].by)s.attrs[t].value=Math.min(1,Math.max(0,s.attrs[t].value+p));break;case 'height':p=k._get_box_height(this.obj);if(s.attrs[t].by)s.attrs[t].value+=p;break;case 'width':p=k._get_box_width(this.obj);if(s.attrs[t].by)s.attrs[t].value+=p;break;case 'scrollLeft':case 'scrollTop':p=(this.obj===document.body)?q(t):this.obj[t];if(s.attrs[t].by)s.attrs[t].value+=p;s['last'+t]=p;break;default:p=parseInt(i.get(this.obj,t),10)||0;if(s.attrs[t].by)s.attrs[t].value+=p;break;}s.attrs[t].start=p;}if((s.attrs.height&&s.attrs.height.auto)||(s.attrs.width&&s.attrs.width.auto)){if(j.firefox()<3)o=true;this._destroy_container();for(var t in {height:1,width:1,fontSize:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,borderBottomWidth:1,paddingLeft:1,paddingRight:1,paddingTop:1,paddingBottom:1})if(s.attrs[t])this.obj.style[t]=s.attrs[t].value+(typeof s.attrs[t].value=='number'?'px':'');if(s.attrs.height&&s.attrs.height.auto)s.attrs.height.value=k._get_box_height(this.obj);if(s.attrs.width&&s.attrs.width.auto)s.attrs.width.value=k._get_box_width(this.obj);}s.started=true;if(s.blind)this._build_container();}var u=(l-s.start)/s.duration;if(u>=1){u=1;if(s.hide)this._hide();}else m=false;var v=s.ease?s.ease(u):u;if(!n&&u!=1&&s.blind)n=true;if(o&&this.obj.parentNode){var w=this.obj.parentNode,x=this.obj.nextSibling;w.removeChild(this.obj);}for(var t in s.attrs)switch(t){case 'backgroundColor':case 'borderColor':case 'color':if(s.attrs[t].start[3]!=s.attrs[t].value[3]){this.obj.style[t]='rgba('+k.calc_tween(v,s.attrs[t].start[0],s.attrs[t].value[0],true)+','+k.calc_tween(v,s.attrs[t].start[1],s.attrs[t].value[1],true)+','+k.calc_tween(v,s.attrs[t].start[2],s.attrs[t].value[2],true)+','+k.calc_tween(v,s.attrs[t].start[3],s.attrs[t].value[3],false)+')';}else this.obj.style[t]='rgb('+k.calc_tween(v,s.attrs[t].start[0],s.attrs[t].value[0],true)+','+k.calc_tween(v,s.attrs[t].start[1],s.attrs[t].value[1],true)+','+k.calc_tween(v,s.attrs[t].start[2],s.attrs[t].value[2],true)+')';break;case 'opacity':i.set(this.obj,'opacity',k.calc_tween(v,s.attrs[t].start,s.attrs[t].value));break;case 'height':case 'width':this.obj.style[t]=v==1&&s.attrs[t].auto?'auto':k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true)+'px';break;case 'scrollLeft':case 'scrollTop':var y=this.obj===document.body;p=y?q(t):this.obj[t];if(s['last'+t]!==p){delete s.attrs[t];}else{var z=k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true);if(!y){z=this.obj[t]=z;}else{if(t=='scrollLeft'){a.scrollTo(z,q('scrollTop'));}else a.scrollTo(q('scrollLeft'),z);z=q(t);}s['last'+t]=z;}break;default:this.obj.style[t]=k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true)+'px';break;}if(u==1){this.queue.splice(r--,1);this._callback(s.ondone,l-s.start-s.duration);}}if(o)w[x?'insertBefore':'appendChild'](this.obj,x);if(!n&&this.container_div)this._destroy_container();return !m;};k.prototype.ondone=function(l){this.state.ondone=l;return this;};k.prototype._callback=function(l,m){if(l){k.offset=m;l.call(this);k.offset=0;}};k.calc_tween=function(l,m,n,o){return (o?parseInt:parseFloat)((n-m)*l+m,10);};k.parse_color=function(l){var m=/^#([a-f0-9]{1,2})([a-f0-9]{1,2})([a-f0-9]{1,2})$/i.exec(l);if(m){return [parseInt(m[1].length==1?m[1]+m[1]:m[1],16),parseInt(m[2].length==1?m[2]+m[2]:m[2],16),parseInt(m[3].length==1?m[3]+m[3]:m[3],16),1];}else{var n=/^rgba? *\(([0-9]+), *([0-9]+), *([0-9]+)(?:, *([0-9]+))?\)$/.exec(l);if(n){return [parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];}else if(l=='transparent'){return [255,255,255,0];}else throw 'Named color attributes are not supported.';}};k.parse_group=function(l){l=l.trim().split(/ +/);if(l.length==4){return l;}else if(l.length==3){return [l[0],l[1],l[2],l[1]];}else if(l.length==2){return [l[0],l[1],l[0],l[1]];}else return [l[0],l[0],l[0],l[0]];};k.push=function(l){if(!k.active)k.active=[];k.active.push(l);if(k.active.length===1){if(!k.requestAnimationFrame){var m=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame;if(m)k.requestAnimationFrame=m.bind(a);}if(k.requestAnimationFrame){k.requestAnimationFrame(k._animate);}else k.timeout=setInterval(k._animate,k.resolution,false);}if(k.requestAnimationFrame)k._updateEndingTimer();k._animate(Date.now(),true);};k._updateEndingTimer=function(){if(!k.requestAnimationFrame)throw new Error('Ending timer only valid with requestAnimationFrame');var l=0;for(var m=0;m<k.active.length;m++){var n=k.active[m];for(var o=0;o<n.queue.length;o++){var p=n.queue[o].start+n.queue[o].duration;if(p>l)l=p;}}if(k.timeout){clearTimeout(k.timeout);delete k.timeout;}var q=Date.now();if(l>q)k.timeout=setTimeout(k._animate.shield(),l-q,false);};k._animate=function(l,m){l=l||Date.now();for(var n=(m===true)?k.active.length-1:0;n<k.active.length;n++)try{if(!k.active[n]._frame(l))k.active.splice(n--,1);}catch(o){k.active.splice(n--,1);}if(k.active.length===0){if(k.timeout){if(k.requestAnimationFrame){clearTimeout(k.timeout);}else clearInterval(k.timeout);delete k.timeout;}}else if(k.requestAnimationFrame)k.requestAnimationFrame(k._animate);};k.ease={};k.ease.begin=function(l){return Math.sin(Math.PI/2*(l-1))+1;};k.ease.end=function(l){return Math.sin(.5*Math.PI*l);};k.ease.both=function(l){return .5*Math.sin(Math.PI*(l-.5))+.5;};k.prependInsert=function(l,m){k.insert(l,m,h.prependContent);};k.appendInsert=function(l,m){k.insert(l,m,h.appendContent);};k.insert=function(l,m,n){i.set(m,'opacity',0);n(l,m);new k(m).from('opacity',0).to('opacity',1).duration(400).go();};e.exports=k;});
__d("legacy:animation",["Animation"],function(a,b,c,d){a.animation=b('Animation');},3);
__d("ScriptPathState",["Arbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h,i,j,k,l=100,m={setIsUIPageletRequest:function(n){j=n;},setUserURISampleRate:function(n){k=n;},reset:function(){h=null;i=false;j=false;},_shouldUpdateScriptPath:function(){return (i&&!j);},_shouldSendURI:function(){return (Math.random()<k);},getParams:function(){var n={};if(m._shouldUpdateScriptPath()){if(m._shouldSendURI()&&h!==null)n.user_uri=h.substring(0,l);}else n.no_script_path=1;return n;}};g.subscribe("pre_page_transition",function(n,o){i=true;h=o.to.getUnqualifiedURI().toString();});e.exports=a.ScriptPathState=m;});
__d("goOrReplace",["URI","UserAgent"],function(a,b,c,d,e,f){var g=b('URI'),h=b('UserAgent');function i(j,k,l){var m=new g(k);if(j.pathname=='/'&&m.getPath()!='/'&&m.isQuicklingEnabled()){var n=j.search?{}:{q:''};m=new g().setPath('/').setQueryData(n).setFragment(m.getUnqualifiedURI()).toString();k=m.toString();}if(l&&!(h.ie()<8)){j.replace(k);}else if(j.href==k){j.reload();}else j.href=k;}e.exports=i;});
__d("AjaxPipeRequest",["Arbiter","AsyncRequest","BigPipe","DOM","Env","JSCC","ScriptPathState","copyProperties","goOrReplace","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('BigPipe'),j=b('DOM'),k=b('Env'),l=b('JSCC'),m=b('ScriptPathState'),n=b('copyProperties'),o=b('goOrReplace'),p=b('ge'),q;function r(u,v){var w=p(u);if(w){if(!v)w.style.minHeight='600px';for(var x in i.pageletIDs)if(u!==x&&j.contains(w,x)){g.inform('ajaxpipe/clear_pagelet',{pagelet_id:x});l.clearForPagelet(x);delete i.pageletIDs[x];}j.empty(w);}}function s(u,v){var w=p(u);if(w)if(!v)w.style.minHeight='100px';}function t(u,v){this._uri=u;this._query_data=v;this._request=new h();this._canvas_id=null;this._allow_cross_page_transition=true;}n(t.prototype,{setCanvasId:function(u){this._canvas_id=u;return this;},setURI:function(u){this._uri=u;return this;},setData:function(u){this._query_data=u;return this;},getData:function(u){return this._query_data;},setAllowCrossPageTransition:function(u){this._allow_cross_page_transition=u;return this;},setAppend:function(u){this._append=u;return this;},send:function(){var u={ajaxpipe:1,ajaxpipe_token:k.ajaxpipe_token};n(u,m.getParams());m.reset();if(this._pageletCacheMiss)u.pcmiss=1;this._request.setOption('useIframeTransport',true).setURI(this._uri).setData(n(u,this._query_data)).setPreBootloadHandler(this._preBootloadHandler.bind(this)).setInitialHandler(this._onInitialResponse.bind(this)).setHandler(this._onResponse.bind(this)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(this._allow_cross_page_transition);if(this._automatic){this._relevantRequest=q;}else q=this._request;this._request.send();return this;},_preBootloadFirstResponse:function(u){return false;},_fireDomContentCallback:function(){this._arbiter.inform('ajaxpipe/domcontent_callback',true,g.BEHAVIOR_STATE);},_fireOnloadCallback:function(){this._arbiter.inform('ajaxpipe/onload_callback',true,g.BEHAVIOR_STATE);},_isRelevant:function(u){return this._request==q||(this._automatic&&this._relevantRequest==q)||this._jsNonBlock||this._forceFinish;},_preBootloadHandler:function(u){var v=u.getPayload();if(!v||v.redirect||!this._isRelevant(u))return false;var w=false;if(u.is_first){!this._append&&!this._displayCallback&&r(this._canvas_id,this._constHeight);this._arbiter=new g();w=this._preBootloadFirstResponse(u);this.pipe=new i({arbiter:this._arbiter,rootNodeID:this._canvas_id,lid:this._request.lid,isAjax:true,domContentCallback:this._fireDomContentCallback.bind(this),onloadCallback:this._fireOnloadCallback.bind(this),domContentEvt:'ajaxpipe/domcontent_callback',onloadEvt:'ajaxpipe/onload_callback',jsNonBlock:this._jsNonBlock,forceFinish:this._forceFinish,automatic:this._automatic,displayCallback:this._displayCallback});}return w;},_redirect:function(u){if(u.redirect){if(u.force||!this.isPageActive(u.redirect)){var v=['ajaxpipe','ajaxpipe_token'].concat(this.getSanitizedParameters());o(window.location,URI(u.redirect).removeQueryData(v),true);}else PageTransitions.go(u.redirect,true);return true;}else return false;},isPageActive:function(u){return true;},getSanitizedParameters:function(){return [];},_versionCheck:function(u){return true;},_onInitialResponse:function(u){var v=u.getPayload();if(!this._isRelevant(u))return false;if(!v)return true;if(this._redirect(v)||!this._versionCheck(v))return false;return true;},_processFirstResponse:function(u){var v=u.getPayload();if(p(this._canvas_id)&&v.canvas_class!==null)CSS.setClass(this._canvas_id,v.canvas_class);},setFirstResponseCallback:function(u){this._firstResponseCallback=u;return this;},setFirstResponseHandler:function(u){this._processFirstResponse=u;return this;},_onResponse:function(u){var v=u.payload;if(!this._isRelevant(u))return h.suppressOnloadToken;if(u.is_first){this._processFirstResponse(u);this._firstResponseCallback&&this._firstResponseCallback();v.provides=v.provides||[];v.provides.push('uipage_onload');if(this._append)v.append=this._canvas_id;}if(v){if('content' in v.content&&this._canvas_id!==null&&this._canvas_id!='content'){v.content[this._canvas_id]=v.content.content;delete v.content.content;}if(this._pageletCacheMiss)if(u.is_first){v.id=this._pageletCacheMiss.id;v.cacheable=true;v.cache_controller=this._pageletCacheMiss.cache_controller;v.cache_type=this._pageletCacheMiss.cache_type;v.key=this._pageletCacheMiss.key;}else v.cache_parent=this._pageletCacheMiss.id;this.pipe.onPageletArrive(v);}if(u.is_last)s(this._canvas_id,this._constHeight);return h.suppressOnloadToken;},setNectarModuleDataSafe:function(u){this._request.setNectarModuleDataSafe(u);return this;},setFinallyHandler:function(u){this._request.setFinallyHandler(u);return this;},setErrorHandler:function(u){this._request.setErrorHandler(u);return this;},abort:function(){this._request.abort();if(q==this._request)q=null;this._request=null;return this;},setJSNonBlock:function(u){this._jsNonBlock=u;return this;},setForceFinish:function(u){this._forceFinish=u;return this;},setAutomatic:function(u){this._automatic=u;return this;},setDisplayCallback:function(u){this._displayCallback=u;return this;},setPageletCacheMiss:function(u){this._pageletCacheMiss=u;return this;},setConstHeight:function(u){this._constHeight=u;return this;},getAsyncRequest:function(){return this._request;}});n(t,{getCurrentRequest:function(){return q;},setCurrentRequest:function(u){q=u;}});e.exports=t;});
__d("Button",["event-extensions","CSS","DataStore","DOM","Parent"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DataStore'),i=b('DOM'),j=b('Parent'),k='uiButtonDisabled',l='uiButtonDepressed',m='button:blocker',n='href',o='ajaxify';function p(t,u){var v=h.get(t,m);if(u){if(v){v.remove();h.remove(t,m);}}else if(!v)h.set(t,m,Event.listen(t,'click',bagof(false),Event.Priority.URGENT));}function q(t){var u=j.byClass(t,'uiButton');if(!u)throw new Error('invalid use case');return u;}function r(t){return i.isNodeOfType(t,'a');}var s={getInputElement:function(t){t=q(t);if(r(t))throw new Error('invalid use case');return i.find(t,'input');},isEnabled:function(t){return !g.hasClass(q(t),k);},setEnabled:function(t,u){t=q(t);g.conditionClass(t,k,!u);if(r(t)){var v=t.href,w=t.getAttribute('ajaxify'),x=h.get(t,n,'#'),y=h.get(t,o);if(u){if(!v)t.href=x;if(!w&&y)t.setAttribute('ajaxify',y);}else{if(v&&v!==x)h.set(t,n,v);if(w&&w!==y)h.set(t,o,w);t.removeAttribute('href');t.removeAttribute('ajaxify');}p(t,u);}else{var z=s.getInputElement(t);z.disabled=!u;p(z,u);}},setDepressed:function(t,u){g.conditionClass(q(t),l,u);},isDepressed:function(t){return g.hasClass(q(t),l);},setLabel:function(t,u){t=q(t);if(r(t)){var v=i.find(t,'span.uiButtonText');i.setContent(v,u);}else s.getInputElement(t).value=u;g.conditionClass(t,'uiButtonNoText',!u);},setIcon:function(t,u){if(u&&!i.isNode(u))return;t=q(t);var v=i.scry(t,'.img')[0];if(!u){v&&i.remove(v);return;}g.addClass(u,'customimg');if(v!=u)if(v){i.replace(v,u);}else i.prependContent(t,u);}};e.exports=s;});
__d("CSSSupport",[],function(a,b,c,d,e,f){var g={supportsBorderRadius:function(){var h=['KhtmlBorderRadius','OBorderRadius','MozBorderRadius','WebkitBorderRadius','msBorderRadius','borderRadius'],i=false,j=document.createElement('div');for(var k=h.length;k>=0;k--)if(i=j.style[h[k]]!==undefined)break;g.supportsBorderRadius=bagof(i);return i;}};e.exports=g;});
__d("Locale",["Style"],function(a,b,c,d,e,f){var g=b('Style'),h,i={isRTL:function(){if(h===undefined)h=('rtl'===g.get(document.body,'direction'));return h;}};e.exports=i;});
__d("getOverlayZIndex",["Style"],function(a,b,c,d,e,f){var g=b('Style');function h(i,j){j=j||document.body;var k=[];while(i&&i!==j){k.push(i);i=i.parentNode;}if(i!==j)return 0;for(var l=k.length-1;l>=0;l--){var m=k[l];if(g.get(m,'position')!='static'){var n=parseInt(g.get(m,'z-index'),10);if(!isNaN(n))return n;}}return 0;}e.exports=h;});
__d("Dialog",["array-extensions","event-extensions","AjaxPipeRequest","Animation","Arbiter","AsyncRequest","Bootloader","Button","CSS","CSSSupport","DOM","Form","HTML","Input","Keys","Locale","Parent","Run","Style","URI","UserAgent","Vector","bind","copyProperties","createArrayFrom","getObjectValues","getOverlayZIndex","tx"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('AjaxPipeRequest'),h=b('Animation'),i=b('Arbiter'),j=b('AsyncRequest'),k=b('Bootloader'),l=b('Button'),m=b('CSS'),n=b('CSSSupport'),o=b('DOM'),p=b('Form'),q=b('HTML'),r=b('Input'),s=b('Keys'),t=b('Locale'),u=b('Parent'),v=b('Run'),w=b('Style'),x=b('URI'),y=b('UserAgent'),z=b('Vector'),aa=b('bind'),ba=b('copyProperties'),ca=b('createArrayFrom'),da=b('getObjectValues'),ea=b('getOverlayZIndex'),fa=b('tx'),ga=function(){var ia=document.body,ja=document.createElement('div'),ka=document.createElement('div');ia.insertBefore(ja,ia.firstChild);ia.insertBefore(ka,ia.firstChild);ja.style.position='fixed';ja.style.top='20px';var la=ja.offsetTop!==ka.offsetTop;ia.removeChild(ja);ia.removeChild(ka);ga=bagof(la);return la;};function ha(ia){this._show_loading=true;this._auto_focus=true;this._submit_on_enter=false;this._fade_enabled=true;this._onload_handlers=[];this._top=125;this._uniqueID='dialog_'+ha._globalCount++;this._content=null;this._obj=null;this._popup=null;this._overlay=null;this._shim=null;this._causal_elem=null;this._previous_focus=null;this._buttons=[];this._buildDialog();if(ia)this._setFromModel(ia);ha._init();}ba(ha,{OK:{name:'ok',label:"Okay"},CANCEL:{name:'cancel',label:"Cancel",className:'inputaux'},CLOSE:{name:'close',label:"Close"},NEXT:{name:'next',label:"Next"},SAVE:{name:'save',label:"Save"},SUBMIT:{name:'submit',label:"Submit"},CONFIRM:{name:'confirm',label:"Confirm"},DELETE:{name:'delete',label:"Delete"},_globalCount:0,_bottoms:[0],max_bottom:0,_updateMaxBottom:function(){ha.max_bottom=Math.max.apply(Math,ha._bottoms);}});ba(ha,{OK_AND_CANCEL:[ha.OK,ha.CANCEL],_STANDARD_BUTTONS:[ha.OK,ha.CANCEL,ha.CLOSE,ha.SAVE,ha.SUBMIT,ha.CONFIRM,ha.DELETE],SIZE:{WIDE:555,STANDARD:445},_HALO_WIDTH:10,_BORDER_WIDTH:1,_PADDING_WIDTH:10,_PAGE_MARGIN:40,_stack:[],_isUsingCSSBorders:function(){return n.supportsBorderRadius()||y.ie()<7;},newButton:function(ia,ja,ka,la){var ma={name:ia,label:ja};if(ka)ma.className=ka;if(la)ma.handler=la;return ma;},getCurrent:function(){var ia=ha._stack;return ia.length?ia[ia.length-1]:null;},hideCurrent:function(){var ia=ha.getCurrent();ia&&ia.hide();},bootstrap:function(ia,ja,ka,la,ma,na){ja=ja||{};ba(ja,new x(ia).getQueryData());la=la||(ka?'GET':'POST');var oa=u.byClass(na,'stat_elem')||na;if(oa&&m.hasClass(oa,'async_saving'))return false;var pa=new j().setReadOnly(!!ka).setMethod(la).setRelativeTo(na).setStatusElement(oa).setURI(ia).setNectarModuleDataSafe(na).setData(ja),qa=new ha(ma).setCausalElement(na).setAsync(pa);qa.show();return false;},showFromModel:function(ia,ja){var ka=new ha(ia).setCausalElement(ja).show();if(ia.hiding)ka.hide();},_init:function(){this._init=bagofholding;v.onLeave(ha._tearDown.shield(null,false));i.subscribe('page_transition',ha._tearDown.shield(null,true));Event.listen(document.documentElement,'keydown',function(event){if(Event.getKeyCode(event)==s.ESC&&!event.getModifiers().any){if(ha._escape())event.kill();}else if(Event.getKeyCode(event)==s.RETURN&&!event.getModifiers().any)if(ha._enter())event.kill();});Event.listen(window,'resize',function(event){var ia=ha.getCurrent();ia&&ia._resetDialogObj();});},_findButton:function(ia,ja){if(ia)for(var ka=0;ka<ia.length;++ka)if(ia[ka].name==ja)return ia[ka];return null;},_tearDown:function(ia){var ja=ha._stack.slice();for(var ka=ja.length-1;ka>=0;ka--)if((ia&&!ja[ka]._cross_transition)||(!ia&&!ja[ka]._cross_quickling))ja[ka].hide();},_escape:function(){var ia=ha.getCurrent();if(!ia)return false;var ja=ia._semi_modal,ka=ia._buttons;if(!ka.length&&!ja)return false;if(ja&&!ka.length){ia.hide();return true;}var la,ma=ha._findButton(ka,'cancel');if(ia._cancelHandler){ia.cancel();return true;}else if(ma){la=ma;}else if(ka.length==1){la=ka[0];}else return false;ia._handleButton(la);return true;},_enter:function(){var ia=ha.getCurrent();if(!ia||!ia._submit_on_enter)return false;if(document.activeElement!=ia._frame)return false;var ja=ia._buttons;if(!ja)return false;ia._handleButton(ja[0]);return true;},call_or_eval:function(ia,ja,ka){if(!ja)return undefined;ka=ka||{};if(typeof ja=='string'){var la=Object.keys(ka).join(', ');ja=(eval)('({f: function('+la+') { '+ja+'}})').f;}return ja.apply(ia,da(ka));}});ba(ha.prototype,{_cross_quickling:false,_cross_transition:false,_loading:false,_showing:false,show:function(){this._showing=true;if(this._async_request){if(this._show_loading)this.showLoading();}else this._update();return this;},showLoading:function(){this._loading=true;m.addClass(this._frame,'dialog_loading_shown');this._renderDialog();return this;},hide:function(){if(!this._showing&&!this._loading)return this;this._showing=false;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}if(this._fade_enabled&&ha._stack.length<=1){this._fadeOut();}else this._hide();return this;},cancel:function(){if(!this._cancelHandler||this._cancelHandler()!==false)this.hide();},getRoot:function(){return this._obj;},getBody:function(){return o.scry(this._obj,'div.dialog_body')[0];},getButtonElement:function(ia){if(typeof ia=='string')ia=ha._findButton(this._buttons,ia);if(!ia||!ia.name)return null;var ja=o.scry(this._popup,'input'),ka=function(la){return la.name==ia.name;};return ja.filter(ka)[0]||null;},getContentNode:function(){return o.find(this._content,'div.dialog_content');},getFormData:function(){return p.serialize(this.getContentNode());},setAllowCrossPageTransition:function(ia){this._cross_transition=ia;return this;},setAllowCrossQuicklingNavigation:function(ia){this._cross_quickling=ia;return this;},setShowing:function(){this.show();return this;},setHiding:function(){this.hide();return this;},setTitle:function(ia){var ja=this._nodes.title,ka=this._nodes.title_inner,la=this._nodes.content;o.setContent(ka,this._format(ia||''));m.conditionShow(ja,!!ia);m.conditionClass(la,'dialog_content_titleless',!ia);return this;},setBody:function(ia){o.setContent(this._nodes.body,this._format(ia));return this;},setExtraData:function(ia){this._extra_data=ia;return this;},setReturnData:function(ia){this._return_data=ia;return this;},setShowLoading:function(ia){this._show_loading=ia;return this;},setFullBleed:function(ia){this._full_bleed=ia;this._updateWidth();m.conditionClass(this._obj,'full_bleed',ia);return this;},setCausalElement:function(ia){this._causal_elem=ia;return this;},setUserData:function(ia){this._user_data=ia;return this;},getUserData:function(){return this._user_data;},setAutohide:function(ia){if(ia){if(this._showing){this._autohide_timeout=setTimeout(this.hide.shield(this),ia);}else this._autohide=ia;}else{this._autohide=null;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}}return this;},setSummary:function(ia){var ja=this._nodes.summary;o.setContent(ja,this._format(ia||''));m.conditionShow(ja,!!ia);return this;},setButtons:function(ia){var ja,ka;if(!(ia instanceof Array)){ja=ca(arguments);}else ja=ia;for(var la=0;la<ja.length;++la)if(typeof ja[la]=='string'){ka=ha._findButton(ha._STANDARD_BUTTONS,ja[la]);ja[la]=ka;}this._buttons=ja;var ma=[];if(ja&&ja.length>0)for(var na=0;na<ja.length;na++){ka=ja[na];var oa=o.create('input',{type:'button',name:ka.name||'',value:ka.label}),pa=o.create('label',{className:'uiButton uiButtonLarge uiButtonConfirm'},oa);if(ka.className){ka.className.split(/\s+/).forEach(function(ra){m.addClass(pa,ra);});if(m.hasClass(pa,'inputaux')){m.removeClass(pa,'inputaux');m.removeClass(pa,'uiButtonConfirm');}if(m.hasClass(pa,'uiButtonSpecial'))m.removeClass(pa,'uiButtonConfirm');}if(ka.icon)o.prependContent(pa,o.create('img',{src:ka.icon,className:'img mrs'}));if(ka.disabled)l.setEnabled(pa,false);Event.listen(oa,'click',this._handleButton.bind(this,ka.name));for(var qa in ka)if(qa.indexOf('data-')===0&&qa.length>5)oa.setAttribute(qa,ka[qa]);ma.push(pa);}o.setContent(this._nodes.buttons,ma);this._updateButtonVisibility();return this;},setButtonsMessage:function(ia){o.setContent(this._nodes.button_message,this._format(ia||''));this._has_button_message=!!ia;this._updateButtonVisibility();return this;},_updateButtonVisibility:function(){var ia=this._buttons.length>0||this._has_button_message;m.conditionShow(this._nodes.button_wrapper,ia);m.conditionClass(this._obj,'omitDialogFooter',!ia);},setClickButtonOnEnter:function(ia,ja){this._clickOnEnterTarget=ia;if(!this._clickOnEnterListener)this._clickOnEnterListener=Event.listen(this._nodes.body,'keypress',function(event){var ka=event.getTarget();if(ka&&ka.id===this._clickOnEnterTarget)if(Event.getKeyCode(event)==s.RETURN){this._handleButton(ja);event.kill();}return true;}.bind(this));return this;},setStackable:function(ia,ja){this._is_stackable=ia;this._shown_while_stacked=ia&&ja;return this;},setHandler:function(ia){this._handler=ia;return this;},setCancelHandler:function(ia){this._cancelHandler=ha.call_or_eval.bind(null,this,ia);return this;},setCloseHandler:function(ia){this._close_handler=ha.call_or_eval.bind(null,this,ia);return this;},clearHandler:function(){return this.setHandler(null);},setPostURI:function(ia,ja){if(ja===undefined)ja=true;if(ja){this.setHandler(this._submitForm.bind(this,'POST',ia));}else this.setHandler(function(){p.post(ia,this.getFormData());this.hide();}.bind(this));return this;},setGetURI:function(ia){this.setHandler(this._submitForm.bind(this,'GET',ia));return this;},setModal:function(ia){this._modal=ia;m.conditionClass(this._obj,'generic_dialog_modal',ia);return this;},setSemiModal:function(ia){if(ia){this.setModal(true);this._semiModalListener=Event.listen(this._obj,'click',function(ja){if(!o.contains(this._popup,ja.getTarget()))this.hide();}.bind(this));}else this._semiModalListener&&this._semiModalListener.remove();this._semi_modal=ia;return this;},setWideDialog:function(ia){this._wide_dialog=ia;this._updateWidth();return this;},setContentWidth:function(ia){this._content_width=ia;this._updateWidth();return this;},setTitleLoading:function(ia){if(ia===undefined)ia=true;var ja=o.find(this._popup,'h2.dialog_title');if(ja)m.conditionClass(ja,'loading',ia);return this;},setSecure:function(ia){m.conditionClass(this._nodes.title,'secure',ia);return this;},setClassName:function(ia){ia.split(/\s+/).forEach(m.addClass.bind(m,this._obj));return this;},setFadeEnabled:function(ia){this._fade_enabled=ia;return this;},setFooter:function(ia){var ja=this._nodes.footer;o.setContent(ja,this._format(ia||''));m.conditionShow(ja,!!ia);return this;},setAutoFocus:function(ia){this._auto_focus=ia;return this;},setTop:function(ia){this._top=ia;this._resetDialogObj();return this;},onloadRegister:function(ia){ca(ia).forEach(function(ja){if(typeof ja=='string')ja=new Function(ja);this._onload_handlers.push(ja.bind(this));}.bind(this));return this;},setAsyncURL:function(ia){return this.setAsync(new j(ia));},setAsync:function(ia){var ja=function(ra){if(this._async_request!=ia)return;this._async_request=null;var sa=ra.getPayload(),ta=sa;if(this._loading)this._showing=true;if(typeof ta=='string'){this.setBody(ta);}else this._setFromModel(ta);this._update();}.bind(this),ka=ia.getData();ka.__d=1;ia.setData(ka);var la=ia.getHandler()||bagofholding;ia.setHandler(function(ra){la(ra);ja(ra);});var ma=ia,na=ma.getErrorHandler()||bagofholding,oa=ma.getTransportErrorHandler()||bagofholding,pa=function(){this._async_request=null;this._loading=false;if(this._showing&&this._shown_while_stacked){this._update();}else this._hide(this._is_stackable);}.bind(this),qa=ma.getServerDialogCancelHandler()||pa;ma.setAllowCrossPageTransition(this._cross_transition).setErrorHandler(function(ra){pa();na(ra);}).setTransportErrorHandler(function(ra){pa();oa(ra);}).setServerDialogCancelHandler(qa);ia.send();this._async_request=ia;if(this._showing)this.show();return this;},_format:function(ia){if(typeof ia=='string'){ia=q(ia);}else ia=q.replaceJSONWrapper(ia);if(ia instanceof q)ia.setDeferred(true);return ia;},_update:function(){if(!this._showing)return;if(this._autohide&&!this._async_request&&!this._autohide_timeout)this._autohide_timeout=setTimeout(aa(this,'hide'),this._autohide);m.removeClass(this._frame,'dialog_loading_shown');this._loading=false;this._renderDialog();this._runOnloads();this._previous_focus=document.activeElement;r.focus(this._frame);},_runOnloads:function(){for(var ia=0;ia<this._onload_handlers.length;++ia)try{this._onload_handlers[ia]();}catch(ja){}this._onload_handlers=[];},_updateWidth:function(){var ia=2*ha._BORDER_WIDTH;if(ha._isUsingCSSBorders())ia+=2*ha._HALO_WIDTH;if(this._content_width){ia+=this._content_width;if(!this._full_bleed)ia+=2*ha._PADDING_WIDTH;}else if(this._wide_dialog){ia+=ha.SIZE.WIDE;}else ia+=ha.SIZE.STANDARD;this._popup.style.width=ia+'px';},_updateZIndex:function(){if(!this._hasSetZIndex&&this._causal_elem){var ia=ea(this._causal_elem);this._hasSetZIndex=ia>(this._modal?400:200);w.set(this._obj,'z-index',this._hasSetZIndex?ia:'');}},_renderDialog:function(){this._updateZIndex();this._pushOntoStack();this._obj.style.height=(this._modal&&y.ie()<7)?z.getDocumentDimensions().y+'px':null;if(this._obj&&this._obj.style.display){this._obj.style.visibility='hidden';this._obj.style.display='';this.resetDialogPosition();this._obj.style.visibility='';this._obj.dialog=this;}else this.resetDialogPosition();clearInterval(this.active_hiding);this.active_hiding=setInterval(this._activeResize.bind(this),500);this._submit_on_enter=false;if(this._auto_focus){var ia=p.getFirstElement(this._content,['input[type="text"]','textarea','input[type="password"]']);if(ia){p.focusFirst.bind(this,this._content).defer();}else this._submit_on_enter=true;}var ja=z.getElementDimensions(this._content).y+z.getElementPosition(this._content).y;ha._bottoms.push(ja);this._bottom=ja;ha._updateMaxBottom();return this;},_buildDialog:function(){this._obj=o.create('div',{className:'generic_dialog',id:this._uniqueID});this._obj.style.display='none';o.appendContent(document.body,this._obj);if(!this._popup)this._popup=o.create('div',{className:'generic_dialog_popup'});this._obj.appendChild(this._popup);if(y.ie()<7&&!this._shim)k.loadModules(['IframeShim'],function(ua){this._shim=new ua(this._popup);});m.addClass(this._obj,'pop_dialog');if(t.isRTL())m.addClass(this._obj,'pop_dialog_rtl');var ia;if(ha._isUsingCSSBorders()){ia='<div class="pop_container_advanced">'+'<div class="pop_content" id="pop_content"></div>'+'</div>';}else ia='<div class="pop_container">'+'<div class="pop_verticalslab"></div>'+'<div class="pop_horizontalslab"></div>'+'<div class="pop_topleft"></div>'+'<div class="pop_topright"></div>'+'<div class="pop_bottomright"></div>'+'<div class="pop_bottomleft"></div>'+'<div class="pop_content pop_content_old" id="pop_content"></div>'+'</div>';o.setContent(this._popup,q(ia));var ja=o.find(this._popup,'div.pop_content');ja.setAttribute('tabIndex','0');ja.setAttribute('role','alertdialog');this._frame=this._content=ja;var ka=o.create('div',{className:'dialog_loading'},"Loading..."),la=o.create('span'),ma=o.create('h2',{className:'dialog_title hidden_elem',id:'title_'+this._uniqueID},la),na=o.create('div',{className:'dialog_summary hidden_elem'}),oa=o.create('div',{className:'dialog_body'}),pa=o.create('div'),qa=o.create('div',{className:'dialog_buttons_msg'}),ra=o.create('div',{className:'dialog_buttons clearfix hidden_elem'},[qa,pa]),sa=o.create('div',{className:'dialog_footer hidden_elem'}),ta=o.create('div',{className:'dialog_content'},[na,oa,ra,sa]);this._nodes={summary:na,body:oa,buttons:pa,button_message:qa,button_wrapper:ra,footer:sa,content:ta,title:ma,title_inner:la};o.setContent(this._frame,[ma,ta,ka]);},_updateShim:function(){return this._shim&&this._shim.show();},_activeResize:function(){if(this.last_offset_height!=this._content.offsetHeight){this.last_offset_height=this._content.offsetHeight;this.resetDialogPosition();}},resetDialogPosition:function(){if(!this._popup)return;this._resetDialogObj();this._updateShim();},_resetDialogObj:function(){var ia=2*ha._PAGE_MARGIN,ja=z.getViewportDimensions(),ka=ja.x-ia,la=ja.y-ia,ma=2*ha._HALO_WIDTH,na=z.getElementDimensions(this._content),oa=na.x+ma,pa=na.y+ma,qa=this._top,ra=ka-oa,sa=la-pa;if(sa<0){qa=ha._PAGE_MARGIN;}else if(qa>sa)qa=ha._PAGE_MARGIN+(Math.max(sa,0)/2);var ta=ga();if(!ta)qa+=z.getScrollPosition().y;w.set(this._popup,'marginTop',qa+'px');var ua=ta&&(ra<0||sa<0);m.conditionClass(this._obj,'generic_dialog_fixed_overflow',ua);m.conditionClass(document.documentElement,'generic_dialog_overflow_mode',ua);},_fadeOut:function(ia){if(!this._popup)return;try{new h(this._obj).duration(0).checkpoint().to('opacity',0).hide().duration(250).ondone(this._hide.bind(this,ia)).go();}catch(ja){this._hide(ia);}},_hide:function(ia){if(this._obj)this._obj.style.display='none';m.removeClass(document.documentElement,'generic_dialog_overflow_mode');this._updateShim();clearInterval(this.active_hiding);if(this._bottom){var ja=ha._bottoms;ja.splice(ja.indexOf(this._bottom),1);ha._updateMaxBottom();}if(this._previous_focus&&document.activeElement&&o.contains(this._obj,document.activeElement))r.focus(this._previous_focus);if(ia)return;this.destroy();},destroy:function(){this._popFromStack();if(this._obj){o.remove(this._obj);this._obj=null;this._shim&&this._shim.hide();this._shim=null;}this._clickOnEnterListener&&this._clickOnEnterListener.remove();if(this._close_handler)this._close_handler({return_data:this._return_data});},_handleButton:function(ia){if(typeof ia=='string')ia=ha._findButton(this._buttons,ia);var ja=ha.call_or_eval(ia,ia.handler);if(ja===false)return;if(ia.name=='cancel'){this.cancel();}else if(ha.call_or_eval(this,this._handler,{button:ia})!==false)this.hide();},_submitForm:function(ia,ja,ka){var la=this.getFormData();if(ka)la[ka.name]=ka.label;if(this._extra_data)ba(la,this._extra_data);var ma=new j().setURI(ja).setData(la).setMethod(ia).setNectarModuleDataSafe(this._causal_elem).setReadOnly(ia=='GET');this.setAsync(ma);return false;},_setFromModel:function(ia){var ja={};ba(ja,ia);for(var ka in ja){if(ka=='onloadRegister'){this.onloadRegister(ja[ka]);continue;}var la=this['set'+ka.substr(0,1).toUpperCase()+ka.substr(1)];la.apply(this,ca(ja[ka]));}},_updateBottom:function(){var ia=z.getElementDimensions(this._content).y+z.getElementPosition(this._content).y;ha._bottoms[ha._bottoms.length-1]=ia;ha._updateMaxBottom();},_pushOntoStack:function(){var ia=ha._stack;if(!ia.length)i.inform('layer_shown',{type:'Dialog'});ia.remove(this);ia.push(this);for(var ja=ia.length-2;ja>=0;ja--){var ka=ia[ja];if(!ka._is_stackable&&!ka._async_request){ka._hide();}else if(!ka._shown_while_stacked)ka._hide(true);}},_popFromStack:function(){var ia=ha._stack,ja=(ia[ia.length-1]===this);ia.remove(this);if(ia.length){if(ja)ia[ia.length-1].show();}else i.inform('layer_hidden',{type:'Dialog'});}});e.exports=ha;});
__d("legacy:dialog",["Dialog"],function(a,b,c,d){var e=b('Dialog');a.Dialog=e;},3);
__d("legacy:array-utils",["createArrayFrom","hasArrayNature"],function(a,b,c,d){a.$A=b('createArrayFrom');a.hasArrayNature=b('hasArrayNature');},3);
__d("legacy:env",["Env"],function(a,b,c,d){var e=b('Env');a.Env=e;},3);
__d("throttle",[],function(a,b,c,d,e,f){function g(h,i,j,k){if(i==null)i=100;var l,m,n,o,p,q,r,s,t=0,u=Math.min(i,100);function v(){r&&h.call(j,l,m,n,o,p);r=false;}return function w(x,y,z,aa,ba){r=true;l=x;m=y;n=z;o=aa;p=ba;q=Date.now();var ca=s?i:u;if(q-t-i>ca){s=null;v();}if(!s){t=q;s=setTimeout(function(){s=null;v();},i,!k);}};}e.exports=g;});
__d("deferUntil",[],function(a,b,c,d,e,f){function g(h,i,j,k,l){var m=i();if(m){h(m);return null;}var n=Date.now(),o=setInterval(function(){m=i();if(!m){if(!j||(j<new Date()-n))return;l&&l();}clearInterval(o);h(m);},20,k);return o;}e.exports=g;});
__d("legacy:function-utils",["debounce","throttle","deferUntil"],function(a,b,c,d){a.debounce=b('debounce');a.throttle=b('throttle');a.defer_until=b('deferUntil');},3);
__d("computeRelativeURI",["URI","isEmpty"],function(a,b,c,d,e,f){var g=b('URI'),h=b('isEmpty');function i(k,l){if(!l)return k;if(l.charAt(0)=='/')return l;var m=k.split('/').slice(0,-1);m[0]!=='';l.split('/').forEach(function(n){if(!(n=='.'))if(n=='..'){if(m.length>1)m=m.slice(0,-1);}else m.push(n);});return m.join('/');}function j(k,l){var m=new g(),n=l;k=new g(k);l=new g(l);if(l.getDomain()&&!l.isFacebookURI())return n;var o=k,p=['Protocol','Domain','Port','Path','QueryData','Fragment'];p.forEach(function(q){var r=q=='Path'&&o===k;if(r)m.setPath(i(k.getPath(),l.getPath()));if(!h(l['get'+q]()))o=l;if(!r)m['set'+q](o['get'+q]());});return m;}e.exports=j;});
__d("HistoryManager",["event-extensions","function-extensions","Cookie","Env","URI","UserAgent","copyProperties","goOrReplace"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Cookie'),h=b('Env'),i=b('URI'),j=b('UserAgent'),k=b('copyProperties'),l=b('goOrReplace'),m={_IFRAME_BASE_URI:'http://static.ak.facebook.com/common/history_manager.php',history:null,current:0,fragment:null,_setIframeSrcFragment:function(n){n=n.toString();var o=m.history.length-1;m.iframe.src=m._IFRAME_BASE_URI+'?|index='+o+'#'+encodeURIComponent(n);return m;},getIframeSrcFragment:function(){return decodeURIComponent(i(m.iframe.contentWindow.document.location.href).getFragment());},nextframe:function(n,o){if(o){m._setIframeSrcFragment(n);return;}if(n!==undefined){m.iframeQueue.push(n);}else{m.iframeQueue.splice(0,1);m.iframeTimeout=null;m.checkURI();}if(m.iframeQueue.length&&!m.iframeTimeout){var p=m.iframeQueue[0];m.iframeTimeout=setTimeout(function(){m._setIframeSrcFragment(p);},100,false);}},isInitialized:function(){return !!m._initialized;},init:function(){if(!h.ALLOW_TRANSITION_IN_IFRAME&&window!=window.top)return;if(m._initialized)return m;var n=i(),o=n.getFragment()||'';if(o.charAt(0)==='!'){o=o.substr(1);n.setFragment(o);}if(i.getRequestURI(false).getProtocol().toLowerCase()=='https')m._IFRAME_BASE_URI='https://s-static.ak.facebook.com/common/history_manager.php';k(m,{_initialized:true,fragment:o,orig_fragment:o,history:[n],callbacks:[],lastChanged:Date.now(),canonical:i('#'),fragmentTimeout:null,user:0,iframeTimeout:null,iframeQueue:[],enabled:true,debug:bagofholding});if(window.history&&history.pushState){this.lastURI=document.URL;window.history.replaceState(this.lastURI,null);Event.listen(window,'popstate',function(p){if(p&&p.state&&m.lastURI!=p.state){m.lastURI=p.state;m.lastChanged=Date.now();m.notify(i(p.state).getUnqualifiedURI().toString());}}.bind(m));if(j.safari()<534||j.chrome()<=13){setInterval(m.checkURI,42,false);m._updateRefererURI(this.lastURI);}return m;}m._updateRefererURI(i.getRequestURI(false));if(j.safari()<500||j.firefox()<2){m.enabled=false;return m;}if(j.ie()<8){m.iframe=document.createElement('iframe');k(m.iframe.style,{width:'0',height:'0',frameborder:'0',left:'0',top:'0',position:'absolute'});m._setIframeSrcFragment(o);document.body.insertBefore(m.iframe,document.body.firstChild);}else if('onhashchange' in window){Event.listen(window,'hashchange',function(){m.checkURI.bind(m).defer();});}else setInterval(m.checkURI,42,false);return m;},registerURIHandler:function(n){m.callbacks.push(n);return m;},setCanonicalLocation:function(n){m.canonical=i(n);return m;},notify:function(n){if(n==m.orig_fragment)n=m.canonical.getFragment();for(var o=0;o<m.callbacks.length;o++)try{if(m.callbacks[o](n))return true;}catch(p){}return false;},checkURI:function(){if(Date.now()-m.lastChanged<400)return;if(window.history&&history.pushState){var n=i(document.URL).removeQueryData('ref').toString(),o=i(m.lastURI).removeQueryData('ref').toString();if(n!=o){m.lastChanged=Date.now();m.lastURI=n;if(j.safari()<534)m._updateRefererURI(n);m.notify(i(n).getUnqualifiedURI().toString());}return;}if(j.ie()<8&&m.iframeQueue.length)return;if(j.safari()&&window.history.length==200){if(!m.warned)m.warned=true;return;}var p=i().getFragment();if(p.charAt(0)=='!')p=p.substr(1);if(j.ie()<8)p=m.getIframeSrcFragment();p=p.replace(/%23/g,'#');if(p!=m.fragment.replace(/%23/g,'#')){m.debug([p,' vs ',m.fragment,'whl: ',window.history.length,'QHL: ',m.history.length].join(' '));for(var q=m.history.length-1;q>=0;--q)if(m.history[q].getFragment().replace(/%23/g,'#')==p)break;++m.user;if(q>=0){m.go(q-m.current);}else m.go('#'+p);--m.user;}},_updateRefererURI:function(n){n=n.toString();if(n.charAt(0)!='/'&&n.indexOf('//')==-1)return;var o=new i(window.location);if(o.isFacebookURI()){var p=o.getPath()+window.location.search;}else var p='';var q=i(n).getQualifiedURI().setFragment(p).toString(),r=2048;if(q.length>r)q=q.substring(0,r)+'...';g.set('x-referer',q);},go:function(n,o,p){if(window.history&&history.pushState){o||typeof(n)=='number';var q=i(n).removeQueryData('ref').toString();m.lastChanged=Date.now();this.lastURI=q;if(p){window.history.replaceState(n,null,q);}else window.history.pushState(n,null,q);if(j.safari()<534)m._updateRefererURI(n);return false;}m.debug('go: '+n);if(o===undefined)o=true;if(!m.enabled)if(!o)return false;if(typeof(n)=='number'){if(!n)return false;var r=n+m.current,s=Math.max(0,Math.min(m.history.length-1,r));m.current=s;r=m.history[s].getFragment()||m.orig_fragment;r=i(r).removeQueryData('ref').getUnqualifiedURI().toString();m.fragment=r;m.lastChanged=Date.now();if(j.ie()<8){if(m.fragmentTimeout)clearTimeout(m.fragmentTimeout);m._temporary_fragment=r;m.fragmentTimeout=setTimeout(function(){window.location.hash='#!'+r;delete m._temporary_fragment;},750,false);if(!m.user)m.nextframe(r,p);}else if(!m.user)l(window.location,window.location.href.split('#')[0]+'#!'+r,p);if(o)m.notify(r);m._updateRefererURI(r);return false;}n=i(n);if(n.getDomain()==i().getDomain())n=i('#'+n.getUnqualifiedURI());var t=m.history[m.current].getFragment(),u=n.getFragment();if(u==t||(t==m.orig_fragment&&u==m.canonical.getFragment())){if(o)m.notify(u);m._updateRefererURI(u);return false;}if(p)m.current--;var v=(m.history.length-m.current)-1;m.history.splice(m.current+1,v);m.history.push(i(n));return m.go(1,o,p);},getCurrentFragment:function(){var n=m._temporary_fragment!==undefined?m._temporary_fragment:i.getRequestURI(false).getFragment();return n==m.orig_fragment?m.canonical.getFragment():n;}};e.exports=m;});
__d("ViewportBounds",["Style","ge"],function(a,b,c,d,e,f){var g=b('Style'),h=b('ge'),i={top:[],right:[],bottom:[],left:[]};function j(n){return function(){var o=0;i[n].forEach(function(p){o=Math.max(o,p.getSize());});return o;};}function k(n){return function(o){return new l(n,o);};}function l(n,o){this.getSide=bagof(n);this.getSize=function(){return typeof o==='function'?o():o;};i[n].push(this);}l.prototype.remove=function(){i[this.getSide()].remove(this);};var m={getTop:j('top'),getRight:j('right'),getBottom:j('bottom'),getLeft:j('left'),addTop:k('top'),addRight:k('right'),addBottom:k('bottom'),addLeft:k('left')};m.addTop(function(){var n=h('blueBar');if(n&&g.isFixed(n))return h('blueBarHolder').offsetHeight;return 0;});e.exports=m;});
__d("DOMScroll",["Animation","Arbiter","DOM","DOMQuery","UserAgent","Vector","ViewportBounds","ge"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('DOM'),j=b('DOMQuery'),k=b('UserAgent'),l=b('Vector'),m=b('ViewportBounds'),n=b('ge'),o={SCROLL:'dom-scroll',getScrollState:function(){var p=l.getViewportDimensions(),q=l.getDocumentDimensions(),r=(q.x>p.x),s=(q.y>p.y);r+=0;s+=0;return new l(r,s);},_scrollbarSize:null,_initScrollbarSize:function(){var p=i.create('p');p.style.width='100%';p.style.height='200px';var q=i.create('div');q.style.position='absolute';q.style.top='0px';q.style.left='0px';q.style.visibility='hidden';q.style.width='200px';q.style.height='150px';q.style.overflow='hidden';q.appendChild(p);document.body.appendChild(q);var r=p.offsetWidth;q.style.overflow='scroll';var s=p.offsetWidth;if(r==s)s=q.clientWidth;document.body.removeChild(q);o._scrollbarSize=r-s;},getScrollbarSize:function(){if(o._scrollbarSize===null)o._initScrollbarSize();return o._scrollbarSize;},scrollTo:function(p,q,r,s,t){if(typeof q=='undefined'||q===true)q=750;if(k.osx()===10.8&&k.safari()===536.25&&!k.chrome())q=false;if(!(p instanceof l)){var u=l.getScrollPosition().x,v=l.getElementPosition(n(p)).y;p=new l(u,v,'document');if(!s)p.y-=m.getTop()/(r?2:1);}if(r){p.y-=l.getViewportDimensions().y/2;}else if(s){p.y-=l.getViewportDimensions().y;p.y+=s;}p=p.convertTo('document');if(q){return new g(document.body).to('scrollTop',p.y).to('scrollLeft',p.x).ease(g.ease.end).duration(q).ondone(t).go();}else if(window.scrollTo){window.scrollTo(p.x,p.y);t&&t();}h.inform(o.SCROLL);},ensureVisible:function(p,q,r,s,t){if(r===undefined)r=10;p=n(p);if(q)p=j.find(p,q);var u=l.getScrollPosition().x,v=l.getScrollPosition().y,w=v+l.getViewportDimensions().y,x=l.getElementPosition(p).y,y=x+l.getElementDimensions(p).y;x-=m.getTop();x-=r;y+=r;if(x<v){o.scrollTo(new l(u,x,'document'),s,false,false,t);}else if(y>w)if(x-(y-w)<v){o.scrollTo(new l(u,x,'document'),s,false,false,t);}else o.scrollTo(new l(u,y,'document'),s,false,true,t);},scrollToTop:function(p){var q=l.getScrollPosition();o.scrollTo(new l(q.x,0,'document'),p!==false);}};e.exports=o;});
__d("LinkController",["event-extensions","DataStore","Parent","trackReferrer"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DataStore'),h=b('Parent'),i=b('trackReferrer'),j='LinkControllerHandler',k=[],l=[];function m(event){var q=h.byTag(event.getTarget(),'a'),r=q&&q.getAttribute('href',2);if(!r||q.rel||!o(r)||g.get(q,j))return;var s=Event.listen(q,'click',function(t){if(r.charAt(r.length-1)=='#'){t.prevent();return;}i(q,r);n(q,t);});g.set(q,j,s);}function n(q,event){if(q.target||event.getModifiers().any||(event.which&&event.which!=1))return;var r=k.concat(l);for(var s=0,t=r.length;s<t;s++)if(r[s](q,event)===false)return event.prevent();}function o(q){var r=q.match(/^(\w+):/);return !r||r[1].match(/^http/i);}var p={registerHandler:function(q){k.push(q);},registerFallbackHandler:function(q){l.push(q);}};Event.listen(document.documentElement,'mousedown',m);Event.listen(document.documentElement,'keydown',m);e.exports=p;});
__d("escapeJSQuotes",[],function(a,b,c,d,e,f){function g(h){if(typeof h=='undefined'||h==null||!h.valueOf())return '';return h.toString().replace(/\\/g,'\\\\').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/"/g,'\\x22').replace(/'/g,'\\\'').replace(/</g,'\\x3c').replace(/>/g,'\\x3e').replace(/&/g,'\\x26');}e.exports=g;});
__d("PageTransitions",["event-extensions","Arbiter","Dialog","DOM","DOMScroll","Env","Form","HistoryManager","JSLogger","LinkController","OnloadHooks","htmlize","escapeJSQuotes","URI","UserAgent","Vector","areObjectsEqual","clickRefAction","computeRelativeURI","copyProperties","ge","goOrReplace","startsWith","tx","userAction"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('Dialog'),i=b('DOM'),j=b('DOMScroll'),k=b('Env'),l=b('Form'),m=b('HistoryManager'),n=b('JSLogger'),o=b('LinkController'),p=b('OnloadHooks'),q=b('htmlize'),r=b('escapeJSQuotes'),s=b('URI'),t=b('UserAgent'),u=b('Vector'),v=b('areObjectsEqual'),w=b('clickRefAction'),x=b('computeRelativeURI'),y=b('copyProperties'),z=b('ge'),aa=b('goOrReplace'),ba=b('startsWith'),ca=b('tx'),da=b('userAction'),ea={};function fa(ka,la){ea[ka.getUnqualifiedURI()]=la;}function ga(ka){return ea[ka.getUnqualifiedURI()];}function ha(ka){delete ea[ka.getUnqualifiedURI()];}var ia={_transition_handlers:[],_scroll_locked:false,isInitialized:function(){return !!ia._initialized;},_init:function(){if(!k.ALLOW_TRANSITION_IN_IFRAME&&window!=window.top)return;if(ia._initialized)return ia;ia._initialized=true;var ka=s.getRequestURI(false),la=ka.getUnqualifiedURI(),ma=s(la).setFragment(null),na=la.getFragment();if(na.charAt(0)==='!'&&ma.toString()===na.substr(1))la=ma;y(ia,{_current_uri:la,_most_recent_uri:la,_next_uri:la});var oa;if(ba(ka.getFragment(),'/')){oa=ka.getFragment();}else oa=la;m.init().setCanonicalLocation('#'+oa).registerURIHandler(ia._historyManagerHandler);o.registerFallbackHandler(ia._rewriteHref);o.registerFallbackHandler(ia._onlinkclick);Event.listen(document.documentElement,'submit',ia._onformsubmit);Event.listen(window,'scroll',function(){if(!ia._scroll_locked)fa(ia._current_uri,u.getScrollPosition());});return ia;},registerHandler:function(ka,la){ia._init();la=la||5;if(!ia._transition_handlers[la])ia._transition_handlers[la]=[];ia._transition_handlers[la].push(ka);},getCurrentURI:function(ka){if(!ia._current_uri&&!ka)return new s(ia._most_recent_uri);return new s(ia._current_uri);},getMostRecentURI:function(){return new s(ia._most_recent_uri);},getNextURI:function(){return new s(ia._next_uri);},_rewriteHref:function(ka){var la=ka.getAttribute('href'),ma=x(ia._most_recent_uri.getQualifiedURI(),la).toString();if(la!=ma)ka.setAttribute('href',ma);},_onlinkclick:function(ka){ja.lookBusy(ka);ia.go(ka.getAttribute('href'));return false;},_onformsubmit:function(event){var ka=event.getTarget();if(l.getAttribute(ka,'rel')||l.getAttribute(ka,'target'))return;w('form',ka,event).set_namespace('page_transition');var la=da('page_transitions',ka,event,{mode:'DEDUP'}).uai_fallback(null,'form'),ma=a.ArbiterMonitor;if(ma)ma.initUA(la,[ka]);var na=new s(l.getAttribute(ka,'action')||''),oa=x(ia._most_recent_uri,na);ka.setAttribute('action',oa.toString());if((l.getAttribute(ka,'method')||'GET').toUpperCase()==='GET'){ia.go(oa.addQueryData(l.serialize(ka)));event.kill();}},go:function(ka,la){var ma=new s(ka).removeQueryData('quickling').getQualifiedURI();n.create('pagetransition').debug('go',{uri:ma.toString()});ha(ma);!la&&w('uri',{href:ma.toString()},null,'INDIRECT');ja.lookBusy();ia._loadPage(ma,function(na){if(na){m.go(ma.toString(),false,la);}else aa(window.location,ma,la);});},_historyManagerHandler:function(ka){if(ka.charAt(0)!='/')return false;w('h',{href:ka});da('page_transitions').uai(null,'history_manager');ia._loadPage(new s(ka),function(la){if(!la)aa(window.location,ka,true);});return true;},_loadPage:function(ka,la){if(s(ka).getFragment()&&v(s(ka).setFragment(null).getQualifiedURI(),s(ia._current_uri).setFragment(null).getQualifiedURI())){ia._current_uri=ia._most_recent_uri=ka;ia.restoreScrollPosition();ja.stopLookingBusy();return;}var ma;if(ia._current_uri)ma=ga(ia._current_uri);ia._current_uri=null;ia._next_uri=ka;if(ma)j.scrollTo(ma,false);var na=function(){ia._scroll_locked=true;var pa=ia._handleTransition(ka);la&&la(pa);},oa=p.runHooks('onbeforeleavehooks');if(oa){ja.stopLookingBusy();ia._warnBeforeLeaving(oa,na);}else na();},_handleTransition:function(ka){window.onbeforeleavehooks=undefined;ja.lookBusy();if(!ka.isSameOrigin())return false;var la=window.AsyncRequest&&window.AsyncRequest.getLastID();g.inform("pre_page_transition",{from:ia.getMostRecentURI(),to:ka});for(var ma=ia._transition_handlers.length-1;ma>=0;--ma){var na=ia._transition_handlers[ma];if(!na)continue;for(var oa=na.length-1;oa>=0;--oa)if(na[oa](ka)===true){var pa={sender:this,uri:ka,id:la};try{g.inform("page_transition",pa);}catch(qa){}return true;}else na.splice(oa,1);}return false;},unifyURI:function(){ia._current_uri=ia._most_recent_uri=ia._next_uri;},transitionComplete:function(ka){ia._executeCompletionCallback();ja.stopLookingBusy();ia.unifyURI();if(!ka)ia.restoreScrollPosition();try{if(document.activeElement&&document.activeElement.nodeName==='A')document.activeElement.blur();}catch(la){}},_executeCompletionCallback:function(){if(ia._completionCallback)ia._completionCallback();ia._completionCallback=null;},setCompletionCallback:function(ka){ia._completionCallback=ka;},rewriteCurrentURI:function(ka,la){ia.registerHandler(function(){if(ka==ia.getMostRecentURI().getUnqualifiedURI().toString()){ia.transitionComplete();return true;}});ia.go(la,true);},_warnBeforeLeaving:function(ka,la){new h().setTitle("Are you sure you want to leave this page?").setBody(q(ka)).setButtons([{name:'leave_page',label:"Leave this Page",handler:la},{name:'continue_editing',label:"Stay on this Page",className:'inputaux'}]).setModal(true).show();},restoreScrollPosition:function(){ia._scroll_locked=false;var ka=ia._current_uri,la=ga(ka);if(la){j.scrollTo(la,false);return;}function ma(pa){if(!pa)return null;var qa="a[name='"+r(pa)+"']";return i.scry(document.body,qa)[0]||z(pa);}var na=ma(s(ka).getFragment());if(na){var oa=u.getElementPosition(na);oa.x=0;j.scrollTo(oa);}}},ja=window._BusyUIManager||{_looking_busy:false,_original_cursors:[],lookBusy:function(ka){if(ka)ja._giveProgressCursor(ka);if(ja._looking_busy)return;ja._looking_busy=true;ja._giveProgressCursor(document.documentElement);},stopLookingBusy:function(){if(!ja._looking_busy)return;ja._looking_busy=false;while(ja._original_cursors.length){var ka=ja._original_cursors.pop(),la=ka[0],ma=ka[1];if(la.style)la.style.cursor=ma||'';}},_giveProgressCursor:function(ka){if(!t.safari()){ja._original_cursors.push([ka,ka.style.cursor]);ka.style.cursor='progress';}}};e.exports=ia;});
__d("legacy:page-transitions",["computeRelativeURI","HistoryManager","PageTransitions"],function(a,b,c,d){a.computeRelativeURI=b('computeRelativeURI');a.HistoryManager=a.HistoryManager||b('HistoryManager');a.PageTransitions=a.PageTransitions||b('PageTransitions');},3);
__d("FlipDirectionOnKeypress",["event-extensions","DOM","Input","Style"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOM'),h=b('Input'),i=b('Style');Event.listen(document.documentElement,'keyup',function(event){var j=event.getTarget();if(!g.isNodeOfType(j,['input','textarea']))return;if(g.isNodeOfType(j,'input')&&j.type=='password')return;if(j.getAttribute('data-prevent-auto-flip'))return;var k=h.getValue(j),l=(j.style&&j.style.direction);if(!l){var m=0,n=true;for(var o=0;o<k.length;o++){var p=k.charCodeAt(o);if(p>=48){if(n){n=false;m++;}if(p>=1470&&p<=1920){i.set(j,'direction','rtl');return;}if(m==5){i.set(j,'direction','ltr');return;}}else n=true;}}else if(k.length===0)i.set(j,'direction','');});});
__d("PlaceholderOnsubmitFormListener",["event-extensions","Input"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Input');Event.listen(document.documentElement,'submit',function(h){var i=h.getTarget().getElementsByTagName('*');for(var j=0;j<i.length;j++)if(i[j].getAttribute('placeholder')&&g.isEmpty(i[j]))g.setValue(i[j],'');});});
__d("BehaviorsMixin",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(l){this._behavior=l;this._enabled=false;}g(h.prototype,{enable:function(){if(!this._enabled){this._enabled=true;this._behavior.enable();}},disable:function(){if(this._enabled){this._enabled=false;this._behavior.disable();}}});var i=1;function j(l){if(!l.__BEHAVIOR_ID)l.__BEHAVIOR_ID=i++;return l.__BEHAVIOR_ID;}var k={enableBehavior:function(l){if(!this._behaviors)this._behaviors={};var m=j(l);if(!this._behaviors[m])this._behaviors[m]=new h(new l(this));this._behaviors[m].enable();return this;},disableBehavior:function(l){if(this._behaviors){var m=j(l);if(this._behaviors[m])this._behaviors[m].disable();}return this;},enableBehaviors:function(l){l.forEach(this.enableBehavior.bind(this));return this;},destroyBehaviors:function(){if(this._behaviors){for(var l in this._behaviors)this._behaviors[l].disable();this._behaviors={};}}};e.exports=k;});
__d("DocumentTitle",["Arbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=document.title,i=null,j=1500,k=[],l=0,m=null,n=false;function o(){if(k.length>0){if(!n){p(k[l].title);l=++l%k.length;}else q();}else{clearInterval(m);m=null;q();}}function p(s){document.title=s;n=true;}function q(){r.set(i||h,true);n=false;}var r={get:function(){return h;},set:function(s,t){document.title=s;if(!t){h=s;i=null;g.inform('update_title',s);}else i=s;},blink:function(s){var t={title:s};k.push(t);if(m===null)m=setInterval(o,j);return {stop:function(){var u=k.indexOf(t);if(u>=0){k.splice(u,1);if(l>u){l--;}else if(l==u&&l==k.length)l=0;}}};}};e.exports=r;});
__d("JSONPTransport",["DOM","HTML","URI","copyProperties"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('HTML'),i=b('URI'),j=b('copyProperties'),k={},l=2,m='jsonp',n='iframe';function o(p,q,r){this._type=p;this._uri=q;this._handler=r;k[this.getID()]=this;}j(o,{respond:function(p,q,r){var s=k[p];if(s){if(!r)delete k[p];if(s._type==n)q=JSON.parse(JSON.stringify(q));a.async_callback(s.handleResponse.bind(s),'json')(q);}else if(a.logJSError&&!r)a.logJSError('ajax',{error:'UnexpectedJsonResponse',extra:{id:p,uri:(q.payload&&q.payload.uri)||''}});}});j(o.prototype,{getID:function(){return this._id||(this._id=l++);},hasFinished:function(){return !(this.getID() in k);},getRequestURI:function(){return i(this._uri).addQueryData({__a:1,__adt:this.getID()});},createTransportFrame:function(){var p='transport_frame_'+this.getID(),q=h('<iframe class="hidden_elem" name="'+p+'" src="javascript:void(0)" />');return g.appendContent(document.body,q)[0];},send:function(){if(this._type===m){(function(){g.appendContent(document.body,g.create('script',{src:this.getRequestURI().toString(),type:'text/javascript'}));}).bind(this).defer();}else{this._iframe=this.createTransportFrame();this._iframe.src=this.getRequestURI().toString();}},handleResponse:function(p){if(!this._aborted)this._handler(p);if(this.hasFinished())if(this._iframe){g.remove.curry(this._iframe).defer();this._iframe=null;}},abort:function(){this._aborted=true;}});e.exports=o;});
__d("PixelRatio",["Arbiter","Cookie","Run"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Cookie'),i=b('Run'),j='dpr',k,l;function m(){return window.devicePixelRatio||1;}function n(){h.set(j,m());}function o(){h.clear(j);}function p(){var r=m();if(r!==k){n();}else o();}var q={startDetecting:function(r){k=r||1;o();if(l)return;l=[g.subscribe('pre_page_transition',p)];i.onBeforeUnload(p);}};e.exports=q;});
__d("PostLoadJS",["Bootloader","Run"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('Run');function i(k,l){h.onAfterLoad(function(){g.loadModules.call(g,[k],l);});}var j={loadAndRequire:function(k){i(k,bagofholding);},loadAndCall:function(k,l,m){i(k,function(n){n[l].apply(n,m);});}};e.exports=j;});
__d("InputSelection",["DOM","Input"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('Input'),i={get:function(j){if(!document.selection)return {start:j.selectionStart,end:j.selectionEnd};var k=document.selection.createRange();if(k.parentElement()!==j)return {start:0,end:0};var l=j.value.length;if(g.isNodeOfType(j,'input')){return {start:-k.moveStart('character',-l),end:-k.moveEnd('character',-l)};}else{var m=k.duplicate();m.moveToElementText(j);m.setEndPoint('StartToEnd',k);var n=l-m.text.length;m.setEndPoint('StartToStart',k);return {start:l-m.text.length,end:n};}},set:function(j,k,l){if(typeof l=='undefined')l=k;if(document.selection){if(j.tagName=='TEXTAREA'){var m=(j.value.slice(0,k).match(/\r/g)||[]).length,n=(j.value.slice(k,l).match(/\r/g)||[]).length;k-=m;l-=m+n;}var o=j.createTextRange();o.collapse(true);o.moveStart('character',k);o.moveEnd('character',l-k);o.select();}else{j.selectionStart=k;j.selectionEnd=Math.min(l,j.value.length);h.focus(j);}}};e.exports=i;});
__d("throttleAcrossTransitions",["throttle"],function(a,b,c,d,e,f){var g=b('throttle');function h(i,j,k){return g(i,j,k,true);}e.exports=h;});
__d("UserActionHistory",["Arbiter","ClickRefUtils","throttleAcrossTransitions"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ClickRefUtils'),i=b('throttleAcrossTransitions'),j={click:1,submit:1},k=false,l={log:[],len:0},m=i(function(){try{k._ua_log=JSON.stringify(l);}catch(p){k=false;}},1000);function n(){try{if(a.sessionStorage){k=a.sessionStorage;k._ua_log&&(l=JSON.parse(k._ua_log));}}catch(p){k=false;}l.log[l.len%10]={ts:Date.now(),path:'-',index:l.len,type:'init',iref:'-'};l.len++;g.subscribe("UserAction/new",function(q,r){var s=r.ua,t=r.node,event=r.event;if(!event||!(event.type in j))return;var u={path:window._script_path,type:event.type,ts:s._ue_ts,iref:h.get_intern_ref(t)||'-',index:l.len};l.log[l.len++%10]=u;k&&m();});}function o(){return l.log.sort(function(p,q){return (q.ts!=p.ts)?(q.ts-p.ts):(q.index-p.index);});}n();e.exports={getHistory:o};});
__d("UserActivity",["event-extensions","Arbiter","ClickRefUtils","collectDataAttributes"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ClickRefUtils'),i=b('collectDataAttributes'),j=5000,k=500,l=Date.now(),m=l,n={subscribeOnce:function(p){var q=n.subscribe(function(){n.unsubscribe(q);p();});},subscribe:function(p){return g.subscribe('useractivity/activity',p);},unsubscribe:function(p){p.unsubscribe();},isActive:function(p){return (new Date()-l<(p||n.DEFAULT_IDLE_MS));},getLastInformTime:function(){return m;}};function o(event){l=Date.now();var p=l-m;if(p>k){m=l;g.inform('useractivity/activity',{event:event,idleness:p});}}Event.listen(window,'scroll',o);Event.listen(document.documentElement,{DOMMouseScroll:o,mousewheel:o,keydown:o,mouseover:o,click:o});e.exports=n;});
__d("enforceMaxLength",["event-extensions","function-extensions","DOM","Input","InputSelection"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('DOM'),h=b('Input'),i=b('InputSelection'),j=function(m,n){var o=h.getValue(m),p=o.length,q=p-n;if(q>0){var r,s;try{r=i.get(m);s=r.end;}catch(t){r=null;s=0;}if(s>=q)p=s;var u=p-q;if(u&&(o.charCodeAt(u-1)&64512)===55296)u--;s=Math.min(s,u);h.setValue(m,o.slice(0,u)+o.slice(p));if(r)i.set(m,Math.min(r.start,s),s);}},k=function(event){var m=event.getTarget(),n=m.getAttribute&&parseInt(m.getAttribute('maxlength'),10);if(n>0&&g.isNodeOfType(m,['input','textarea']))j.bind(null,m,n).defer();},l='maxLength' in g.create('input')&&'maxLength' in g.create('textarea');if(!l)Event.listen(document.documentElement,{keydown:k,paste:k});e.exports=j;});
__d("setTimeoutAcrossTransitions",[],function(a,b,c,d,e,f){function g(h,i){return setTimeout(h,i,false);}e.exports=g;});
__d("submitForm",["DOM"],function(a,b,c,d,e,f){var g=b('DOM'),h=function(i){var j=g.scry(i,'input[type="submit"]')[0];if(j){j.click();}else{j=g.create('input',{type:'submit',className:'hidden_elem'});g.appendContent(i,j);j.click();g.remove(j);}};e.exports=h;});
function FutureSideNav(){FutureSideNav.instance&&FutureSideNav.instance.uninstall();FutureSideNav.instance=this;}FutureSideNav.instance=null;FutureSideNav.getInstance=function(){return FutureSideNav.instance||new FutureSideNav();};copyProperties(FutureSideNav.prototype,{init:function(a,b,c){this.root=a;this.items={};this.sections={};this.editor=null;this.editing=false;this.selected=null;this.loading=null;this.keyParam='sk';this.defaultKey=b;this.uri=URI.getRequestURI();this.ajaxPipe=c;this.ajaxPipeEndpoints={};this.sidecol=true;this._installed=true;this._handlePageTransitions=true;PageTransitions.registerHandler(function(d){return this._handlePageTransitions&&this.handlePageTransition(d);}.bind(this));this._eventHandlers=[];this._arbiterSubscriptions=[Arbiter.subscribe(NavigationMessage.NAVIGATION_COMPLETED,this.navigationComplete.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_FAILED,this.navigationFailed.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_COUNT_UPDATE,this.navigationCountUpdate.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_SELECT,this.navigationSelect.bind(this)),Arbiter.subscribe(ChannelConstants.getArbiterType('nav_update_counts'),this.navigationCountUpdateFromPresence.bind(this))];this._explicitHover=[];this._ensureHover('sideNavItem');this._eventHandlers.push(Event.listen(window,'resize',this._handleResize.bind(this)));this._checkNarrow();this._selectorSubscriptions=[];window.Selector&&this._selectorSubscriptions.push(Selector.subscribe(['open','close'],function(d,e){var f=Parent.byClass(e.selector,'sideNavItem');f&&CSS.conditionClass(f,'editMenuOpened',d==='open');}));onleaveRegister(this.uninstall.bind(this));if(this._pendingSections)this._pendingSections.forEach(function(d){this.initSection.apply(this,d);}.bind(this));},_handleResize:(function(){var a;return function(){a&&clearTimeout(a);a=this._checkNarrow.bind(this).defer(200);};})(),_checkNarrow:function(){CSS.conditionClass(this.root,'uiNarrowSideNav',Vector2.getElementPosition(this.root).x<20);},_ensureHover:function(a){if(ua.ie()<8)Bootloader.loadComponents('explicit-hover',function(){this._explicitHover.push(new ExplicitHover(this.root,a));}.bind(this));},uninstall:function(){if(this._installed){this._installed=false;this._handlePageTransitions=false;this._arbiterSubscriptions.forEach(Arbiter.unsubscribe);this._selectorSubscriptions.forEach(function(a){Selector.unsubscribe(a);});this._eventHandlers.forEach(function(a){a.remove();});this._explicitHover.forEach(function(a){a.uninstall();});}},initSection:function(a,b){if(!this._installed){this._pendingSections=this._pendingSections||[];this._pendingSections.push(arguments);return;}this._initItems(b);this._initSection(a);},addItem:function(a,b){this._initItem(a,b);},_initItems:function(a){var b=function(c,d){var e=this._initItem(c,d);if(c.children)c.children.forEach(function(f){b(f,e);});}.bind(this);$A(a).forEach(function(c){b(c,null);});},_initItem:function(a,b){var c=this.items[a.id]=this._constructItem(a,b);if(c.equals(this.selected)||a.selected)this.setSelected(c);var d=c.getLinkNode();d&&this._eventHandlers.push(Event.listen(d,'click',function(event){return !this.editing;}.bind(this)));return c;},_initSection:function(a){var b=this.sections[a.id]=this._constructSection(a);this._eventHandlers.push(Event.listen(b.node,'click',this.handleSectionClick.bind(this,b)));DOM.scry(b.node,'div.bookmarksMenuButton').forEach(CSS.show);return b;},_constructItem:function(a,b){return new FutureSideNavItem(a,b);},_constructSection:function(a){return new FutureSideNavSection(a);},handleSectionClick:function(a,event){var b=this._getEventTarget(event,'a'),c=this._getItemForNode(b);if(!b){return;}else if(CSS.hasClass(b.parentNode,'uiMenuItem')){this._handleMenuClick(a,c,b.parentNode,event);}else this._handleLinkClick(a,b,event);},_getEventTarget:function(event,a){var b=event.getTarget();if(b.tagName!==a.toUpperCase()){return Parent.byTag(b,a);}else return b;},_handleMenuClick:function(a,b,c,event){if(CSS.hasClass(c,'rearrange'))this.beginEdit(a);},_handleLinkClick:function(a,b,event){if(CSS.hasClass(b,'navEditDone')){this.editing?this.endEdit():this.beginEdit(a);event.kill();}},getItem:function(a){if(this._isCurrentPath(a)){return this._getItemForKey(this._getKey(a.getQueryData())||this.defaultKey);}else return this._getItemForPath(a.getPath());},getNodeForKey:function(a){var b=this._getItemForKey(a);if(b)return b.node;},_isCurrentPath:function(a){return a.getDomain()===this.uri.getDomain()&&a.getPath()===this.uri.getPath();},_getKey:function(a){return a[this.keyParam];},_getItemForNode:function(a){a=Parent.byClass(a,'sideNavItem');return a&&this.items[a.id];},_getItemForKey:function(a){return this._findItem(function(b){return b.matchKey(a);});},_getItemForPath:function(a){return this._findItem(function(b){return b.matchPath(a);});},_findItem:function(a){for(var b in this.items)if(a(this.items[b]))return this.items[b];},removeItem:function(a){if(a&&this.items[a.id]){DOM.remove(a.node);delete this.items[a.id];}},removeItemByKey:function(a){this.removeItem(this._getItemForKey(a));},moveItem:function(a,b,c){var d=DOM.find(a.node,'ul.uiSideNav');(c?DOM.prependContent:DOM.appendContent)(d,b.node);},setLoading:function(a){this.loading&&this.loading.hideLoading();this.loading=a;this.loading&&this.loading.showLoading();},setSelected:function(a){this.setLoading(null);if(this.selected){this.selected.hideSelected();this.selected.getTop().hideChildren();}this.selected=a;if(this.selected){this.selected.showSelected();this.selected.getTop().showChildren();}},handlePageTransition:function(a){var b=this.getItem(a),c=b&&b.endpoint&&this._doPageTransition(b,a);return c;},_doPageTransition:function(a,b){this.setLoading(a);this._sendPageTransition(a.endpoint,copyProperties(this._getTransitionData(a,b),b.getQueryData()));return true;},_sendPageTransition:function(a,b){b.endpoint=a;Arbiter.inform(NavigationMessage.NAVIGATION_BEGIN,{useAjaxPipe:this._useAjaxPipe(a),params:b});},_getTransitionData:function(a,b){var c={};c.sidecol=this.sidecol;c.path=b.getPath();c[this.keyParam]=a.textKey;c.key=a.textKey;return c;},_useAjaxPipe:function(a){return this.ajaxPipe||this.ajaxPipeEndpoints[a];},navigationComplete:function(){this.loading&&this.setSelected(this.loading);},navigationFailed:function(){this.setLoading(null);},navigationSelect:function(a,b){var c=this._getItemForKey(this._getKey(b));if(b.asLoading){this.setLoading(c);}else this.setSelected(c);},navigationCountUpdate:function(a,b){var c=this._getItemForKey(b&&b.key);if(c)if(typeof b.count!=="undefined"){c.setCount(b.count,b.hide);}else if(typeof b.increment!=="undefined")c.incrementCount(b.increment,b.hide);},navigationCountUpdateFromPresence:function(a,b){b=b.obj;if(b)if(!b.class_name||b.class_name&&CSS.hasClass(this.root,b.class_name))if(b.items)for(var c=0;c<b.items.length;c++)this.navigationCountUpdate(a,b.items[c]);},beginEdit:function(a){if(!this.editing){this.editing=true;CSS.addClass(this.root,'editMode');this._updateTrackingData();Bootloader.loadComponents('sortable-side-nav-js',this._initEditor.bind(this,a));}},endEdit:function(){if(this.editing){CSS.removeClass(this.root,'editMode');this.editor.endEdit();this.editor=null;this.editing=false;this._updateTrackingData();}},_updateTrackingData:function(a){var b=this.root.getAttribute('data-gt')||"{}";try{b=JSON.parse(b);if(this.editing){b.editing=true;}else delete b.editing;this.root.setAttribute('data-gt',JSON.stringify(b));}catch(c){}},_initEditor:function(a){this.editor=a.getEditor();this.editor.beginEdit();}});function FutureSideNavSection(a){this.id=a.id;this.node=this.node||$(a.id);this.editEndpoint=a.editEndpoint;}copyProperties(FutureSideNavSection.prototype,{equals:function(a){return a&&a.id===this.id;},getEditor:function(){return new SortableSideNav(DOM.find(this.node,'ul.uiSideNav'),this.editEndpoint);}});function FutureSideNavItem(a,b){this.id=a.id;this.up=b;this.endpoint=a.endpoint;this.type=a.type;this.node=a.node||$(a.id);this.paths=a.path?$A(a.path):[];this.keys=a.key?$A(a.key):[];var c=this._findKeys(this.keys);this.numericKey=c.numeric||this.keys[0];this.textKey=c.text||this.keys[0];this._pathPattern=this._buildRegex(this.paths);this._keyPattern=this._buildRegex(this.keys);this.hideLoading();this.hideSelected();}copyProperties(FutureSideNavItem.prototype,{equals:function(a){return a&&a.id===this.id;},getLinkNode:function(){return (DOM.scry(this.node,'a.item')[0]||DOM.scry(this.node,'a.subitem')[0]);},matchPath:function(a){return this._matchInput(this._pathPattern,a);},matchKey:function(a){return this._matchInput(this._keyPattern,a);},_matchInput:function(a,b){var c=a&&a.exec(b);return c&&c.slice(1);},getTop:function(){return this.isTop()?this:this.up.getTop();},isTop:function(a){return !this.up;},setCount:function(a,b){return this._updateCount(a,true);},incrementCount:function(a,b){return this._updateCount(a,false);},_updateCount:function(a,b,c){var d=DOM.scry(this.node,'span.count')[0],e=d&&DOM.scry(d,'span.countValue')[0];if(e){var f=b?0:parseInt(DOM.getText(e),10),g=Math.max(0,f+a),h=this.isTop()?'hidden':'hiddenSubitem';DOM.setContent(e,g);c&&CSS.conditionClass(this.node,h,!g);CSS.conditionClass(d,'hidden_elem',!g);if(this.isTop()){var i=DOM.scry(this.node,'div.linkWrap')[0];if(i){CSS.conditionClass(i,'noCount',!g);CSS.conditionClass(i,'hasCount',g);}}}Arbiter.inform('NavigationMessage.COUNT_UPDATE_DONE');},showLoading:function(){CSS.addClass(this.node,'loading');},hideLoading:function(){CSS.removeClass(this.node,'loading');},showSelected:function(){CSS.addClass(this.node,'selectedItem');CSS.hasClass(this.node,'hider')&&CSS.addClass(this._getExpanderParent(),'expandedMode');},hideSelected:function(){CSS.removeClass(this.node,'selectedItem');},showChildren:function(){CSS.addClass(this.node,'open');},hideChildren:function(){CSS.removeClass(this.node,'open');},_getExpanderParent:function(){return Parent.byClass(this.node,'expandableSideNav');},_buildRegex:function(a){if(a.length){var b=a.map(function(c){if(typeof c==="string"){return c.replace(/([^a-z0-9_])/ig,'\\$1');}else if(c&&c.regex)return c.regex;});return new RegExp('^(?:'+b.join('|')+')$');}},_findKeys:function(a){var b=/^(app|group|fl)_/,c={};for(var d=0;d<a.length;d++){var e=b.test(a[d]);if(e&&!c.numeric){c.numeric=a[d];}else if(!e&&!c.text)c.text=a[d];if(c.numeric&&c.text)break;}return c;}});
__d("TinyViewport",["event-extensions","CSS","DOM","debounce"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DOM'),i=b('debounce'),j=i(function(){var k=document.documentElement,l=h.getDocumentScrollElement(),m=k.clientHeight<400||l.clientWidth<l.scrollWidth;g.conditionClass(k,'tinyViewport',m);g.conditionClass(k,'canHaveFixedElements',!m);});j();Event.listen(window,'resize',j);});
__d("legacy:Toggler",["Toggler"],function(a,b,c,d){a.Toggler=b('Toggler');},3);
__d("FormDisableOnSubmit",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._form=i;}g(h.prototype,{_subscription:null,_disabled:false,enable:function(){this._subscription=this._form.subscribe(['submit','reset'],this._handle.bind(this));},disable:function(){this._form.unsubscribe(this._subscription);this._subscription=null;},_handle:function(i,j){if(i=='submit'){if(this._disabled)return false;this._disabled=true;return true;}this._disabled=false;}});e.exports=h;});
__d("FormSubmitOnChange",["event-extensions","copyProperties","submitForm"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('submitForm');function i(j){this._form=j;}g(i.prototype,{_listener:null,enable:function(){this._listener=Event.listen(this._form.getRoot(),'change',this._submit.bind(this));},disable:function(){this._listener.remove();this._listener=null;},_submit:function(){h(this._form.getRoot());}});e.exports=i;});
__d("UIForm",["event-extensions","ArbiterMixin","BehaviorsMixin","Class","DOM","Form","FormDisableOnSubmit","FormSubmitOnChange","Run","areObjectsEqual","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('BehaviorsMixin'),i=b('Class'),j=b('DOM'),k=b('Form'),l=b('FormDisableOnSubmit'),m=b('FormSubmitOnChange'),n=b('Run'),o=b('areObjectsEqual'),p=b('copyProperties');function q(r,s,t,u){this._root=r;this.controller=r;this._message=s;n.onAfterLoad(function(){this._originalState=k.serialize(this._root);}.bind(this));this._forceDirty=t;this._submitted=false;Event.listen(this._root,'submit',this._handleSubmit.bind(this));if(u&&u.length)this.enableBehaviors(u);var v=true;n.onBeforeUnload(this.checkUnsaved.bind(this),v);}p(q.prototype,g,h,{getRoot:function(){return this._root;},_handleSubmit:function(){if(this.inform('submit')===false)return false;this._submitted=true;return true;},reset:function(){this.inform('reset');this._submitted=false;},isDirty:function(){if(this._submitted||!j.contains(document.body,this._root))return false;if(this._forceDirty)return true;var r=k.serialize(this._root);return !o(r,this._originalState);},checkUnsaved:function(){if(this.isDirty())return this._message;return null;}});e.exports=a.UIForm||q;});
__d("legacy:error-signal",["ErrorSignal"],function(a,b,c,d){var e=b('ErrorSignal');a.send_error_signal=e.sendErrorSignal;a.logJSError=e.logJSError;},3);